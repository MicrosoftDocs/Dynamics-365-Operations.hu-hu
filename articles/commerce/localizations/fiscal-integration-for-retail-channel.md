---
title: A Commerce-csatornák pénzügyi integrálásának áttekintése
description: Ez a témakör a Dynamics 365 Commerce szolgáltatásban rendelkezésre álló pénzügyi integrációs lehetőségekről ad áttekintést.
author: josaw
manager: annbe
ms.date: 02/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2019-1-16
ms.dyn365.ops.version: 10
ms.openlocfilehash: 45677681ebae40210d6e2d896323f7e691b765e2
ms.sourcegitcommit: 12b9d6f2dd24e52e46487748c848864909af6967
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 02/14/2020
ms.locfileid: "3057556"
---
# <a name="overview-of-fiscal-integration-for-commerce-channels"></a><span data-ttu-id="bb0db-103">A Commerce-csatornák pénzügyi integrálásának áttekintése</span><span class="sxs-lookup"><span data-stu-id="bb0db-103">Overview of fiscal integration for Commerce channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="bb0db-104">Bevezetés</span><span class="sxs-lookup"><span data-stu-id="bb0db-104">Introduction</span></span>

<span data-ttu-id="bb0db-105">Ez a témakör a Dynamics 365 Commerce szolgáltatásban rendelkezésre álló pénzügyi integrációs lehetőségek áttekintése.</span><span class="sxs-lookup"><span data-stu-id="bb0db-105">This topic is an overview of the fiscal integration capabilities that are available in Dynamics 365 Commerce.</span></span> <span data-ttu-id="bb0db-106">A pénzügyi integráció tartalmazza a különböző pénzügyi eszközök és szolgáltatások integrációját, amelyek lehetővé teszik az értékesítések pénzügyi regisztrációját a helyi pénzügyi jogszabályokkal összhangban, amelyek célja az adócsalás megakadályozása a kiskereskedelmi iparágban.</span><span class="sxs-lookup"><span data-stu-id="bb0db-106">Fiscal integration includes integration with various fiscal devices and services that enable fiscal registration of sales in accordance with local fiscal laws that are aimed at preventing tax fraud in the retail industry.</span></span> <span data-ttu-id="bb0db-107">Alább láthatók olyan tipikus esetek, amelyek pénzügyi integrációval megoldhatók:</span><span class="sxs-lookup"><span data-stu-id="bb0db-107">Here are some typical scenarios that can be covered by using fiscal integration:</span></span>

- <span data-ttu-id="bb0db-108">Ertékesítés regisztrálása olyan pénzügyi eszközön, amely a pénztárhoz (POS) csatlakozik, például pénzügyi nyomtató, majd a pénzügyi nyugta nyomtatása a vevő számára.</span><span class="sxs-lookup"><span data-stu-id="bb0db-108">Register a sale on a fiscal device that is connected to point of sale (POS), such as a fiscal printer, and print a fiscal receipt for the customer.</span></span>
- <span data-ttu-id="bb0db-109">A Retail POS szolgáltatásban végrehajtott értékesítéshez és visszárukhoz kapcsolódó információk biztonságos elküldése külső webes szolgáltatásnak, amelyet az ahatóság üzemeltet.</span><span class="sxs-lookup"><span data-stu-id="bb0db-109">Securely submit information that is related to sales and returns that are completed in Retail POS to an external web-service that is operated by the tax authority.</span></span>
- <span data-ttu-id="bb0db-110">Segít az értékesítési tranzakcióadatok megmásíthatatlanságát digitális aláírások segítségével.</span><span class="sxs-lookup"><span data-stu-id="bb0db-110">Help guarantee inalterability of sales transaction data through digital signatures.</span></span>

<span data-ttu-id="bb0db-111">A pénzügyi integrációs funkció egy keretrendszer, amely közös megoldást kínál a Retail POS és a pénzügyi eszközök és szolgáltatások közti integráció továbbfejlesztésére és testreszabására.</span><span class="sxs-lookup"><span data-stu-id="bb0db-111">The fiscal integration functionality is a framework that provides a common solution for further development and customization of the integration between Retail POS and fiscal devices and services.</span></span> <span data-ttu-id="bb0db-112">A funkció pénzügyi integráció mintákat is tartalmaz, amelyek támogatják az alapvető eseteket az adott országban vagy régiókban, és amelyek specifikus pénzügyi eszközökkel vagy szolgáltatásokkal működnek.</span><span class="sxs-lookup"><span data-stu-id="bb0db-112">The functionality also includes fiscal integration samples that support basic scenarios for specific countries or regions, and that work with specific fiscal devices or services.</span></span> <span data-ttu-id="bb0db-113">Pénzügyi integráció minta a Commerce-összetevők számos kiterjesztését is tartalmazza, és szerepel a szoftverfejlesztő készletben (SDK).</span><span class="sxs-lookup"><span data-stu-id="bb0db-113">A fiscal integration sample consists of several extensions of Commerce components and is included in the software development kit (SDK).</span></span> <span data-ttu-id="bb0db-114">A pénzügyi integrációs sablonokkal kapcsolatos további tudnivalókat lásd: [Pénzügyi integrációs sablonok a Retail SDK-ban](#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="bb0db-114">For more information about the fiscal integration samples, see [Fiscal integration samples in the Retail SDK](#fiscal-integration-samples-in-the-retail-sdk).</span></span> <span data-ttu-id="bb0db-115">A Retail SDK telepítésével és használatával kapcsolatos tudnivalókat lásd: [Retail szoftverfejlesztői készlet (SDK) architektúrája](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span><span class="sxs-lookup"><span data-stu-id="bb0db-115">For information about how to install and use the Retail SDK, see [Retail software development kit (SDK) architecture](../dev-itpro/retail-sdk/retail-sdk-overview.md).</span></span>

<span data-ttu-id="bb0db-116">Az olyan helyzetek támogatásához, amelyeket nem támogat a pénzügyi integrációs minta, a Retail POS egyéb pénzügyi eszközökkel vagy szolgáltatásokkal való integrálásához, vagy a más országokban vagy régiókban levő követelmények lefedéséhez vagy ki kell terjesztenie a létező pénzügyi integrációs mintát, vagy új mintát kell létrehoznia egy meglévő minta példaként való használatával.</span><span class="sxs-lookup"><span data-stu-id="bb0db-116">To support other scenarios that aren't supported by a fiscal integration sample, to integrate Retail POS with other fiscal devices or services, or to cover requirements of other countries or regions, you must either extend an existing fiscal integration sample or create a new sample by using an existing sample as an example.</span></span>

## <a name="fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices"></a><span data-ttu-id="bb0db-117">Pénzügyi regisztrációs folyamat és péntügyi integrációs minta pénzügyi eszközökhöz</span><span class="sxs-lookup"><span data-stu-id="bb0db-117">Fiscal registration process and fiscal integration samples for fiscal devices</span></span>

<span data-ttu-id="bb0db-118">A pénzügyi regisztrációs folyamat a Retail POS felületén egy vagy több lépésből állhat.</span><span class="sxs-lookup"><span data-stu-id="bb0db-118">A fiscal registration process in Retail POS can consist of one or more steps.</span></span> <span data-ttu-id="bb0db-119">Minden egyes lépés magában foglalja az adott tranzakciók vagy események pénzügyi regisztrációját egy pénzügyi eszközben vagy szolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="bb0db-119">Each step involves fiscal registration of specific transactions or events in one fiscal device or service.</span></span> <span data-ttu-id="bb0db-120">A következő megoldás-összetevők részt vesznek a pénzügyi regisztrációban egy hardverállomáshoz kapcsolódó pénzügyi eszközben:</span><span class="sxs-lookup"><span data-stu-id="bb0db-120">The following solution components participate in the fiscal registration in a fiscal device that is connected to a Hardware station:</span></span>

- <span data-ttu-id="bb0db-121">A **Commerce runtime (CRT) kiterjesztése** – Ez az összetevő a tranzakció/esemény adatokat olyan formátumba alakítja, amelyet a pénzügyi eszközzel való együttműködéshez használnak, elemzi a pénzügyi eszköz válaszait, és tárolja a válaszokat a csatorna-adatbázisban.</span><span class="sxs-lookup"><span data-stu-id="bb0db-121">**Commerce runtime (CRT) extension** – This component serializes transaction/event data in the format that is also used for interaction with the fiscal device, parses responses from the fiscal device, and stores the responses in the channel database.</span></span> <span data-ttu-id="bb0db-122">A kiterjesztés a regisztrálandó meghatározott tranzakciókat és eseményeket is meghatározza.</span><span class="sxs-lookup"><span data-stu-id="bb0db-122">The extension also defines the specific transactions and events that must be registered.</span></span> <span data-ttu-id="bb0db-123">Ezt az összetevőt gyakran nevezik *Pénzügyi dokumentumszolgáltatónak*.</span><span class="sxs-lookup"><span data-stu-id="bb0db-123">This component is often referred to as a *fiscal document provider*.</span></span>
- <span data-ttu-id="bb0db-124">**Hardverállomás kiterjesztése** – Ez az összetevő a pénzügyi eszközzel kommunikációt indít, kéréseket és közvetlen parancsokat küld a pénzügyi eszköznek a tranzakció/esemény adatai alapján, amelyet a pénzügyi dokumentumból kivont, és válaszokat fogad a pénzügyi eszköztől.</span><span class="sxs-lookup"><span data-stu-id="bb0db-124">**Hardware station extension** – This component initializes the communication with the fiscal device, sends requests and direct commands to the fiscal device based on the transaction/event data that is extracted from the fiscal document, and receives responses from the fiscal device.</span></span> <span data-ttu-id="bb0db-125">Ezt az összetevőt gyakran nevezik *Pénzügyi csatlakozónak*.</span><span class="sxs-lookup"><span data-stu-id="bb0db-125">This component is often referred to as a *fiscal connector*.</span></span>

<span data-ttu-id="bb0db-126">Egy pénzügyi eszköz pénzügyi integrációs mintája tartalmazza a CRT- és a hardverállomás-kiterjesztéseket egy pénzügyi dokumentumszolgáltatóra és egy pénzügyi csatlakozóra.</span><span class="sxs-lookup"><span data-stu-id="bb0db-126">A fiscal integration sample for a fiscal device contains the CRT and Hardware station extensions for a fiscal document provider and a fiscal connector, respectively.</span></span> <span data-ttu-id="bb0db-127">A következő összetevő-konfigurációkat is tartalmazza:</span><span class="sxs-lookup"><span data-stu-id="bb0db-127">It also contains the following component configurations:</span></span>

- <span data-ttu-id="bb0db-128">**Pénzügyi dokumentumszolgáltató konfigurációja** – Ez a beállítás meghatározza a pénzügyi dokumentumokhoz tartozó kimeneti módszert, valamint a formátumot.</span><span class="sxs-lookup"><span data-stu-id="bb0db-128">**Fiscal document provider configuration** – This configuration defines an output method and a format for fiscal documents.</span></span> <span data-ttu-id="bb0db-129">Az adatok hozzárendelését is tartalmazza az adókhoz és fizetési módokhoz, hogy a Retail POS adatai kompatibilisek legyenek a pénzügyi eszköz belső vezérlőprogramja által előre beállított értékekkel.</span><span class="sxs-lookup"><span data-stu-id="bb0db-129">It also contains a data mapping for taxes and payment methods, to make data from Retail POS compatible with the values that are predefined in the fiscal device firmware.</span></span>
- <span data-ttu-id="bb0db-130">**Pénzügyi csatlakozó konfigurációja** – Ez a beállítás határozza meg a fizikai kommunikációt az adott pénzügyi eszközzel.</span><span class="sxs-lookup"><span data-stu-id="bb0db-130">**Fiscal connector configuration** – This configuration defines the physical communication with the specific fiscal device.</span></span>

<span data-ttu-id="bb0db-131">Egy adott POS-pénztárgép pénzügyi regisztrációs folyamatát a pénztár funkcióprofiljának megfelelő beállítása határozza meg.</span><span class="sxs-lookup"><span data-stu-id="bb0db-131">A fiscal registration process for a specific POS register is defined by a corresponding setting in the POS functionality profile.</span></span> <span data-ttu-id="bb0db-132">A pénzügyi regisztrációs folyamat konfigurációjával, a pénzügyi dokumentumszolgáltató és pénzügyi csatlakozó konfigurációinak feltöltésével, és a paraméterek módosításával kapcsolatos további részletekért lásd: [Pénzügyi regisztrációs folyamat beállítása](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span><span class="sxs-lookup"><span data-stu-id="bb0db-132">For more details about how to configure a fiscal registration process, upload fiscal document provider and fiscal connector configurations, and change their parameters, see [Set up a fiscal registration process](setting-up-fiscal-integration-for-retail-channel.md#set-up-a-fiscal-registration-process).</span></span>

<span data-ttu-id="bb0db-133">A következő példa bemutatja a tipikus pénzügyi regisztrációs végrehajtási folyamatot egy pénzügyi eszközhöz.</span><span class="sxs-lookup"><span data-stu-id="bb0db-133">The following example shows a typical fiscal registration execution flow for a fiscal device.</span></span> <span data-ttu-id="bb0db-134">A folyamat a pénztárban történt eseménnyel kezdődik (például egy értékesítési tranzakció véglegesítése), és az alábbi lépéssorozatot hajtja végre:</span><span class="sxs-lookup"><span data-stu-id="bb0db-134">The flow starts with an event in the POS (for example, finalization of a sales transaction) and implements the following sequence of steps:</span></span>

1. <span data-ttu-id="bb0db-135">A pénztár a CRT-ből pénzügyi bizonylatot kér.</span><span class="sxs-lookup"><span data-stu-id="bb0db-135">The POS requests a fiscal document from CRT.</span></span>
2. <span data-ttu-id="bb0db-136">A CRT határozza meg, hogy szükséges-e az aktuális eseményhez pénzügyi regisztráció.</span><span class="sxs-lookup"><span data-stu-id="bb0db-136">CRT determines whether the current event requires fiscal registration.</span></span>
3. <span data-ttu-id="bb0db-137">A pénzügyi regisztrációs folyamat beállításainak megfelelően a CRT azonosít egy pénzügyi csatlakozót, és a hozzá tartozó pénzügyi dokumentumszolgáltatót, amelyet a pénzügyi nyilvántartáshoz használ majd.</span><span class="sxs-lookup"><span data-stu-id="bb0db-137">Based on the fiscal registration process settings, CRT identifies a fiscal connector and corresponding fiscal document provider to use for the fiscal registration.</span></span>
4. <span data-ttu-id="bb0db-138">A CRT futtatja a pénzügyi dokumentumszolgáltatót, amely egy pénzügyi dokumentumot hoz létre (például egy XML-dokumentumot), amely képviseli a tranzakciót vagy eseményt.</span><span class="sxs-lookup"><span data-stu-id="bb0db-138">CRT runs the fiscal document provider that generates a fiscal document (for example, an XML document) that represents the transaction or event.</span></span>
5. <span data-ttu-id="bb0db-139">A pénztár elküldi a pénzügyi bizonylatot, amelyet a CRT előkészít a hardverállomás számára.</span><span class="sxs-lookup"><span data-stu-id="bb0db-139">The POS sends the fiscal document that CRT prepares to a Hardware station.</span></span>
6. <span data-ttu-id="bb0db-140">A hardverállomás lefuttatja a pénzügyi csatlakozót, amely feldolgozza a pénzügyi dokumentumot, és tájékoztatja a pénzügyi eszközt vagy szolgáltatást.</span><span class="sxs-lookup"><span data-stu-id="bb0db-140">The Hardware station runs the fiscal connector that processes the fiscal document and communicates it to the fiscal device or service.</span></span>
7. <span data-ttu-id="bb0db-141">A pénztár elemzi a pénzügyi eszköz vagy szolgáltatás válaszát, és meghatározza, hogy sikeres volt-e a pénzügyi regisztráció.</span><span class="sxs-lookup"><span data-stu-id="bb0db-141">The POS analyzes the response from the fiscal device or service to determine whether the fiscal registration was successful.</span></span>
8. <span data-ttu-id="bb0db-142">A CRT elmenti a választ a csatorna-adatbázisba.</span><span class="sxs-lookup"><span data-stu-id="bb0db-142">CRT saves the response to the channel database.</span></span>

<span data-ttu-id="bb0db-143">![Megoldási séma](media/emea-fiscal-integration-solution.png "Megoldási séma")</span><span class="sxs-lookup"><span data-stu-id="bb0db-143">![Solution schema](media/emea-fiscal-integration-solution.png "Solution schema")</span></span>

## <a name="error-handling"></a><span data-ttu-id="bb0db-144">Hibakezelés</span><span class="sxs-lookup"><span data-stu-id="bb0db-144">Error handling</span></span>

<span data-ttu-id="bb0db-145">A pénzügyi integrációs keretrendszer a hibák kezelésére a pénzügyi regisztráció során a következő lehetőségeket nyújtja:</span><span class="sxs-lookup"><span data-stu-id="bb0db-145">The fiscal integration framework provides the following options to handle failures during fiscal registration:</span></span>

- <span data-ttu-id="bb0db-146">**Újrapróbálkozás** – Az operátorok használhatják ezt a lehetőséget, ha a hiba gyorsan feloldható, és a pénzügyi regisztrációt újrafuttathatja.</span><span class="sxs-lookup"><span data-stu-id="bb0db-146">**Retry** – Operators can use this option when the failure can be resolved quickly, and the fiscal registration can be rerun.</span></span> <span data-ttu-id="bb0db-147">Például ezt a lehetőséget használhatja, amikor a pénzügyi eszköz nincs csatlakoztatva, a pénzügyi nyomtatóból kifogyott a papír, vagy papírelakadás van a pénzügyi nyomtatóban.</span><span class="sxs-lookup"><span data-stu-id="bb0db-147">For example, this option can be used when the fiscal device isn't connected, the fiscal printer is out of paper, or there is a paper jam in the fiscal printer.</span></span>
- <span data-ttu-id="bb0db-148">**Érvénytelenítés** – Ezzel a lehetőséggel az operátorok elhalaszthatják az aktuális tranzakció vagy esemény pénzügyi regisztrációját, ha sikertelen.</span><span class="sxs-lookup"><span data-stu-id="bb0db-148">**Cancel** – This option lets operators postpone the fiscal registration of the current transaction or event if it fails.</span></span> <span data-ttu-id="bb0db-149">A regisztráció elhalasztása után az operátor folytathatja a munkát a pénztában, és bármely műveletet végrehajthat, amihez nincs szükség a pénzügyi regisztrációra.</span><span class="sxs-lookup"><span data-stu-id="bb0db-149">After the registration is postponed, the operator can continue to work on the POS and can complete any operation that the fiscal registration isn't required for.</span></span> <span data-ttu-id="bb0db-150">Ha olyan esemény történik a pénztárban, amelyhez a pénzügyi regisztráció szükséges (például egy új tranzakciót nyitnak), a hibakezelési párbeszédpanel automatikusan megjelenik és értesíti az operátort, hogy a korábbi tranzakciót nem megfelelően regisztrálták, és hibakezelési lehetőségeket nyújt.</span><span class="sxs-lookup"><span data-stu-id="bb0db-150">When any event that requires the fiscal registration occurs in the POS (for example, a new transaction is opened), the error handling dialog box automatically appears to notify the operator that the previous transaction wasn't correctly registered and to provide the error handling options.</span></span>
- <span data-ttu-id="bb0db-151">**Kihagyás** – Az operátorok használhatják ezt a lehetőséget, amikor a pénzügyi regisztráció bizonyos feltételek fennállása esetén elhagyható, és az általános műveletek folytathatók a pénztárban.</span><span class="sxs-lookup"><span data-stu-id="bb0db-151">**Skip** – Operators can use this option when the fiscal registration can be omitted under specific conditions and regular operations can be continued on the POS.</span></span> <span data-ttu-id="bb0db-152">Ez a beállítás például használható, amikor egy értékesítési tranzakciót, amelynek a pénzügyi regisztrációja nem sikerült, a különleges papírnaplóban lehet regisztrálni.</span><span class="sxs-lookup"><span data-stu-id="bb0db-152">For example, this option can be used when a sales transaction that the fiscal registration failed for can be registered in a special paper journal.</span></span>
- <span data-ttu-id="bb0db-153">**Megjelölés regisztráltként** – Az operátorok használhatják ezt a lehetőséget, amikor a tranzakció ténylegesen regisztrálva van a pénzügyi eszközben (például egy pénzügyi nyugtát kinyomtattak), de hiba történt a pénzügyi válasz csatorna-adatbázisba mentése közben.</span><span class="sxs-lookup"><span data-stu-id="bb0db-153">**Mark as registered** – Operators can use this option when the transaction was actually registered in the fiscal device (for example, a fiscal receipt was printed), but a failure occurred when the fiscal response was being saved to the channel database.</span></span>

> [!NOTE]
> <span data-ttu-id="bb0db-154">A **Kihagyás** és a **Megjelölés regisztráltként** beállításokat aktiválni kell a pénzügyi regisztrációs folyamatban a használatuk előtt.</span><span class="sxs-lookup"><span data-stu-id="bb0db-154">The **Skip** and **Mark as registered** options must be activated in the fiscal registration process before they are used.</span></span> <span data-ttu-id="bb0db-155">Ezenkívül megfelelő engedélyt kell biztosítani az operátoroknak.</span><span class="sxs-lookup"><span data-stu-id="bb0db-155">In addition, corresponding permissions must be granted to operators.</span></span>

<span data-ttu-id="bb0db-156">A **Kihagyás** és **Megjelölés regisztráltként** beállítások lehetővé teszik az infókódok számára, hogy a hibával kapcsolatos meghatározott információkat rögzítsenek, például a hiba okát vagy a pénzügyi regisztráció kihagyásának indoklását, vagy a tranzakció regisztráltként való megjelölését.</span><span class="sxs-lookup"><span data-stu-id="bb0db-156">The **Skip** and **Mark as registered** options enable info codes to capture some specific information about the failure, such as the reason for the failure or a justification for skipping the fiscal registration or marking the transaction as registered.</span></span> <span data-ttu-id="bb0db-157">Hibakezelési paraméterek beállításával kapcsolatos további tudnivalókat lásd: [Hibakezelési beállítások beállítása](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="bb0db-157">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="optional-fiscal-registration"></a><span data-ttu-id="bb0db-158">Opcionális pénzügyi regisztráció</span><span class="sxs-lookup"><span data-stu-id="bb0db-158">Optional fiscal registration</span></span>

<span data-ttu-id="bb0db-159">Pénzügyi regisztráció kötelező lehet az egyes műveletekhez, míg másoknál opcionális.</span><span class="sxs-lookup"><span data-stu-id="bb0db-159">Fiscal registration might be mandatory for some operations but optional for others.</span></span> <span data-ttu-id="bb0db-160">Például előfordulhat, hogy a pénzügyi regisztráció normál értékesítések és visszáru esetében kötelező, de lehet, hogy a vevői letétekhez kapcsolódó műveletek pénzügyi regisztrációja nem kötelező.</span><span class="sxs-lookup"><span data-stu-id="bb0db-160">For example, the fiscal registration of regular sales and returns might be mandatory, but the fiscal registration of operations that are related to customer deposits might be optional.</span></span> <span data-ttu-id="bb0db-161">Ebben az esetben az eladás pénzügyi regisztrálásának elmulasztása blokkolja a további értékesítést, de a vevői letétet pénzügyi regisztrációjának elmulasztása nem akadályozza meg a további értékesítést.</span><span class="sxs-lookup"><span data-stu-id="bb0db-161">In this case, failure to complete the fiscal registration of a sale should block further sales, but failure to complete the fiscal registration of a customer deposit should not block further sales.</span></span> <span data-ttu-id="bb0db-162">A kötelező és választható műveletek megkülönböztetéséhez ajánlott a különböző dokumentum szolgáltatókon keresztül kezelni azokat, és hogy külön lépéseket állítson be a pénzügyi regisztrációs folyamatban ezekhez a szolgáltatókhoz.</span><span class="sxs-lookup"><span data-stu-id="bb0db-162">To distinguish mandatory and optional operations, we recommend that you handle them through different document providers, and that you set up separate steps in the fiscal registration process for those providers.</span></span> <span data-ttu-id="bb0db-163">A **Hiba esetén folytatás** paramétert engedélyezni kell minden lépéshez, amely kapcsolódik az opcionális pénzügyi regisztrációhoz.</span><span class="sxs-lookup"><span data-stu-id="bb0db-163">The **Continue on error** parameter should be enabled for any step that is related to optional fiscal registration.</span></span> <span data-ttu-id="bb0db-164">Hibakezelési paraméterek beállításával kapcsolatos további tudnivalókat lásd: [Hibakezelési beállítások beállítása](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="bb0db-164">For more details about how to set up error handling parameters, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

### <a name="manually-running-fiscal-registration"></a><span data-ttu-id="bb0db-165">Pénzügyi regisztráció manuális futtatása</span><span class="sxs-lookup"><span data-stu-id="bb0db-165">Manually running fiscal registration</span></span>

<span data-ttu-id="bb0db-166">Ha egy tranzakció vagy esemény pénzügyi regisztrációja el lett halasztva egy hiba után (például akkor, ha a kezelő **Mégse** lehetőséget választotta hibakezelési párbeszédpanelen a), manuálisan újrafuttathatja a pénzügyi regisztrációt a hozzá tartozó művelet meghívásával.</span><span class="sxs-lookup"><span data-stu-id="bb0db-166">If the fiscal registration of a transaction or event has been postponed after a failure (for example, if the operator selected **Cancel** in the error handling dialog box), you can manually rerun the fiscal registration by invoking a corresponding operation.</span></span> <span data-ttu-id="bb0db-167">További részletekért lásd: [Elhalasztott pénzügyi regisztrációs manuális végrehajtásának engedélyezése](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span><span class="sxs-lookup"><span data-stu-id="bb0db-167">For more details, see [Enable manual execution of postponed fiscal registration](setting-up-fiscal-integration-for-retail-channel.md#enable-manual-execution-of-postponed-fiscal-registration).</span></span>

### <a name="fiscal-registration-health-check"></a><span data-ttu-id="bb0db-168">Pénzügyi regisztráció állapotának ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="bb0db-168">Fiscal registration health check</span></span>

<span data-ttu-id="bb0db-169">A pénzügyi regisztrációkhoz tartozó állapotellenőrzési eljárás ellenőrzi az elérhetőségét egy pénzügyi eszköznek vagy szolgáltatásnak bizonyos események bekövetkezésekor.</span><span class="sxs-lookup"><span data-stu-id="bb0db-169">The health check procedure for fiscal registrations verifies the availability of the fiscal device or service when specific events occur.</span></span> <span data-ttu-id="bb0db-170">Ha a pénzügyi regisztráció jelenleg nem hajtható végre, a kezelő előre értesítést kap.</span><span class="sxs-lookup"><span data-stu-id="bb0db-170">If the fiscal registration can't currently be completed, the operator is notified in advance.</span></span>

<span data-ttu-id="bb0db-171">A pénztár lefuttatja az állapotellenőrzést a következő események bekövetkezése esetén:</span><span class="sxs-lookup"><span data-stu-id="bb0db-171">The POS runs the health check when the following events occur:</span></span>

- <span data-ttu-id="bb0db-172">Új tranzakció megnyitása.</span><span class="sxs-lookup"><span data-stu-id="bb0db-172">A new transaction is opened.</span></span>
- <span data-ttu-id="bb0db-173">Egy felfüggesztett tranzakció visszahívása.</span><span class="sxs-lookup"><span data-stu-id="bb0db-173">A suspended transaction is recalled.</span></span>
- <span data-ttu-id="bb0db-174">Egy értékesítési vagy visszáru-tranzakció lezárása.</span><span class="sxs-lookup"><span data-stu-id="bb0db-174">A sales or return transaction is finalized.</span></span>

<span data-ttu-id="bb0db-175">Ha az állapotellenőrzés sikertelen, a POS megjeleníti az állapotellenőrzés párbeszédpanelt.</span><span class="sxs-lookup"><span data-stu-id="bb0db-175">If the health check fails, the POS shows the health check dialog box.</span></span> <span data-ttu-id="bb0db-176">Ez a párbeszédpanel a következő gombokat teszi elérhetővé:</span><span class="sxs-lookup"><span data-stu-id="bb0db-176">This dialog box provides the following buttons:</span></span>

- <span data-ttu-id="bb0db-177">**OK** – Ez a gomb lehetővé teszi, hogy a kezelő az állapotellenőrzési hibát figyelmen kívül hagyja, és folytassa a műveletet.</span><span class="sxs-lookup"><span data-stu-id="bb0db-177">**OK** – This button lets the operator ignore a health check error and continue to process the operation.</span></span> <span data-ttu-id="bb0db-178">Kezelők csak akkor választhatják ki ezt a gombot, ha az **Állapotellenőrzési hiba kihagyásának ellenőrzése** jogosultság engedélyezve van hozzájuk.</span><span class="sxs-lookup"><span data-stu-id="bb0db-178">Operators can select this button only if the **Allow skip health check error** permission is enabled for them.</span></span>
- <span data-ttu-id="bb0db-179">**Mégse** – Ha a kezelő ezt a gombot választja , a POS érvényteleníti az utolsó művelet (például egy cikk nem adódik hozzá egy új tranzakcióhoz).</span><span class="sxs-lookup"><span data-stu-id="bb0db-179">**Cancel** – If the operator selects this button, the POS cancels the last action (for example, an item isn't added to a new transaction).</span></span>

> [!NOTE]
> <span data-ttu-id="bb0db-180">Az állapotellenőrzés futtatása csak akkor történik meg, ha az aktuális művelethez pénzügyi regisztráció szükséges, és a **Hiba esetén folytatás** paraméter a pénzügyi regisztráció aktuális lépéséhez le van tiltva.</span><span class="sxs-lookup"><span data-stu-id="bb0db-180">The health check is run only if the current operation requires fiscal registration, and if  the **Continue on error** parameter is disabled for the current step of the fiscal registration process.</span></span> <span data-ttu-id="bb0db-181">További részletekért lásd: [Hibakezelés beállításainak megadása](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span><span class="sxs-lookup"><span data-stu-id="bb0db-181">For more details, see [Set error handling settings](setting-up-fiscal-integration-for-retail-channel.md#set-error-handling-settings).</span></span>

## <a name="storing-fiscal-response-in-fiscal-transaction"></a><span data-ttu-id="bb0db-182">Pénzügyi válasz tárolása pénzügyi tranzakcióban</span><span class="sxs-lookup"><span data-stu-id="bb0db-182">Storing fiscal response in fiscal transaction</span></span>

<span data-ttu-id="bb0db-183">Ha egy tranzakció vagy esemény pénzügyi regisztrációja sikeres, a pénzügyi tranzakció létrejön a csatorna-adatbázisban, és az eredeti tranzakcióhoz vagy eseményhez kapcsolódik.</span><span class="sxs-lookup"><span data-stu-id="bb0db-183">When fiscal registration of a transaction or event is successful, a fiscal transaction is created in the channel database and linked to the original transaction or event.</span></span> <span data-ttu-id="bb0db-184">Hasonlóképpen ha a **Kihagyás** vagy **Megjelölés regisztráltként** lehetőség ki van választva egy sikertelen pénzügyi regisztráció esetén, a pénzügyi tranzakció ezeket az adatokat tárolja.</span><span class="sxs-lookup"><span data-stu-id="bb0db-184">Similarly, if the **Skip** or **Mark as registered** option is selected for a failed fiscal registration, this information is stored in a fiscal transaction.</span></span> <span data-ttu-id="bb0db-185">A pénzügyi tranzakció tárolja a pénzügyi eszköz vagy szolgáltatás pénzügyi válaszát.</span><span class="sxs-lookup"><span data-stu-id="bb0db-185">A fiscal transaction holds the fiscal response of the fiscal device or service.</span></span> <span data-ttu-id="bb0db-186">Ha a pénzügyi regisztrációs folyamat több lépésből áll, a sikeres vagy sikertelen regisztrációt eredményező folyamat minden egyes lépéséhez létrejön egy pénzügyi tranzakció.</span><span class="sxs-lookup"><span data-stu-id="bb0db-186">If the fiscal registration process consists of several steps, a fiscal transaction is created for each step of the process that resulted in a successful or failed registration.</span></span>

<span data-ttu-id="bb0db-187">A pénzügyi tranzakciókat a rendszer a Headquarters szolgáltatásba továbbítja a *P-feladat* segítségével, a tranzakciókkal együtt.</span><span class="sxs-lookup"><span data-stu-id="bb0db-187">Fiscal transactions are transferred to Headquarters by the *P-job*, together with transactions.</span></span> <span data-ttu-id="bb0db-188">A **Pénzügyi tranzakciók** gyorslapon az **Üzleti tranzakciók** oldalon belül megtekintheti azokat a pénzügyi tranzakciókat, amelyekhez tranzakciók kapcsolódnak.</span><span class="sxs-lookup"><span data-stu-id="bb0db-188">On the **Fiscal transactions** FastTab of the **Store transactions** page, you can view the fiscal transactions that are linked to transactions.</span></span>

<span data-ttu-id="bb0db-189">A pénzügyi tranzakció tárolja a következő adatokat:</span><span class="sxs-lookup"><span data-stu-id="bb0db-189">A fiscal transaction stores the following details:</span></span>

- <span data-ttu-id="bb0db-190">Pénzügyi regisztrációs folyamat részletei (folyamat, csatlakozócsoport, csatlakozó stb).</span><span class="sxs-lookup"><span data-stu-id="bb0db-190">Fiscal registration process details (process, connector group, connector, and so on).</span></span> <span data-ttu-id="bb0db-191">Szintén tárolja a pénzügyi eszköz sorozatszámát a **Pénztárgép száma** mezőben, ha ez az információ szerepel a pénzügyi válaszban.</span><span class="sxs-lookup"><span data-stu-id="bb0db-191">It also stores the serial number of the fiscal device in the **Register number** field, if this information is included in the fiscal response.</span></span>
- <span data-ttu-id="bb0db-192">A pénzügyi regisztráció állapota: **Kész** sikeres regisztráció esetén, **Kihagyva**, ha az operátor a **Kihagyás** lehetőséget választotta egy sikertelen regisztráció esetén, vagy **Megjelölve regisztráltként**, ha az operátor bejelölte a **Megjelölés regisztráltként** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="bb0db-192">The status of the fiscal registration: **Completed** for successful registration, **Skipped** if the operator selected the **Skip** option for a failed registration, or **Marked as registered** if the operator selected the **Mark as registered** option.</span></span>
- <span data-ttu-id="bb0db-193">A kijelölt pénzügyi tranzakcióhoz kapcsolódó összes infókód-tranzakció.</span><span class="sxs-lookup"><span data-stu-id="bb0db-193">Info code transactions that are related to a selected fiscal transaction.</span></span> <span data-ttu-id="bb0db-194">Az Infókód-tranzakciók megtekintéséhez a **Pénzügyi tranzakciók** gyorslapon válasszon egy olyan pénzügyi tranzakciót, amelynek állapota **Kihagyva** vagy **Megjelölve regisztráltként**, majd válassza ki **Infókód-tranzakciók** elemet.</span><span class="sxs-lookup"><span data-stu-id="bb0db-194">To view the info code transactions, on the **Fiscal transactions** FastTab, select a fiscal transaction that has a status of **Skipped** or **Marked as registered**, and then select **Info code transactions**.</span></span>

## <a name="fiscal-texts-for-discounts"></a><span data-ttu-id="bb0db-195">Pénzügyi szövegek engedményekhez</span><span class="sxs-lookup"><span data-stu-id="bb0db-195">Fiscal texts for discounts</span></span>

<span data-ttu-id="bb0db-196">Egyes országokban vagy régiókban különleges követelmények vannak érvényben a további szövegekkel kapcsolatban, amelyeket a pénzügyi nyugtára kell nyomtatni, amikor különböző engedményeket alkalmaznak.</span><span class="sxs-lookup"><span data-stu-id="bb0db-196">Some countries or regions have special requirements about additional texts that must be printed on fiscal receipts when different kinds of discounts are applied.</span></span> <span data-ttu-id="bb0db-197">A pénzügyi integráció funkció segítségével beállíthat egy speciális szöveget az engedményhez, amelyet az engedmény sora után a pénzügyi nyugtára nyomtat.</span><span class="sxs-lookup"><span data-stu-id="bb0db-197">The fiscal integration functionality lets you set up a special text for a discount that is printed after a discount line on a fiscal receipt.</span></span> <span data-ttu-id="bb0db-198">Manuális engedmények esetén, konfigurálhatja az infókódhoz megadott pénzügyi szöveget, amelyhez az infókód a **Termék engedménye** infókódként van megadva a pénztár funkcióprofilján.</span><span class="sxs-lookup"><span data-stu-id="bb0db-198">For manual discounts, you can configure a fiscal text for the info code that is specified as the **Product discount** info code in the POS functionality profile.</span></span> <span data-ttu-id="bb0db-199">A pénzügyi szövegek engedményekhez való beállításával kapcsolatos további tudnivalókat lásd: [Pénzügyi szövegek beállítása engedményekhez](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span><span class="sxs-lookup"><span data-stu-id="bb0db-199">For more details about how to set up fiscal texts for discounts, see [Set up fiscal texts for discounts](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-texts-for-discounts).</span></span>

## <a name="printing-fiscal-x-and-fiscal-z-reports"></a><span data-ttu-id="bb0db-200">Pénzügyi X- és pénzügyi Z-jelentések nyomtatása</span><span class="sxs-lookup"><span data-stu-id="bb0db-200">Printing fiscal X and fiscal Z reports</span></span>

<span data-ttu-id="bb0db-201">A pénzügyi integráció funkció támogatja az integrált pénzügyi eszköz vagy szolgáltatásra vonatkozóan egyedi napzáró kimutatások generálását:</span><span class="sxs-lookup"><span data-stu-id="bb0db-201">Fiscal integration functionality supports generation of end-of-day statements that are specific to the integrated fiscal device or service:</span></span>

- <span data-ttu-id="bb0db-202">A megfelelő műveletek futtatására használatos új gombokat a pénztár képernyő-elrendezésén kell hozzáadni.</span><span class="sxs-lookup"><span data-stu-id="bb0db-202">New buttons that run corresponding operations should be added to the POS screen layout.</span></span> <span data-ttu-id="bb0db-203">További részletekért lásd: [Pénzügyi X/Z jelentések beállítása a pénztárból](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span><span class="sxs-lookup"><span data-stu-id="bb0db-203">For more details, see [Set up fiscal X/Z reports from the POS](setting-up-fiscal-integration-for-retail-channel.md#set-up-fiscal-xz-reports-from-the-pos).</span></span>
- <span data-ttu-id="bb0db-204">A pénzügyi integrációs mintában ezeket a műveleteket meg kell feleltetni a pénzügyi eszköz megfelelő műveleteivel.</span><span class="sxs-lookup"><span data-stu-id="bb0db-204">In the fiscal integration sample, these operations should be matched to the corresponding operations of the fiscal device.</span></span>

## <a name="fiscal-integration-samples-in-the-retail-sdk"></a><span data-ttu-id="bb0db-205">Pénzügyi integrációs minták a Retail szoftverfejlesztői készletben (SDK)</span><span class="sxs-lookup"><span data-stu-id="bb0db-205">Fiscal integration samples in the Retail SDK</span></span>

<span data-ttu-id="bb0db-206">A Retail SDK-ban jelenleg a következő pénzügyi integráció minták érhetők el:</span><span class="sxs-lookup"><span data-stu-id="bb0db-206">The following fiscal integration samples are currently available in the Retail SDK:</span></span>

- [<span data-ttu-id="bb0db-207">Adóügyi nyomtató integrációját bemutató minta Olaszországra vonatkozóan</span><span class="sxs-lookup"><span data-stu-id="bb0db-207">Fiscal printer integration sample for Italy</span></span>](emea-ita-fpi-sample.md)
- [<span data-ttu-id="bb0db-208">Adóügyi nyomtató integrációját bemutató minta Lengyelországra vonatkozóan</span><span class="sxs-lookup"><span data-stu-id="bb0db-208">Fiscal printer integration sample for Poland</span></span>](emea-pol-fpi-sample.md)
- [<span data-ttu-id="bb0db-209">Adóügyi regisztrációs szolgáltatás integrációját bemutató minta Ausztriára vonatkozóan</span><span class="sxs-lookup"><span data-stu-id="bb0db-209">Fiscal registration service integration sample for Austria</span></span>](emea-aut-fi-sample.md)
- [<span data-ttu-id="bb0db-210">Adóügyi regisztrációs szolgáltatás integrációját bemutató minta Csehországra vonatkozóan</span><span class="sxs-lookup"><span data-stu-id="bb0db-210">Fiscal registration service integration sample for Czech Republic</span></span>](emea-cze-fi-sample.md)
- [<span data-ttu-id="bb0db-211">Ellenőrzőegység integrációs minta Svédország esetén</span><span class="sxs-lookup"><span data-stu-id="bb0db-211">Control unit integration sample for Sweden</span></span>](./emea-swe-fi-sample.md)

<span data-ttu-id="bb0db-212">A következő pénzügyi integrációs funkció szintén elérhető a Retail SDK-ban, de jelenleg használja ki a pénzügyi integrációs keretrendszer előnyeit.</span><span class="sxs-lookup"><span data-stu-id="bb0db-212">The following fiscal integration functionality is also available in the Retail SDK but doesn't currently take advantage of the fiscal integration framework.</span></span> <span data-ttu-id="bb0db-213">Ennek a funkciónak az áttelepítése a pénzügyi integrációs keretrendszerbe a későbbi frissítésekben tervezett.</span><span class="sxs-lookup"><span data-stu-id="bb0db-213">Migration of this functionality to the fiscal integration framework is planned for later updates.</span></span>


- [<span data-ttu-id="bb0db-214">Digitális aláírás Franciaország esetén</span><span class="sxs-lookup"><span data-stu-id="bb0db-214">Digital signature for France</span></span>](emea-fra-cash-registers.md)
- [<span data-ttu-id="bb0db-215">Digitális aláírás Norvégia esetén</span><span class="sxs-lookup"><span data-stu-id="bb0db-215">Digital signature for Norway</span></span>](emea-nor-cash-registers.md)

<span data-ttu-id="bb0db-216">A Retail SDK csomagban elérhető alábbi örökölt pénzügyi integrációs funkciók nem használják a pénzügyi integrációs keretrendszert, és a későbbi frissítésekkel elavulttá válnak:</span><span class="sxs-lookup"><span data-stu-id="bb0db-216">The following legacy fiscal integration functionality that is available in Retail SDK does not use the fiscal integration framework and will be deprecated in later updates:</span></span>

- [<span data-ttu-id="bb0db-217">Ellenőrzőegység integrációs mintája Svédország esetén (örökölt)</span><span class="sxs-lookup"><span data-stu-id="bb0db-217">Control unit integration sample for Sweden (legacy)</span></span>](./retail-sdk-control-unit-sample.md)
