---
title: Kiskereskedelmi tranzakció konzisztencia-ellenőrzése
description: Ebben a témakörben részletes leírást találhat a Dynamics 365 Commerce tranzakció konzisztencia-ellenőrzésre használatos funkciójáról.
author: josaw1
manager: AnnBe
ms.date: 10/07/2020
ms.topic: index-page
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.custom: ''
ms.assetid: ed0f77f7-3609-4330-bebd-ca3134575216
ms.search.region: global
ms.search.industry: Retail
ms.author: josaw
ms.search.validFrom: 2019-01-15
ms.dyn365.ops.version: 10
ms.openlocfilehash: 869230c0003735c1e9f48170a16ca9409a9edc19
ms.sourcegitcommit: 38d40c331c8894acb7b119c5073e3088b54776c1
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 01/15/2021
ms.locfileid: "4976539"
---
# <a name="retail-transaction-consistency-checker"></a><span data-ttu-id="c0475-103">Kiskereskedelmi tranzakció konzisztencia-ellenőrzése</span><span class="sxs-lookup"><span data-stu-id="c0475-103">Retail transaction consistency checker</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="c0475-104">Ebben a témakörben részletes leírást találhat a Microsoft Dynamics 365 Commerce tranzakció konzisztencia-ellenőrzésre használatos funkciójáról.</span><span class="sxs-lookup"><span data-stu-id="c0475-104">This topic describes the transaction consistency checker functionality in Microsoft Dynamics 365 Commerce.</span></span> <span data-ttu-id="c0475-105">A konzisztencia-ellenőrző azonosítja és elkülöníti az inkonzisztens tranzakciókat, mielőtt a kimutatásfeladási folyamat kezeli őket.</span><span class="sxs-lookup"><span data-stu-id="c0475-105">The consistency checker identifies and isolates inconsistent transactions before they are picked up by the statement posting process.</span></span>

<span data-ttu-id="c0475-106">Egy kimutatás feladása során a szolgáltatásban a feladás sikertelen lehet, ha inkonzisztens adatok találhatók a kereskedelmi tranzakciók táblájában.</span><span class="sxs-lookup"><span data-stu-id="c0475-106">When a statement is posted, posting can fail due to inconsistent data in the commerce transaction tables.</span></span> <span data-ttu-id="c0475-107">Az adatokkal kapcsolatos problémákat a pénztár (POS) alkalmazás előre nem látható problémái okozhatják, vagy ha a tranzakciók importálása nem megfelelően történt egy külső fél pénztárrendszeréből.</span><span class="sxs-lookup"><span data-stu-id="c0475-107">The data issue may be caused by unforeseen issues in the point of sale (POS) application, or if transactions were incorrectly imported from third-party POS systems.</span></span> <span data-ttu-id="c0475-108">Az alábbiakban az inkonzisztenciák megjelenésére mutatunk be példákat:</span><span class="sxs-lookup"><span data-stu-id="c0475-108">Examples of how these inconsistencies may appear include:</span></span> 

- <span data-ttu-id="c0475-109">A fejléctáblában szereplő tranzakciós végösszeg nem egyezik meg a sorokban található tranzakciók összegével.</span><span class="sxs-lookup"><span data-stu-id="c0475-109">The transaction total on the header table does not match the transaction total on the lines.</span></span>
- <span data-ttu-id="c0475-110">A fejléctábla sorainak száma nem egyezik meg a tranzakciós tábla sorainak számával.</span><span class="sxs-lookup"><span data-stu-id="c0475-110">The line count on the header table does not match with the number of lines in the transaction table.</span></span>
- <span data-ttu-id="c0475-111">A fejléctáblában szereplő adók nem egyeznek meg a sorokban szereplő adó összegével.</span><span class="sxs-lookup"><span data-stu-id="c0475-111">Taxes on the header table do not match the tax amount on the lines.</span></span> 

<span data-ttu-id="c0475-112">Ha a kimutatásfeladási folyamat feldolgozza az inkonzisztens tranzakciókat, akkor inkonzisztens értékesítési számlák és fizetési naplók keletkeznek, és emiatt a teljes kimutatásfeladási folyamat sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="c0475-112">When inconsistent transactions are picked up by the statement posting process, inconsistent sales invoices and payment journals are created, and the entire statement posting process fails as a result.</span></span> <span data-ttu-id="c0475-113">Ha a kimutatásokat ebből az állapotból szeretné helyreállítani, ahhoz számos tranzakciós táblát érintő, komplex adathelyesbítési művelet szükséges.</span><span class="sxs-lookup"><span data-stu-id="c0475-113">Recovering the statements from such a state involves complex data fixes across multiple transaction tables.</span></span> <span data-ttu-id="c0475-114">A tranzakció konzisztencia-ellenőrzője megelőzi az ehhez hasonló problémák létrejöttét.</span><span class="sxs-lookup"><span data-stu-id="c0475-114">The transaction consistency checker prevents such issues.</span></span>

<span data-ttu-id="c0475-115">Az alábbi ábrán a tranzakció konzisztencia-ellenőrzőjével végrehajtott feladási folyamat látható.</span><span class="sxs-lookup"><span data-stu-id="c0475-115">The following chart illustrates the posting process with the transaction consistency checker.</span></span>

<span data-ttu-id="c0475-116">![Kimutatás feladási folyamata a tranzakció konzisztenciájának ellenőrzőjével](./media/validchecker.png "Kimutatás feladási folyamata a kiskereskedelmi tranzakció konzisztenciájának ellenőrzőjével")</span><span class="sxs-lookup"><span data-stu-id="c0475-116">![Statement posting process with transaction consistency checker](./media/validchecker.png "Statement posting process with retail transaction consistency checker")</span></span>

<span data-ttu-id="c0475-117">Az **Üzleti tranzakciók ellenőrzése** kötegfolyamat ellenőrzi a kereskedelmi tranzakciós táblázatok konzisztenciáját az alábbi esetekben.</span><span class="sxs-lookup"><span data-stu-id="c0475-117">The **Validate store transactions** batch process checks the consistency of the commerce transaction tables for the following scenarios.</span></span>

- <span data-ttu-id="c0475-118">**Vevői számla** – Ellenőrzi, hogy a kereskedelmi tranzakciós táblában szereplő vevői számla létezik a HQ-ban a vevői alapadatok között.</span><span class="sxs-lookup"><span data-stu-id="c0475-118">**Customer account** – Validates that the customer account in the transaction tables exists in the HQ customer master.</span></span>
- <span data-ttu-id="c0475-119">**Sorok száma** – Ellenőrzi, hogy a tranzakciós fejléctáblában rögzített sorok száma megegyezik az értékesítési tranzakciók táblájában található sorok számával.</span><span class="sxs-lookup"><span data-stu-id="c0475-119">**Line count** – Validates that the number of lines, as captured on the transaction header table, matches the number of lines in the sales transaction tables.</span></span>
- <span data-ttu-id="c0475-120">**Az ár tartalmazza az adót** – Ellenőrzi, hogy az **Ár tartalmazza az adót** paraméter konzisztens-e a tranzakció soraiban, és az értékesítési soron szereplő ár egyezik-e az adót tartalmazó ár és az adómentesség konfigurációjával.</span><span class="sxs-lookup"><span data-stu-id="c0475-120">**Price includes tax** – Validates that the **Price includes tax** parameter is consistent across transaction lines and the price on the sales line is in accordance with price includes tax and tax exempt configuration.</span></span>
- <span data-ttu-id="c0475-121">**Kifizetett összeg** – Ellenőrzi, hogy a kifizetési rekordok megegyeznek-e a fejlécben található kifizetett összeggel, miközben figyelembe veszik a főkönyvben szereplő fillérkerekítési konfigurációt.</span><span class="sxs-lookup"><span data-stu-id="c0475-121">**Payment amount** - Validates that the payment records match the payment amount on the header, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="c0475-122">**Bruttó összeg** – Ellenőrzi, hogy a fejlécben szereplő bruttó összeg megfelel-e a sorokban található nettó összegek és az adó összegének összesítésével, miközben figyelembe veszi a főkönyvben szereplő fillérkerekítési konfigurációt is.</span><span class="sxs-lookup"><span data-stu-id="c0475-122">**Gross amount** – Validates that the gross amount on the header is the sum of the net amounts on the lines plus the tax amount, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="c0475-123">**Nettó összeg** – Ellenőrzi, hogy a fejlécben szereplő nettó összeg megfelel-e a sorokban található nettó összegeknek, miközben figyelembe veszi a főkönyvben szereplő fillérkerekítési konfigurációt is.</span><span class="sxs-lookup"><span data-stu-id="c0475-123">**Net amount** – Validates that the net amount on the header is the sum of the net amounts on the lines, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="c0475-124">**Alulfizetés/Túlfizetés** – Ellenőrzi, hogy a fejlécben található bruttó összeg és a kifizetett összeg közti különbség nem haladja meg a maximális alulfizetés/túlfizetés konfigurációját, miközben figyelembe veszi a főkönyvben szereplő fillérkerekítési konfigurációt.</span><span class="sxs-lookup"><span data-stu-id="c0475-124">**Under / Over payment** – Validates that the difference between the gross amount on the header and the payment amount doesn't exceed the maximum underpayment/overpayment configuration, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="c0475-125">**Engedmény összege** – Ellenőrzi, hogy az engedménytáblákban szereplő engedmény összege és a kiskereskedelmi tranzakció sorában szereplő engedmény összege konzisztens-e, és hogy a fejlécben található engedmény összege egyenlő-e a sorok engedményeinek összegével, miközben figyelembe veszi a főkönyvben szereplő fillérkerekítési konfigurációt.</span><span class="sxs-lookup"><span data-stu-id="c0475-125">**Discount amount** – Validates that the discount amount on the discount tables and the discount amount on the transaction line tables are consistent, and that the discount amount on the header is the sum of the discount amounts on the lines, while also factoring in the configuration for penny rounding in General Ledger.</span></span>
- <span data-ttu-id="c0475-126">**Sorengedmény** – Ellenőrzi, hogy a tranzakciós sorban található sorengedmény megegyezik-e az adott tranzakciós sorhoz kapcsolódó engedménytábla összes sorának összegével.</span><span class="sxs-lookup"><span data-stu-id="c0475-126">**Line discount** – Validates that the line discount on the transaction line is the sum of all the lines in the discount table that corresponds to the transaction line.</span></span>
- <span data-ttu-id="c0475-127">**Ajándékutalvány-cikk** – A Commerce alkalmazás nem támogatja az ajándékutalvány-cikkek visszaküldését.</span><span class="sxs-lookup"><span data-stu-id="c0475-127">**Gift card item** – Commerce doesn't support the return of gift card items.</span></span> <span data-ttu-id="c0475-128">Azonban az ajándékutalvány egyenlegét ki lehet fizetni készpénzben. Ha az ajándékutalványcikket visszárusorként dolgozzák fel készpénzes kifizetési sor helyett, akkor a kimutatás feladási folyamata sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="c0475-128">However, the balance on a gift card can be cashed out. Any gift card item that is processed as a return line instead of a cash-out line fails the statement posting process.</span></span> <span data-ttu-id="c0475-129">Az ajándékutalvány-cikkek ellenőrzési folyamata segítségével garantálható, hogy a tranzakciós táblákban szereplő, ajándékutalvány-cikkek visszaküldésére vonatkozó sorok ajándékutalvány készpénzes kifizetési sorok legyenek.</span><span class="sxs-lookup"><span data-stu-id="c0475-129">The validation process for gift card items helps guarantee that the only return gift card line items on the transaction tables are gift card cash-out lines.</span></span>
- <span data-ttu-id="c0475-130">**Negatív ár** – Ellenőrzi, hogy nincsenek negatív árt tartalmazó tranzakciós sorok.</span><span class="sxs-lookup"><span data-stu-id="c0475-130">**Negative price** – Validates that there are no negative price transaction lines.</span></span>
- <span data-ttu-id="c0475-131">**Cikk és változat** – Ellenőrzi, hogy a tranzakciós sorban szereplő cikkek és változatok léteznek a cikk és a változat törzsadatfájljában.</span><span class="sxs-lookup"><span data-stu-id="c0475-131">**Item & Variant** – Validates that items and variants on the transaction lines exist in the item and variant master file.</span></span>
- <span data-ttu-id="c0475-132">**Adó összege** – Ellenőrzi, hogy az adórekordok megegyeznek-e a sorokban szereplő adók összegével.</span><span class="sxs-lookup"><span data-stu-id="c0475-132">**Tax amount** - Validates that tax records match the tax amounts on the lines.</span></span>
- <span data-ttu-id="c0475-133">**Sorozatszám** – Ellenőrzi, hogy azon cikkekhez tartozó tranzakciósorokban szerepeljen a sorozatszám, amelyek ellenőrzése sorozatszámmal történik.</span><span class="sxs-lookup"><span data-stu-id="c0475-133">**Serial number** - Validates that the serial number is present in the transaction lines for items that are controlled by serial number.</span></span>
- <span data-ttu-id="c0475-134">**Előjel** – Ellenőrzi, hogy a mennyiség és a nettó összeg előjele megegyezik-e az összes tranzakciós sorban.</span><span class="sxs-lookup"><span data-stu-id="c0475-134">**Sign** - Validates that the sign on the quantity and the net amount are the same in all the transaction lines.</span></span>
- <span data-ttu-id="c0475-135">**Üzleti dátum** – Ellenőrzi, hogy a tranzakciókhoz tartozó összes üzleti dátum pénzügyi időszaka nyitott-e.</span><span class="sxs-lookup"><span data-stu-id="c0475-135">**Business date** - Validates that the financial periods for all the business dates for the transactions are open.</span></span>
- <span data-ttu-id="c0475-136">**Költségek** – ellenőrzi, hogy a fejléc és a sor költségösszege megfelel-e az adót tartalmazó ár és az adómentesség konfigurációjának.</span><span class="sxs-lookup"><span data-stu-id="c0475-136">**Charges** - Validates that the header and line charge amount is in accordance with price, including tax and tax exempt configuration.</span></span>

## <a name="set-up-the-consistency-checker"></a><span data-ttu-id="c0475-137">Konzisztencia-ellenőrző beállítása</span><span class="sxs-lookup"><span data-stu-id="c0475-137">Set up the consistency checker</span></span>

<span data-ttu-id="c0475-138">Konfigurálja az „Üzleti tranzakciók ellenőrzése” kötegfolyamatot időszakos futásokhoz a **Retail és Commerce \> Retail és Commerce IT \> Pénztárfeladás** menüpontban.</span><span class="sxs-lookup"><span data-stu-id="c0475-138">Configure the "Validate store transactions" batch process, at **Retail and Commerce \> Retail and Commerce IT \> POS posting**, for periodic runs.</span></span> <span data-ttu-id="c0475-139">A kötegelt feladat az üzlet szervezeti hierarchiája alapján ütemezhető, hasonlóan a „Kimutatások kötegelt kiszámítása” és a „Kimutatások kötegelt feladása” folyamatok beállításához.</span><span class="sxs-lookup"><span data-stu-id="c0475-139">The batch job can be scheduled based on store organization hierarchy, similar to how the "Calculate statement in batch" and "Post statement in batch" processes are set up.</span></span> <span data-ttu-id="c0475-140">Javasoljuk, hogy úgy konfigurálja ezt a kötegfolyamatot, hogy az naponta többször fusson, és úgy ütemezze, hogy minden P-feladat végrehajtása végén fusson.</span><span class="sxs-lookup"><span data-stu-id="c0475-140">We recommend that you configure this batch process to run multiple times in a day and schedule it so that it runs at the end of every P-job execution.</span></span>

## <a name="results-of-validation-process"></a><span data-ttu-id="c0475-141">Ellenőrzési folyamat eredményei</span><span class="sxs-lookup"><span data-stu-id="c0475-141">Results of validation process</span></span>

<span data-ttu-id="c0475-142">A kötegfolyamat által végzett ellenőrzés eredményeit a rendszer felcímkézi a megfelelő tranzakcióra.</span><span class="sxs-lookup"><span data-stu-id="c0475-142">The results of the validation check by the batch process are tagged on the appropriate transaction.</span></span> <span data-ttu-id="c0475-143">A tranzakció rekordján található **Ellenőrzés állapota** mező vagy **Sikeres** vagy **Hiba** értékre van beállítva, és az utolsó ellenőrzés futásának dátuma a **Legutóbbi ellenőrzés időpontja** mezőben látható.</span><span class="sxs-lookup"><span data-stu-id="c0475-143">The **Validation status** field on the transaction record is either set to **Successful** or **Error**, and the date of the last validation run appears on the **Last validation time** field.</span></span>

<span data-ttu-id="c0475-144">Ha további, ellenőrzési hibához kapcsolódó leíróbb jellegű hibaüzenetet szeretne megtekinteni, válassza ki a megfelelő üzlet tranzakciós rekordját, majd kattintson az **Ellenőrzési hibák** gombra.</span><span class="sxs-lookup"><span data-stu-id="c0475-144">To view more descriptive error text relating to a validation failure, select the relevant store transaction record and click the **Validation errors** button.</span></span>

<span data-ttu-id="c0475-145">Azokat a tranzakciókat, amelyek nem feleltek meg az ellenőrzésen, valamint a még nem ellenőrzött tranzakciókat a rendszer nem szerepelteti a kimutatásokban.</span><span class="sxs-lookup"><span data-stu-id="c0475-145">Transactions that fail the validation check and transactions that have not yet been validated will not be pulled into statements.</span></span> <span data-ttu-id="c0475-146">A „Kimutatás számítása” folyamat során a felhasználók értesítést kapnak, ha olyan tranzakciók találhatók, amelyeknek szerepelniük kellett volna a kimutatásban, de mégsem szerepeltek.</span><span class="sxs-lookup"><span data-stu-id="c0475-146">During the "Calculate statement" process, users will be notified if there are transactions that could have been included in the statement but weren't.</span></span>

<span data-ttu-id="c0475-147">Ha ellenőrzési probléma merül fel, a hiba javítása csak a Microsoft ügyfélszolgálata segítségével lehetséges.</span><span class="sxs-lookup"><span data-stu-id="c0475-147">If a validation error is found, the only way to fix the error is to contact Microsoft Support.</span></span> <span data-ttu-id="c0475-148">A jövőbeli kiadások egyikében hozzáadásra kerül majd a lehetőség, amely segítségével a felhasználók maguk is kijavíthatják a rekordokat a felhasználói felületen, amelyek sikertelenek voltak.</span><span class="sxs-lookup"><span data-stu-id="c0475-148">In a future release, capability will be added so that users can fix the records that failed through the user interface.</span></span> <span data-ttu-id="c0475-149">A később hozzáférhetővé váló naplózási és auditálási lehetőségek segítségével a módosítások előzményei is nyomon követhetők lesznek.</span><span class="sxs-lookup"><span data-stu-id="c0475-149">Logging and auditing capabilities will also be made available to trace the history of the modifications.</span></span>

> [!NOTE]
> <span data-ttu-id="c0475-150">A jövőbeli kiadásokban olyan további ellenőrzési szabályokat adunk hozzá, amellyel még több eset ellenőrzése válik lehetővé.</span><span class="sxs-lookup"><span data-stu-id="c0475-150">Additional validation rules to support more scenarios will be added in a future release.</span></span>
