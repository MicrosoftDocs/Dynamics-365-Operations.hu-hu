---
title: Kiskereskedelmi csatornák készletelérhetőségének számítása
description: Ez a témakör azt mutatja be, hogy milyen lehetőségek érhetők el az üzlet és az online csatornák aktuális készletének megjelenítéséhez.
author: hhainesms
manager: annbe
ms.date: 08/13/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.scope: Retail, Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhainesms
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: 6d25a426268ebfb6990eb3dadb1ad451f86f59a1
ms.sourcegitcommit: 65a8681c46a1d99e7ff712094f472d5612455ff0
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 08/13/2020
ms.locfileid: "3694922"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="4d387-103">Kiskereskedelmi csatornák készletelérhetőségének számítása</span><span class="sxs-lookup"><span data-stu-id="4d387-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="4d387-104">Ez a témakör azt mutatja be, hogyan használhatja a Microsoft Dynamics 365 Commerce szolgáltatást a termékek becsült aktuális elérhetőségét az online és üzleti csatornán.</span><span class="sxs-lookup"><span data-stu-id="4d387-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-calculation"></a><span data-ttu-id="4d387-105">Számítás pontossága</span><span class="sxs-lookup"><span data-stu-id="4d387-105">Accuracy of calculation</span></span>

<span data-ttu-id="4d387-106">A Commerce több kiszolgálót és adatbázist használ a méretezhetőség és a teljesítmény biztosítására.</span><span class="sxs-lookup"><span data-stu-id="4d387-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="4d387-107">Ezért fontos, hogy megértse, hogy a pénztár (POS) alkalmazáson keresztül biztosított elérhető készletértékek, az e-kereskedelmi készletelérhetőségi alkalmazásfejlesztői felületek (API-k) és a Kereskedelmi központ aktuális készletre vonatkozó oldalai valós időben nem mindig 100%-os pontosságúak.</span><span class="sxs-lookup"><span data-stu-id="4d387-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-Commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce Headquarters might not be 100-percent accurate in real time.</span></span> <span data-ttu-id="4d387-108">Ha a termékekhez az online vagy áruházi csatornában létrehozott tranzakciókat még nem szinkronizálták a Kereskedelmi központ kiszolgálójával és adatbázisával, a Kereskedelmi központ aktuális készletre vonatkozó oldalai lehet, hogy nem pontos valós idejű készletértékeket jelenít meg az adott termékekhez.</span><span class="sxs-lookup"><span data-stu-id="4d387-108">If transactions that are created for products in the online or store channel haven't yet been synced to the Commerce Headquarters server and database, the on-hand inventory pages in Commerce Headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="4d387-109">Ha úgy konfigurálta a vállalatot, hogy a Kereskedelmi központ vagy más integrált alkalmazások felhasználói áruházi vagy online raktárban található készletet értékesíthetnek, fogadhatnak, visszaküldhetnek vagy bármilyen módon módosíthatnak, a pénztár vagy az online csatorna lehet, hogy nem rendelkezik minden adattal, ami a cikkek pontos valós idejű készlet megjelenítéséhez szükséges.</span><span class="sxs-lookup"><span data-stu-id="4d387-109">Conversely, if you configured your company so that users in Commerce Headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show an accurate real-time on-hand value for items.</span></span>

<span data-ttu-id="4d387-110">Ez a témakör azokat az adatszinkronizálási folyamatokat mutatja be, amelyek rendszeres futtatásával korlátozható az adatok késleltetése az alkalmazások vagy csatornák között.</span><span class="sxs-lookup"><span data-stu-id="4d387-110">This topic explains the data synchronization processes that can be run frequently to help limit the latency of data between applications or channels.</span></span> <span data-ttu-id="4d387-111">Fontos azonban, hogy megértse, hogy az üzemeltetési nap során megadott összes rendelkezésre álló adatot becsült értéknek tekinti a rendszer.</span><span class="sxs-lookup"><span data-stu-id="4d387-111">However, it's critical that you understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="4d387-112">Ezért ha megpróbálja összehasonlítani azokat az aktuális készlet-adatokat, amelyeket az alkalmazás tényleges fizikai készletként ad meg a polcokon, vagy ha megpróbálja összehasonlítani a pénztárban rendszernél megjelenített aktuális értékeket azon aktuális adatokkal, amelyek ugyanarra a raktárra vonatkoznak a Kereskedelmi központban, az értékek eltérhetnek.</span><span class="sxs-lookup"><span data-stu-id="4d387-112">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in Commerce Headquarters, the values might differ.</span></span> <span data-ttu-id="4d387-113">Az üzemeltetési nap során ez a különbség várható, és nem tekinthető problémának.</span><span class="sxs-lookup"><span data-stu-id="4d387-113">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="4d387-114">Ha ellenőrizni szeretné az adatokat, és biztosítani szeretné, hogy a készletelérhetőségi API-kban és a Kereskedelmi központban megadott értékek megegyeznek az áruház vagy raktár polcain található tényleges fizikai egységekkel, akkor ezt akkor végezheti el leghatékonyabban, amikor az adott napon befejeződtek a csatornaműveletek, és az összes tranzakció megfelelően szinkronizálódott a Kereskedelmi központ és a csatorna között.</span><span class="sxs-lookup"><span data-stu-id="4d387-114">If you want to audit data and make sure that the values that are provided in the inventory availability APIs and Commerce Headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between Commerce Headquarters and the channel.</span></span>

## <a name="use-inventory-lookup-apis-for-e-commerce-inventory-availability-requests"></a><span data-ttu-id="4d387-115">Készletkeresési API-k használata e-kereskedelmi készletelérhetőséggel kapcsolatos kérésekhez</span><span class="sxs-lookup"><span data-stu-id="4d387-115">Use inventory lookup APIs for e-Commerce inventory availability requests</span></span>

<span data-ttu-id="4d387-116">A következő API-k használhatók a termék készletelérhetőségének megjelenítésére, amikor a vevők egy e-kereskedelmi webhelyen vásárolnak.</span><span class="sxs-lookup"><span data-stu-id="4d387-116">You can use the following APIs to show inventory availability for a product when your customers are shopping on an e-Commerce site.</span></span>

- <span data-ttu-id="4d387-117">**GetEstimatedAvailability** – Használja ezt az API-t, hogy lekérhesse a készlet rendelkezésre állását egy cikkre az eCommerce csatorna raktárában vagy raktáraiban, amik össze vannak kapcsolva az e-Commerce csatorna teljesítése szintjével.</span><span class="sxs-lookup"><span data-stu-id="4d387-117">**GetEstimatedAvailability** – Use this API to get inventory availability for the item in the e-Commerce channel warehouse or all warehouses that are linked to the configuration of the fulfillment group for the e-Commerce channel.</span></span> <span data-ttu-id="4d387-118">Ez az API egy adott keresési területen vagy sugárban található raktárakban is használható, a hosszúsági és a szélességi adatok alapján.</span><span class="sxs-lookup"><span data-stu-id="4d387-118">This API can also be used for warehouses in a specific search area or radius, based on longitude and latitude data.</span></span>
- <span data-ttu-id="4d387-119">**GetEstimatedProductWarehouseAvailability** – ezt az API-t használva egy adott raktárból származó cikk készletét kérheti le.</span><span class="sxs-lookup"><span data-stu-id="4d387-119">**GetEstimatedProductWarehouseAvailability** – Use this API to request inventory for an item from a specific warehouse.</span></span> <span data-ttu-id="4d387-120">Például használhatja a készletelérhetőség megjelenítésére olyan esetekben, amelyben rendelésfelvétel szerepel.</span><span class="sxs-lookup"><span data-stu-id="4d387-120">For example, you can use it to show inventory availability in scenarios that involve order pickup.</span></span>

> [!NOTE]
> <span data-ttu-id="4d387-121">Ezek az API-k helyettesítik a **GetProductAvailabilities** és **GetAvailableInventoryNearby** API-kat a Dynamics 365 Retail 10.0.7-es és korábbi verzióiban.</span><span class="sxs-lookup"><span data-stu-id="4d387-121">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Dynamics 365 Retail version 10.0.7 and earlier.</span></span>

<span data-ttu-id="4d387-122">Mindkét API az adatokat a Commerce kiszolgálóról kéri le, és becslést nyújt egy termék vagy termékváltozat és egy raktár egyedi kombinációjára vonatkozó tényleges készletről.</span><span class="sxs-lookup"><span data-stu-id="4d387-122">Both APIs fetch data from the Commerce server and provide an estimate of on-hand inventory for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="4d387-123">Bár más, a Commerce-kiszolgálón elérhető API-k közvetlenül a Kereskedelmi központból is lekérhetik a termékek tényleges készletmennyiségeit, nem javasoljuk ezek e-kereskedelmi környezetben való használatát a lehetséges teljesítményproblémák miatt, és a gyakori kérések Kereskedelmi központ-kiszolgálókra tett kapcsolt hatása miatt.</span><span class="sxs-lookup"><span data-stu-id="4d387-123">Although other APIs that are available on the Commerce server can go directly to Commerce Headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-Commerce environment because of potential performance issues and the related impact that these frequent requests can have on your Commerce Headquarters servers.</span></span> <span data-ttu-id="4d387-124">Ezenkívül ha a tényleges készletet a Commerce kiszolgálón keresztül számítják, akkor a számítások nagyobb valószínűséggel tartalmaznak olyan készletet, amelyeket közelmúltbéli e-kereskedelmi tranzakciókban értékesítettek, és még nem szinkronizálódtak a Kereskedelmi központtal.</span><span class="sxs-lookup"><span data-stu-id="4d387-124">Additionally, if the on-hand inventory is calculated through the Commerce server, the calculation is more likely to include inventory that was sold in recent e-Commerce transactions that haven't yet been synced to Commerce Headquarters.</span></span> <span data-ttu-id="4d387-125">Bár előfordulhat, hogy a Kereskedelmi központ nem rendelkezik a tranzakciókkal kapcsolatos adatokkal, a Commerce kiszolgáló és a csatorna adatbázisa igen.</span><span class="sxs-lookup"><span data-stu-id="4d387-125">Although Commerce Headquarters might not have information about these transactions, the Commerce server and channel database have the data.</span></span> <span data-ttu-id="4d387-126">Emiatt az adatokat figyelembe veszik, és segítséget nyújthatnak a termék rendelkezésre álló készletének pontosabb becsléséhez.</span><span class="sxs-lookup"><span data-stu-id="4d387-126">Therefore, the data will be factored in and can help provide a more accurate estimate of a product's available inventory.</span></span>

### <a name="get-started-with-e-commerce-calculated-inventory-availability"></a><span data-ttu-id="4d387-127">Az e-kereskedelmi számított készlet elérhetőségének megismerése</span><span class="sxs-lookup"><span data-stu-id="4d387-127">Get started with e-Commerce calculated inventory availability</span></span>

<span data-ttu-id="4d387-128">Mielőtt használja a korábban említett két API-t, engedélyeznie kell az **Optimalizált termékelérhetőségi számítás** funkciót a **Funkciókezelés** munkaterület segítségével, a Commerce Headquartersben.</span><span class="sxs-lookup"><span data-stu-id="4d387-128">Before you use the two APIs that were mentioned earlier, you must enable the **Optimized product availability calculation** feature through the **Feature management** workspace in Commerce Headquarters.</span></span>

<span data-ttu-id="4d387-129">Mielőtt az API-k kiszámolhatnák egy cikk készletelérhetőségének legjobb becslését, először fel kell dolgozni a Kereskedelmi központ készletelérhetőségre vonatkozó időszakos pillanatképét, és elküldeni az e-kereskedelem Commerce Scale Unit modulja által használt csatorna-adatbázishoz.</span><span class="sxs-lookup"><span data-stu-id="4d387-129">Before the APIs can calculate the best estimate of inventory availability for an item, a periodic snapshot of inventory availability from Commerce Headquarters must be processed and sent to the channel database that the e-Commerce Commerce Scale Unit uses.</span></span> <span data-ttu-id="4d387-130">A pillanatkép a Kereskedelmi központ azon adatait jeleníti meg, amelyek a termék vagy a termék változatának és a raktárnak egy meghatározott kombinációját jelentik.</span><span class="sxs-lookup"><span data-stu-id="4d387-130">The snapshot represents the information that Commerce Headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="4d387-131">Itt szerepelhetnek készletmódosítások vagy -mozgatások, amelyeket készletbevételezések, szállítmányok vagy más olyan folyamatok okoztak, amelyeket a Kereskedelmi központban hajtottak végre, és az e-kereskedelmi csatorna csak a szinkronizálási folyamat révén tud róla.</span><span class="sxs-lookup"><span data-stu-id="4d387-131">It can include inventory adjustments or movements that are caused by inventory receipts, or by shipments or other processes that are performed in Commerce Headquarters and that the e-Commerce channel has information about only because of the synchronization process.</span></span>

<span data-ttu-id="4d387-132">A **Termékelérhetőség** feladat által létrehozott adatbázis-pillanatkép csak az olyan készlettranzakciókat számítja ki, amelyeket a pillanatkép készítésekor a Kereskedelmi központban feldolgoztak és feladtak.</span><span class="sxs-lookup"><span data-stu-id="4d387-132">The database snapshot that the **Product availability** job creates calculates only the inventory transactions that were processed and posted in Commerce Headquarters at the time when the snapshot was taken.</span></span> <span data-ttu-id="4d387-133">Ha a készletet egy üzletraktár egyik termékeként adták el készpénzzel fizetett, azonnal átvett vagy aszinkron ügyfélmegrendelési értékesítés során a pénztáralkalmazásban, a Kereskedelmi központ nem rendelkezik majd azonnal az értékesítés kapcsolódó készletprobléma-tranzakciójáról.</span><span class="sxs-lookup"><span data-stu-id="4d387-133">If inventory was sold for a product in a store warehouse through a cash-and-carry or asynchronous customer order sale in the POS application, Commerce Headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="4d387-134">Az ilyen típusú üzleti értékesítések során eladott készletekkel kapcsolatban csak azután kap információt, miután a P-feladat feltöltötte a kapcsolódó tranzakciót az üzlet csatorna-adatbázisából a Kereskedelmi központba, és a kapcsolódó értékesítési rendelés létrejön kimutatásfeladás vagy folyamatos apránkénti közzétételi folyamatok során.</span><span class="sxs-lookup"><span data-stu-id="4d387-134">It will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into Commerce Headquarters and the related sales order is created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="4d387-135">A rendelésnek a Kereskedelmi központban történő létrehozási folyamata létrehozza a kapcsolódó készlettranzakciókat.</span><span class="sxs-lookup"><span data-stu-id="4d387-135">The process of creating the order in Commerce Headquarters creates the related inventory transactions.</span></span> <span data-ttu-id="4d387-136">Az e-kereskedelmi csatorna megrendelései esetén a Kereskedelmi központ csak azután rendelkezik információkkal a készlettranzakciókról, miután a tranzakciókat elküldték a Kereskedelmi központba a P-feladaton keresztül, és a rendelések szinkronizálási folyamata befejeződött.</span><span class="sxs-lookup"><span data-stu-id="4d387-136">For e-Commerce channel orders, Commerce Headquarters has information about the inventory transactions only after the transactions are sent to Commerce Headquarters through the P-job and the order synchronization process is completed.</span></span> <span data-ttu-id="4d387-137">Ezért fontos, hogy megértse, hogy a **Termékelérhetőség** feladatban megadott készlet-pillanatkép értéke nem biztos, hogy 100%-ban pontos valós időben a felosztott kiszolgálókon történő folyamatos értékesítésfeldolgozás miatt.</span><span class="sxs-lookup"><span data-stu-id="4d387-137">Therefore, it's important that you understand that the inventory snapshot value that is provided in the **Product availability** job might not be 100-percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

<span data-ttu-id="4d387-138">Ha a Kereskedelmi központ alkalmazásban szeretné pillanatképet készíteni a készletről, hajtsa végre az alábbi lépéseket.</span><span class="sxs-lookup"><span data-stu-id="4d387-138">To take a snapshot of inventory in Commerce Headquarters, follow these steps.</span></span>

1. <span data-ttu-id="4d387-139">Ugorjon a **Kiskereskedelem és kereskedelem \> Kiskereskedelem és kereskedelem IT \> Termékek és készlet \> Termékelérhetőség** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="4d387-139">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="4d387-140">Válassza az **OK** gombot a **Termékelérhetőség** feladat futtatásához.</span><span class="sxs-lookup"><span data-stu-id="4d387-140">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="4d387-141">Ez a feladat ütemezhető úgy is, hogy egy kötegben fusson.</span><span class="sxs-lookup"><span data-stu-id="4d387-141">You can also schedule this job so that it's run in a batch.</span></span>

<span data-ttu-id="4d387-142">A **Termékelérhetőség** feladat futásának befejeződése után a rögzített adatokat közzé kell tenni az e-kereskedelmi csatorna-adatbázisokba, hogy a legújabb Kereskedelmi központ-készletpillanatképet figyelembe vehessék a becsült tényleges készlet számításakor.</span><span class="sxs-lookup"><span data-stu-id="4d387-142">After the **Product availability** job has finished running, the data that was captured must be pushed to the e-Commerce channel databases, so that the latest Commerce Headquarters inventory snapshot can be considered in the calculation of estimated on-hand inventory.</span></span>

1. <span data-ttu-id="4d387-143">Ugorjon a **Kiskereskedelem és kereskedelem \> Kiskereskedelem és kereskedelem informatika \> Elosztási ütemezés** pontra.</span><span class="sxs-lookup"><span data-stu-id="4d387-143">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="4d387-144">Futtassa az **1130** (**Termékelérhetőség**) feladatot a pillanatkép-adatok szinkronizálásához, amelyeket a **Termékelérhetőség** feladat hozott létre a Kereskedelmi központból a csatorna-adatbázisaiba.</span><span class="sxs-lookup"><span data-stu-id="4d387-144">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job created from Commerce Headquarters to your channel databases.</span></span>

<span data-ttu-id="4d387-145">Amikor a készlet rendelkezésre állása a **GetEstimatedAvailabilty** vagy a **ProductWarehouseInventoryAvailabilities** API-kból lekérhető, egy számítás kerül futtatásra, hogy megpróbálja a legpontosabban megbecsülni a termékből rendelkezésre álló készletet.</span><span class="sxs-lookup"><span data-stu-id="4d387-145">When inventory availability is requested from the **GetEstimatedAvailability** or **GetEstimatedProductWarehouseAvailability** API, a calculation is run to try to get the best possible estimate of inventory for the product.</span></span> <span data-ttu-id="4d387-146">A számítás bármely olyan e-kereskedelmi vevői rendelésre hivatkozik, amelyek a csatorna-adatbázisban találhatók, de nem szerepelnek az 1130 feladat által biztosított pillanatképadatok között.</span><span class="sxs-lookup"><span data-stu-id="4d387-146">The calculation references any e-Commerce customer orders that are in the channel database but that weren't included in the snapshot data that the 1130 job provided.</span></span> <span data-ttu-id="4d387-147">Ezt a logikát követi a rendszer a legutóbbi feldolgozott készlettranzakció Kereskedelmi központból való nyomon követésével, és a csatorna-adatbázis tranzakciójával való összehasonlításával.</span><span class="sxs-lookup"><span data-stu-id="4d387-147">This logic is performed by tracking the last processed inventory transaction from Commerce Headquarters and comparing it with the transactions in the channel database.</span></span> <span data-ttu-id="4d387-148">Alapértéket ad a csatornaoldali számítási logikához, így a további készletmozgásokat, amelyek az e-kereskedelmi csatorna-adatábis vevői rendelkéseivel kapcsolatos értékesítési tranzakcióknál történtek, a rendszer figyelembe veszi az API által biztosított becsült készletértékben.</span><span class="sxs-lookup"><span data-stu-id="4d387-148">It provides a baseline for the channel-side calculation logic, so that the additional inventory movements that occurred for customer order sales transactions in the e-Commerce channel database can be factored into the estimated inventory value that the API provides.</span></span>

<span data-ttu-id="4d387-149">A csatornaoldali számítási logika becsült ténylegesen elérhető értéket ad vissza, valamint egy teljesen elérhető értéket a kért termékre és raktárra vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="4d387-149">The channel-side calculation logic returns an estimated physically available value and a total available value for the requested product and warehouse.</span></span> <span data-ttu-id="4d387-150">Az értékek kívánság szerint megjelenhetnek az e-kereskedelmi webhelyen, vagy felhasználhatók az e-kereskedelmi webhely egyéb üzleti logikájának kiváltására.</span><span class="sxs-lookup"><span data-stu-id="4d387-150">The values can be shown on your e-Commerce site if you want, or they can be used to trigger other business logic on your e-Commerce site.</span></span> <span data-ttu-id="4d387-151">Megjelenítheti például a "elfogyott" üzenetet, nem pedig a tényleges aktuális készletet, amelyet az API átadott.</span><span class="sxs-lookup"><span data-stu-id="4d387-151">For example, you can show an "out of stock" message instead of the actual on-hand quantity that the API passed.</span></span>

<span data-ttu-id="4d387-152">A csatornaoldali e-kereskedelmi API-k által a becsült készletértékhez használt számítási logika a készlet értékelésére csak az olyan vevői rendelések alapján képes, amelyeket létrehoztak a csatorna-adatbázisban, de még nem szinkronizálták és adták fel a Kereskedelmi központba.</span><span class="sxs-lookup"><span data-stu-id="4d387-152">The calculation logic that the channel-side e-Commerce APIs use for the estimated inventory value can evaluate inventory based only on customer orders that have been created in the channel database but that haven't yet been synced and posted in Commerce Headquarters.</span></span> <span data-ttu-id="4d387-153">Ha a csatorna-adatbázis készpénzzel fizetett és azonnal átvett értékesítésre vonatkozóan is tartalmaz tranzakciós adatokat az üzletspecifikus raktárnál, a készpénzzel fizetett és azonnal átvett értékesítéseket a rendszer nem számítja bele a csatornaoldali e-kereskedelmi számításnál ezeknél a raktáraknál.</span><span class="sxs-lookup"><span data-stu-id="4d387-153">If your channel database also contains transactional data for cash-and-carry sales for store-specific warehouses, the cash-and-carry sales aren't factored into the channel-side e-Commerce calculation for those warehouses.</span></span>

## <a name="configure-the-inventory-lookup-operation-in-the-pos-channel"></a><span data-ttu-id="4d387-154">Készletkeresési művelet konfigurálása a pénztárcsatornában</span><span class="sxs-lookup"><span data-stu-id="4d387-154">Configure the inventory lookup operation in the POS channel</span></span>

<span data-ttu-id="4d387-155">A Retail 10.0.9-es és korábbi verzióiban a pénztár **Készletkeresés** művelete valós idejű Kereskedelmi központba irányuló szolgáltatáshívást használt a kiválasztott termék készletinformációinak lekéréséhez, mind a felhasználó aktuális üzletéhez, mint bármely más, a teljesítési csoporthoz az üzlet csatornakonfigurációjának részeként konfigurált üzletekhez.</span><span class="sxs-lookup"><span data-stu-id="4d387-155">In Retail version 10.0.9 and earlier, the **Inventory lookup** operation from POS used a real-time service call to Commerce Headquarters to get inventory information for the selected product, for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="4d387-156">A Commerce 10.0.10 és újabb verzióiban kikapcsolhatja a Kereskedelmi központba irányuló valós idejű szolgáltatáshívásokat.</span><span class="sxs-lookup"><span data-stu-id="4d387-156">In Commerce version 10.0.10 and later, you can turn off real-time service calls to Commerce Headquarters.</span></span> <span data-ttu-id="4d387-157">Ehelyett használhatja a Commerce kiszolgálón a csatornaoldali számítást a tényleges készlet megállapításához, amely ténylegesen elérhető az üzlet és más helyek számára, amelyeket meghatároztak a teljesítési csoportban.</span><span class="sxs-lookup"><span data-stu-id="4d387-157">Instead, you can use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="4d387-158">Ez a csatorna által számított készletkonfiguráció olyan helyeknél is hasznos, ahol az internetkapcsolat nem megbízható, mert nem kell online lennie a készletkeresések fogadásához a Kereskedelmi központból.</span><span class="sxs-lookup"><span data-stu-id="4d387-158">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups from Commerce Headquarters.</span></span>

<span data-ttu-id="4d387-159">Amikor a csatornaoldali számítást helyesen konfigurálták és kezelték, megbízhatóbb becslést biztosíthat az aktuális üzletkészletről, mivel a Kereskedelmi csatorna-adatbázisban található tranzakciós adatokat használ, amelyről a Kereskedelmi központ még lehet, hogy nem tud.</span><span class="sxs-lookup"><span data-stu-id="4d387-159">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory, because it uses the transactional data that is in the Commerce channel database but that Commerce Headquarters might not yet have information about.</span></span> <span data-ttu-id="4d387-160">Ha például a pénztár készletkereséseire vonatkozó meglévő valós idejű szolgáltatáshívást használja, a Kereskedelmi központ valószínűleg még nem rendelkezik az információval a termékkel éppen történt készpénzzel fizetett és azonnal átvett értékesítésről.</span><span class="sxs-lookup"><span data-stu-id="4d387-160">For example, if you use the existing real-time service call for inventory lookups in POS, Commerce Headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="4d387-161">Így a Kereskedelmi központ által az adott termékre vonatkozóan visszadatott tényleges készlet értéke valószínűleg meghaladja az üzlet aktuális tényleges készletét egy egységgel.</span><span class="sxs-lookup"><span data-stu-id="4d387-161">Therefore, the on-hand inventory value that Commerce Headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="4d387-162">Ha viszont a csatornaoldali számítást használja, akkor a készpénzzel fizetett és azonnal átvett értékesítést a rendszer beleszámítja a számításba, és levonja a megjelenő tényleges értékből.</span><span class="sxs-lookup"><span data-stu-id="4d387-162">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="4d387-163">Annak ellenére, hogy a csatornaoldali számítás és a valós idejű szolgáltatáshívások által biztosított értékek is csak a tényleges készlet becslését jelentik, a csatornaoldali számítás által adott érték nagyobb valószínűséggel pontos az aktuális üzletre nézve.</span><span class="sxs-lookup"><span data-stu-id="4d387-163">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

### <a name="get-started-with-pos-channel-side-calculated-inventory-availability"></a><span data-ttu-id="4d387-164">A pénztár csatornaoldali számított készlet elérhetőségének megismerése</span><span class="sxs-lookup"><span data-stu-id="4d387-164">Get started with POS channel-side calculated inventory availability</span></span>

<span data-ttu-id="4d387-165">Hogy használhassa a  csatornaoldali számítási logikát és kikapcsolhassa valós idejű szolgáltatáshívásokat készletkeresésekhez a POS alkalmazásból, először engedélyeznie kell az **Optimalizált termékelérhetőségi számítás** funkciót a **Funkciókezelés** munkaterületen a Commerce Headquartersben.</span><span class="sxs-lookup"><span data-stu-id="4d387-165">To use the channel-side calculation logic and turn off real-time service calls for inventory lookups from the POS application, you must first enable the **Optimized product availability calculation** feature through the **Feature management** workspace in Commerce Headquarters.</span></span> <span data-ttu-id="4d387-166">A funkció engedélyezésén kívül módosítania kell a **funkció profilját**.</span><span class="sxs-lookup"><span data-stu-id="4d387-166">In addition to enabling the feature, you must make changes to the **Functionality profile**.</span></span>

<span data-ttu-id="4d387-167">A **Funkcióprofil** módosításához az alábbi lépéseket hajtsa végre:</span><span class="sxs-lookup"><span data-stu-id="4d387-167">To change the **Functionality profile**, follow these steps:</span></span>

1. <span data-ttu-id="4d387-168">Ugorjon a következő elemre: **Retail és Commerce \>  Csatorna beállítása \> Pénztárbeállítás \>  Pénztárprofilok \> Funkcióprofilok**.</span><span class="sxs-lookup"><span data-stu-id="4d387-168">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="4d387-169">Válasszon funkcióprofilt.</span><span class="sxs-lookup"><span data-stu-id="4d387-169">Select a functionality profile.</span></span>
1. <span data-ttu-id="4d387-170">A **Funkciók** gyorslap **Készletelérhetőségi számítás** szakaszában módpsítsa a **Készletelérhetőségi számítás módja** mező értékét **Valós idejű szolgáltatásról** **Csatornára**.</span><span class="sxs-lookup"><span data-stu-id="4d387-170">On the **Functions** FastTab, in the **Invent availability calculation** section, change the value of the **Invent availability calculation mode** field from **Real time service** to **Channel**.</span></span> <span data-ttu-id="4d387-171">Alapértelmezés szerint az összes funkcióprofil valós idejű szolgáltatási hívásokat használ.</span><span class="sxs-lookup"><span data-stu-id="4d387-171">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="4d387-172">Ennek megfelelően módosítania kell ennek a mezőnek az értékét, ha csatornaoldali számítási logikát szeretne használni.</span><span class="sxs-lookup"><span data-stu-id="4d387-172">Therefore, you must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="4d387-173">A módosítás hatással van minden olyan kiskereskedelmi üzletre, amely a kiválasztott funkcióprofilhoz van társítva.</span><span class="sxs-lookup"><span data-stu-id="4d387-173">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="4d387-174">Ezután a következő lépések végrehajtásával szinkronizálni kell a csatornán végzett módosításokat az elosztási ütemezési folyamaton keresztül:</span><span class="sxs-lookup"><span data-stu-id="4d387-174">You must then sync the changes to the channel through the distribution schedule process by performing the following steps:</span></span>

1. <span data-ttu-id="4d387-175">Ugorjon a **Kiskereskedelem és kereskedelem \> Kiskereskedelem és kereskedelem informatika \> Elosztási ütemezés** pontra.</span><span class="sxs-lookup"><span data-stu-id="4d387-175">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="4d387-176">Futtassa a **1070** (**csatornakonfiguráció**) feladatot.</span><span class="sxs-lookup"><span data-stu-id="4d387-176">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="4d387-177">A konfiguráció befejezését követően a fizikailag elérhető készletről kapott adatok már nem használnak valós idejű szolgáltatási hívást, amikor a pénztár alkalmazásban a felhasználó a **Készletkeresés** műveletet használja (normál és mátrix nézet).</span><span class="sxs-lookup"><span data-stu-id="4d387-177">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="4d387-178">Helyette az aktuális üzlet, valamint a teljesítési csoportba tartozó összes üzlet ténylegesen rendelkezésre álló készletét a Kereskedelmi központ programból a csatorna-adatbázishoz szállított legutóbbi pillanatkép alapján számítja ki a program.</span><span class="sxs-lookup"><span data-stu-id="4d387-178">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="4d387-179">A csatornaoldali számítás tovább finomítja a pillanatfelvétel értékét, hogy a ténylegesen rendelkezésre álló értéket módosítsa a csatorna-adatbázis azon kiválasztott termékéhez tartozó további értékesítési vagy visszáru-tranzakciók alapján, amelyek nem szerepelnek az 1130-as feladat legutóbbi szinkronizált pillanatképén.</span><span class="sxs-lookup"><span data-stu-id="4d387-179">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="4d387-180">Ha a csatorna-adatbázis nem tartalmaz tranzakciós adatokat a teljesítési csoportban szereplő bármely raktárakhoz vagy üzletekhez, akkor nem tartalmaz olyan további tranzakciókat, amelyek az érték újraszámításához használhatók fel.</span><span class="sxs-lookup"><span data-stu-id="4d387-180">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="4d387-181">Ezért az adott raktáraknál vagy üzleteknél a tényleges készletre vonatkozóan megjelenített legjobb besclés a legutóbb ismert Kereskedelmi központ-pillanatképről származó adat.</span><span class="sxs-lookup"><span data-stu-id="4d387-181">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="4d387-182">A pénztár **Rendelésteljesítés** képernyői szintén a csatornaoldali számítással mutatják a cikkek tényleges készletét, amikor egy rendelésteljesítési sor ki van jelölve, és a felhasználó megtekinti a **Részletek** panelt a kiválasztott cikk tényleges készletéhez.</span><span class="sxs-lookup"><span data-stu-id="4d387-182">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="4d387-183">A készlet adatainak optimalizálása</span><span class="sxs-lookup"><span data-stu-id="4d387-183">Optimize your inventory data</span></span>

<span data-ttu-id="4d387-184">A készlet lehető legjobb becslésének biztosításához fontos, hogy a következő Commerce kötegelt feladatokat használja, és gyakran futtassa azokat:</span><span class="sxs-lookup"><span data-stu-id="4d387-184">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="4d387-185">**P-feladat** – a P-feladat a **felosztási ütemezések** oldalon található, és gyakran kell futtatni.</span><span class="sxs-lookup"><span data-stu-id="4d387-185">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="4d387-186">Ez a feladat az e-kereskedelmi rendeléseket, a pénztár által létrehozott aszinkron vevői rendeléseket, és a csatorna-adatbázisokból létrehozott készpénzzel fizetett és azonnal átvett rendeléseket átviszi a a Kereskedelmi központ rendszerbe, amelyek itt tovább feldolgozhatók.</span><span class="sxs-lookup"><span data-stu-id="4d387-186">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="4d387-187">Amíg ez az adat szinkronizálva van a csatornáról a a Kereskedelmi központ rendszerbe, a Kereskedelmi központ nem tartalmaz adatokat a raktárak azon termékeihez, amelyek az adott tranzakciókból erednek.</span><span class="sxs-lookup"><span data-stu-id="4d387-187">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="4d387-188">**Rendelések szinkronizálása** – ez a feladat a Kereskedelmi központ nyers tranzakciós adatait dolgozza fel, amelyekkel a P-feladat a Kereskedelmi központ értékesítési rendeléseibe az e-kereskedelmi és az aszinkron vevői rendelési tranzakciókat biztosítja és átalakítja.</span><span class="sxs-lookup"><span data-stu-id="4d387-188">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="4d387-189">A feladat feldolgozása és az értékesítési rendelések létrehozása előtt nem jönnek létre készlettranzakciók.</span><span class="sxs-lookup"><span data-stu-id="4d387-189">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="4d387-190">Ennélfogva a Kereskedelmi központ aktuális készlete nem veszi figyelembe a tranzakciókat.</span><span class="sxs-lookup"><span data-stu-id="4d387-190">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="4d387-191">**Tranzakciós kimutatások számítása kötegben** – az üzletben létrejövő készpénzzel fizetett és azonnal átvett tranzakciók esetében a folyamatos, apránkénti feladás folyamata biztosítja, hogy a rendszer az értékesítéshez kapcsolódó készletet hatékonyan frissítse.</span><span class="sxs-lookup"><span data-stu-id="4d387-191">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="4d387-192">A készpénzzel fizetett, azonnal átvett rendelésekhez tartozó készlettranzakciók leghatékonyabb feldolgozásához győződjön meg arról, hogy a rendszer a [folyamatos apránkénti feladás](https://docs.microsoft.com/dynamics365/commerce/trickle-feed) használatára van beállítva.</span><span class="sxs-lookup"><span data-stu-id="4d387-192">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](https://docs.microsoft.com/dynamics365/commerce/trickle-feed).</span></span>
- <span data-ttu-id="4d387-193">**Tranzakciós kimutatások feladása kötegben** – ez a feladat is szükséges a folyamatos, apránkénti feladáshoz.</span><span class="sxs-lookup"><span data-stu-id="4d387-193">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="4d387-194">Ez a **Tranzakciós kimutatások kötegelt kiszámítása** feladatot követi.</span><span class="sxs-lookup"><span data-stu-id="4d387-194">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="4d387-195">Ez a feladat rendszeresen feladja a kiszámított kimutatásokat, hogy a Kereskedelmi központban jöjjenek létre a készpénzzel fizetett, azonnal átvett értékesítéshez tartozó értékesítési rendelések, és a Kereskedelmi központ így pontosabban mutassa az üzlet készletét.</span><span class="sxs-lookup"><span data-stu-id="4d387-195">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="4d387-196">**Termék elérhetősége** – ez a feladat létrehozza a Kereskedelmi központ-készletből származó készlet pillanatfelvételét.</span><span class="sxs-lookup"><span data-stu-id="4d387-196">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="4d387-197">**1130 (termék elérhetősége)** – Ez a feladat az **elosztási ütemezések** oldalon található, és a **termék elérhetősége** feladatát követően azonnal futtatható.</span><span class="sxs-lookup"><span data-stu-id="4d387-197">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="4d387-198">Ez a feladat szállítja a készlet-pillanatfelvétel adatait a Kereskedelmi központ rendszerből a csatorna-adatbázisba.</span><span class="sxs-lookup"><span data-stu-id="4d387-198">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

<span data-ttu-id="4d387-199">Javasolt, hogy ne futtassa túl gyakran ezeket a kötegelt feladatokat (néhány percenként).</span><span class="sxs-lookup"><span data-stu-id="4d387-199">It's recommended that you don't run those batch jobs too frequently (every few minutes).</span></span> <span data-ttu-id="4d387-200">A gyakori futtatás túlterheli a Commerce Headquarters (HQ)-t, és jelentős mértékben hatással van a teljesítményre.</span><span class="sxs-lookup"><span data-stu-id="4d387-200">Frequent runs will overload Commerce headquarters (HQ) and can potentially impact performance.</span></span> <span data-ttu-id="4d387-201">Általánosan jó gyakorlat a termék elérhetőségének futtatása és 1130 munka végeztetése órabéren, és a P-feladat rendelések szinkronizálásának ütemezése, és a folyamatos, apránkénti feladású munkák azonos, vagy ennél is nagyobb gyakoriságú végeztetése.</span><span class="sxs-lookup"><span data-stu-id="4d387-201">In general, it's good practice to run product availability and 1130 jobs on an hourly basis, and schedule P-job, synchronize orders, and trickle feed posting-related jobs with the same or higher frequency.</span></span>

> [!NOTE]
> <span data-ttu-id="4d387-202">Teljesítménnyel kapcsolatos okokból, amikor a csatornaoldali készletelérhetőségi számításokkal hoznak létre egy készletelérhetőségi kérést az e-kereskedelmi API-k vagy az új pénztári cstornaoldali készletlogika használatával, a számítás gyorsítótárat használt annak meghatározására, hogy elég idő telt-e el, hogy igazolható legyen a számítási logika újbóli futtatása.</span><span class="sxs-lookup"><span data-stu-id="4d387-202">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the new POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="4d387-203">Az alapértelmezett gyorsítótár értéke 60 másodperc.</span><span class="sxs-lookup"><span data-stu-id="4d387-203">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="4d387-204">Például bekapcsolta az üzlet csatorna-oldali számítását, és megtekintette egy termék tényleges készletét a **készletkeresés** oldalán.</span><span class="sxs-lookup"><span data-stu-id="4d387-204">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="4d387-205">Ha a termék egy egységét értékesítik, akkor a **készletkeresés** lapja nem jeleníti meg a csökkentett készletet mindaddig, amíg a gyorsítótár ki nem ürül.</span><span class="sxs-lookup"><span data-stu-id="4d387-205">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="4d387-206">Miután a felhasználó feladta a tranzakciókat a pénztárban, várnia kell 60 másodpercig, mielőtt ellenőrizheti, hogy a tényleges készlet csökkent.</span><span class="sxs-lookup"><span data-stu-id="4d387-206">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="4d387-207">Ha az üzleti helyzethez kisebb gyorsítótárazási idő szükséges, forduljon a terméktámogatási szolgálat képviselőjéhez.</span><span class="sxs-lookup"><span data-stu-id="4d387-207">If your business scenario requires a smaller cache time, contact your product support representative for help.</span></span>
