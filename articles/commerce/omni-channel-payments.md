---
title: Többcsatornás fizetések áttekintése
description: Ez a témakör áttekintést nyújt a többcsatornás fizetésekről a Dynamics 365 Commerce szolgáltatásban.
author: rubendel
manager: AnnBe
ms.date: 09/17/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
audience: Application user
ms.reviewer: josaw
ms.search.scope: Operations, Retail
ms.custom: 141393
ms.assetid: ''
ms.search.region: Global
ms.search.industry: Retail
ms.author: rubendel
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: AX 8.1.3
ms.openlocfilehash: 80eaf36fb382e0ebe0a66383ea17ab76faa07dfa
ms.sourcegitcommit: 084eda1d5503be83e97e2e428e67ef5393535fab
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 09/17/2020
ms.locfileid: "3819813"
---
# <a name="omni-channel-payments-overview"></a><span data-ttu-id="66af3-103">Többcsatornás fizetések áttekintése</span><span class="sxs-lookup"><span data-stu-id="66af3-103">Omni-channel payments overview</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="66af3-104">Ez a témakör áttekintést nyújt a többcsatornás fizetésekről a Dynamics 365 Commerce szolgáltatásban.</span><span class="sxs-lookup"><span data-stu-id="66af3-104">This topic provides an overview of omni-channel payments in Dynamics 365 Commerce.</span></span> <span data-ttu-id="66af3-105">Tartalmaz egy átfogó listát a támogatott esetekről, a funkciókkal, a beállítással és a hibakereséssel kapcsolatos információkat, illetve néhány tipikus probléma leírását.</span><span class="sxs-lookup"><span data-stu-id="66af3-105">It includes a comprehensive list of supported scenarios, information about functionality, setup, and troubleshooting, and descriptions of some typical issues.</span></span>

## <a name="key-terms"></a><span data-ttu-id="66af3-106">Kulcsfogalmak</span><span class="sxs-lookup"><span data-stu-id="66af3-106">Key terms</span></span>

| <span data-ttu-id="66af3-107">Időszak</span><span class="sxs-lookup"><span data-stu-id="66af3-107">Term</span></span> | <span data-ttu-id="66af3-108">Leírás</span><span class="sxs-lookup"><span data-stu-id="66af3-108">Description</span></span> |
|---|---|
| <span data-ttu-id="66af3-109">Jogkivonat</span><span class="sxs-lookup"><span data-stu-id="66af3-109">Token</span></span> | <span data-ttu-id="66af3-110">Olyan adat-karakterlánc, amelyet a fizetési feldolgozó referenciaként ad meg.</span><span class="sxs-lookup"><span data-stu-id="66af3-110">A string of data that a payment processor provides as a reference.</span></span> <span data-ttu-id="66af3-111">A jogkivonatok fizetési kártyaszámokat, fizetési jóváhagyásokat és korábbi fizetésrögzítéseket jelenthetnek.</span><span class="sxs-lookup"><span data-stu-id="66af3-111">Tokens can represent payment card numbers, payment authorizations, and previous payment captures.</span></span> <span data-ttu-id="66af3-112">A jogkivonatok azért fontosak, mert segítenek az érzékeny adatok pénztár (POS) rendszerből való távoltartásában.</span><span class="sxs-lookup"><span data-stu-id="66af3-112">Tokens are important because they help keep sensitive data out of the point of sale (POS) system.</span></span> <span data-ttu-id="66af3-113">Időnként *referenciák* néven említik őket.</span><span class="sxs-lookup"><span data-stu-id="66af3-113">They are sometimes also referred to as *references*.</span></span> |
| <span data-ttu-id="66af3-114">Kártyajogkivonat</span><span class="sxs-lookup"><span data-stu-id="66af3-114">Card token</span></span> | <span data-ttu-id="66af3-115">Olyan jogkivonat, amelyet a fizetés feldolgozója biztosít a pénztárrendszerben való tároláshoz.</span><span class="sxs-lookup"><span data-stu-id="66af3-115">A token that a payment processor provides for storage in the POS system.</span></span> <span data-ttu-id="66af3-116">Kártyajogkivonatokat csak az azt megkapó kereskedő használhatja.</span><span class="sxs-lookup"><span data-stu-id="66af3-116">A card token can be used only by the merchant who receives it.</span></span> <span data-ttu-id="66af3-117">A kártyajogkivonatokat időnként *kártyareferenciák* néven említik.</span><span class="sxs-lookup"><span data-stu-id="66af3-117">Card tokens are sometimes also referred to as *card references*.</span></span> |
| <span data-ttu-id="66af3-118">Jóváhagyási (auth) jogkivonat</span><span class="sxs-lookup"><span data-stu-id="66af3-118">Authorization (auth) token</span></span> | <span data-ttu-id="66af3-119">Egyedu azonosító, amelyet a fizetés feldolgozója biztosít a válasz részeként, amelyet a pénztárrendszerbe küld, miután a pénztárrendszer jóváhagyási kérést hoz létre.</span><span class="sxs-lookup"><span data-stu-id="66af3-119">A unique ID that a payment process provides as part of the response that it sends to a POS system after the POS system makes an authorization request.</span></span> <span data-ttu-id="66af3-120">A jóváhagyási jogkivonatot később is használhatják, ha a feldolgozót műveletek elvégzésére kérik fel, például a jóváhagyás visszavonására vagy visszafordítására.</span><span class="sxs-lookup"><span data-stu-id="66af3-120">An authorization token can be used later if the processor is called to perform actions such as reversing or voiding the authorization.</span></span> <span data-ttu-id="66af3-121">Ez a leggyakrabban azonban a pénzeszközöknek a rendelés teljesítése vagy a tranzakciók véglegesítése esetén történő rögzítéséhez használatos.</span><span class="sxs-lookup"><span data-stu-id="66af3-121">However, it's most often used to capture funds when an order is fulfilled or a transaction is finalized.</span></span> <span data-ttu-id="66af3-122">A jóváhagyási jogkivonatokat időnként *jóváhagyási referenciák* néven említik.</span><span class="sxs-lookup"><span data-stu-id="66af3-122">Authorization tokens are sometimes also referred to as *authorization references*.</span></span> |
| <span data-ttu-id="66af3-123">Rögzítési jogkivonat</span><span class="sxs-lookup"><span data-stu-id="66af3-123">Capture token</span></span> | <span data-ttu-id="66af3-124">A fizetés feldolgozója által a pénztárrendszer számára biztosított referencia, amikor a fizetést véglegesítették vagy rögzítették.</span><span class="sxs-lookup"><span data-stu-id="66af3-124">A reference that a payment processor provides to a POS system when a payment is finalized or captured.</span></span> <span data-ttu-id="66af3-125">A rögzítési jogkivonat segítségével hivatkozni lehet a fizetés rögzítésére az ezt követő műveleteknél, például visszatérítési kéréseknél.</span><span class="sxs-lookup"><span data-stu-id="66af3-125">The capture token can then be used to reference the payment capture in subsequent operations, such as refund requests.</span></span> | 
| <span data-ttu-id="66af3-126">Nincs jelen kártya</span><span class="sxs-lookup"><span data-stu-id="66af3-126">Card not present</span></span> | <span data-ttu-id="66af3-127">Olyan fizetési tranzakciókra hivatkozó kifejezés, amelyeknél a tényleges kártya nem jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="66af3-127">A term that refers to payment transactions where a physical card isn't presented.</span></span> <span data-ttu-id="66af3-128">Ezek a tranzakciók előfordulhatnak például az e-kereskedelmi vagy a hívásközponti forgatókönyvekben.</span><span class="sxs-lookup"><span data-stu-id="66af3-128">For example, these transactions can occur in e-commerce or call center scenarios.</span></span> <span data-ttu-id="66af3-129">Az ilyen tranzakcióknak az esetében a fizetéssel kapcsolatos adatokat kézzel kell bevinni egy e-kereskedelmi webhelyre, egy hívásközponti folyamatba, illetve a pénztárba vagy a kifizetési terminálra.</span><span class="sxs-lookup"><span data-stu-id="66af3-129">For these transactions, the payment-related information is manually entered on an e-commerce website, in a call center flow, or on the POS or payment terminal.</span></span> |
| <span data-ttu-id="66af3-130">Kártya jelen van</span><span class="sxs-lookup"><span data-stu-id="66af3-130">Card present</span></span> | <span data-ttu-id="66af3-131">Olyan fizetési tranzakciókra utaló kifejezés, amelyeknél a tényleges kártya jelen van, és a Microsoft Dynamics 365 pénztárrendszerhez csatlakoztatott kifizetési terminálokon használják.</span><span class="sxs-lookup"><span data-stu-id="66af3-131">A term that refers to payment transactions where a physical card is presented and used on a payment terminal that is connected to the Microsoft Dynamics 365 POS system.</span></span> |

## <a name="overview"></a><span data-ttu-id="66af3-132">Áttekintés</span><span class="sxs-lookup"><span data-stu-id="66af3-132">Overview</span></span>

<span data-ttu-id="66af3-133">Álalánosságban a *Többcsatornás fizetések* kifejezés azt a képességet írja le, amikor a rendelés létrehozása az egyik csatornán történik, a teljesítése pedig egy másik csatornán.</span><span class="sxs-lookup"><span data-stu-id="66af3-133">In general, the term *omni-channel payments* describes the ability to create an order in one channel and fulfill it in another channel.</span></span> <span data-ttu-id="66af3-134">A többcsatornás fizetés támogatásának kulcsa a fizetési adatok együtt a megrendelés többi adatával együtt való megőrzése, majd pedig ezen fizetési adatok használata a rendelés visszhívása vagy másik csatornán való feldolgozása esetén.</span><span class="sxs-lookup"><span data-stu-id="66af3-134">The key to omni-channel payment support is preserving payment details together with the rest of the order details, and then using those payment details when the order is recalled or processed in another channel.</span></span> <span data-ttu-id="66af3-135">Egy klasszikus példa a „Vásárlás online, átvétel az üzletben” eset.</span><span class="sxs-lookup"><span data-stu-id="66af3-135">A classic example is the "Buy online, pick up in store" scenario.</span></span> <span data-ttu-id="66af3-136">Ebben az esetben a fizetési részleteket hozzáadják, amikor a megrendelés online létrejön.</span><span class="sxs-lookup"><span data-stu-id="66af3-136">In this scenario, the payment details are added when the order is created online.</span></span> <span data-ttu-id="66af3-137">Ezután a pénztárnál ezeket lehívják, hogy az ügyfél fizetési kártyáját megterheljék az átvétel időpontjában.</span><span class="sxs-lookup"><span data-stu-id="66af3-137">They are then recalled at the POS to charge the customer's payment card at the time of pickup.</span></span> 

<span data-ttu-id="66af3-138">Az ebben a témakörben ismertetett összes esetet meg lehet valósítani a Commerce rendszerrel biztosított normál Fizetések szoftverfejlesztői csomaggal (SDK).</span><span class="sxs-lookup"><span data-stu-id="66af3-138">All the scenarios that are described in this topic can be implemented by using the standard Payments software development kit (SDK) that is provided with Commerce.</span></span> <span data-ttu-id="66af3-139">A [Dynamics 365 fizetési összekötő az Adyen szolgáltatáshoz](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) készen érkező megvalósítást biztosít az itt leírt összes esethez.</span><span class="sxs-lookup"><span data-stu-id="66af3-139">The [Dynamics 365 Payment Connector for Adyen](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3) provides an out-of-box implementation of every scenario that is described here.</span></span> 

### <a name="prerequisites"></a><span data-ttu-id="66af3-140">Előfeltételek</span><span class="sxs-lookup"><span data-stu-id="66af3-140">Prerequisites</span></span>

<span data-ttu-id="66af3-141">Az ebben a témakörben leírt összes forgatókönyvhez olyan fizetési összekötő szükséges, amely támogatja az többcsatornás fizetéseket.</span><span class="sxs-lookup"><span data-stu-id="66af3-141">Every scenario that is described in this topic requires a payment connector that supports omni-channel payments.</span></span> <span data-ttu-id="66af3-142">A beépített Adyen összekötőt is lehet használni, mivel támogatja a Fizetések SDK-n keresztül elérhetővé tett eseteket.</span><span class="sxs-lookup"><span data-stu-id="66af3-142">The out-of-box Adyen connector can also be used, because it supports the scenarios that are made available through the Payments SDK.</span></span> <span data-ttu-id="66af3-143">Ha további információra van szüksége a fizetési összekötők alkalmazásáról és általánosságban a Retail SDLK-ról, akkor látogasson el a [Retail informatikai szakembereknek és fejlesztőknek – kezdőoldal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors) oldalra.</span><span class="sxs-lookup"><span data-stu-id="66af3-143">For more information about how to implement payment connectors, and about the Retail SDK in general, visit the [Retail for IT pros and developers home page](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/dev-retail-home-page#payment-connectors).</span></span>

#### <a name="supported-versions"></a><span data-ttu-id="66af3-144">Támogatott verziók</span><span class="sxs-lookup"><span data-stu-id="66af3-144">Supported versions</span></span>

<span data-ttu-id="66af3-145">Az ebben a témakörben ismertetett többcsatornás fizetés lehetőségei a Microsoft Dynamics 365 for Retail 8.1.3.-as verzió részeként kerültek kiadásra.</span><span class="sxs-lookup"><span data-stu-id="66af3-145">The omni-channel payment capabilities that are described in this topic were released as part of Microsoft Dynamics 365 for Retail version 8.1.3.</span></span> 

#### <a name="card-present-and-card-not-present-connectors"></a><span data-ttu-id="66af3-146">„Kártya jelen van” és „Nincs jelen kártya” összekötők</span><span class="sxs-lookup"><span data-stu-id="66af3-146">"Card present" and "card not present" connectors</span></span>

<span data-ttu-id="66af3-147">A Fizetések SDK két alkalmazásfejlesztési felületre (API-ra) támaszkodik a fizetések feldolgozásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-147">The Payments SDK relies on two sets of application programming interfaces (APIs) for payments.</span></span> <span data-ttu-id="66af3-148">Az API-k első csoportja az **iPaymentProcessor**.</span><span class="sxs-lookup"><span data-stu-id="66af3-148">The first set of APIs is named **iPaymentProcessor**.</span></span> <span data-ttu-id="66af3-149">Ez a „Nincs jelen kártya” fizetési összekötők megvalósítására szolgál, amelyeket a hívásközpontokban és a Microsoft Dynamics e-kereskedelmi platformon használnak.</span><span class="sxs-lookup"><span data-stu-id="66af3-149">It's used to implement "card not present" payment connectors that can be used in call centers and with the Microsoft Dynamics e-Commerce platform.</span></span> <span data-ttu-id="66af3-150">Az **iPaymentProcessor** felülettel kapcsolatos további információkért tekintse meg a [Fizetési csatlakozó és fizetési eszköz alkalmazása](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) tanulmányt, amely a fizetésekkel foglalkozik.</span><span class="sxs-lookup"><span data-stu-id="66af3-150">For more information about the **iPaymentProcessor** interface, see the [Implement a payment connector and a payment device](https://download.microsoft.com/download/e/2/7/e2735c65-1e66-4b8d-8a3c-e6ef3a319137/The%20Guide%20to%20Implementing%20Payment%20Connector%20and%20Payment%20Device_update.pdf) white paper, which covers payments.</span></span> 

<span data-ttu-id="66af3-151">Az API-k második csoportja az **iNamedRequestHandler**.</span><span class="sxs-lookup"><span data-stu-id="66af3-151">The second set of APIs is named **iNamedRequestHandler**.</span></span> <span data-ttu-id="66af3-152">Ez támogatja a „Kártya jelen van” fizetési integrációk megvalósítását, amelyek a fizetési terminált használják.</span><span class="sxs-lookup"><span data-stu-id="66af3-152">It supports the implementation of "card present" payment integrations that use a payment terminal.</span></span> <span data-ttu-id="66af3-153">Az **iNamedRequestHandler** felülettel kapcsolatos további információért tekintse meg a [Fizetési integráció létrehozása fizetési terminálhoz](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension) című részt.</span><span class="sxs-lookup"><span data-stu-id="66af3-153">For more information about the **iNamedRequestHandler** interface, see [Create a payment integration for a payment terminal](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/end-to-end-payment-extension).</span></span> 

### <a name="setup-and-configuration"></a><span data-ttu-id="66af3-154">Beállítás és konfigurálás</span><span class="sxs-lookup"><span data-stu-id="66af3-154">Setup and configuration</span></span>

<span data-ttu-id="66af3-155">A következő összetevők és beállítási lépések szükségesek:</span><span class="sxs-lookup"><span data-stu-id="66af3-155">The following components and setup steps are required:</span></span>

- <span data-ttu-id="66af3-156">**E-kereskedelmi integráció:** A Commerce szolgáltatással való integráció szükséges az olyan esetek támogatására, ahol a rendelés egy online áruházból származik.</span><span class="sxs-lookup"><span data-stu-id="66af3-156">**eCommerce integration:** An integration with Commerce is required to support scenarios where an order originates in an online storefront.</span></span> <span data-ttu-id="66af3-157">A Retail e-kereskedelem SDK csomaggal kapcsolatos további tudnivalókat lásd: [e-kereskedelmi platform szoftverfejlesztői készlet](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk)(SDK).</span><span class="sxs-lookup"><span data-stu-id="66af3-157">For more information about the Retail e-Commerce SDK, see [e-Commerce platform software development kit (SDK)](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/ecommerce-platform-sdk).</span></span> <span data-ttu-id="66af3-158">A bemutató környezetben a referencia-áruház támogatja a többcsatornás fizetési forgatókönyveket.</span><span class="sxs-lookup"><span data-stu-id="66af3-158">In a demo environment, the reference storefront supports omni-channel payment scenarios.</span></span> 
- <span data-ttu-id="66af3-159">**Online fizetések konfigurációja:** Az online csatorna beállításának tartalmaznia kell egy olyan kifizetési összekötőt, amely frissítve van a többcsatornás fizetések támogatásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-159">**Online payments configuration:** The setup of the online channel must include a payment connector that has been updated to support omni-channel payments.</span></span> <span data-ttu-id="66af3-160">Azt is megteheti, hogy a beépített kifizetési összekötőt használja.</span><span class="sxs-lookup"><span data-stu-id="66af3-160">Alternatively, the out-of-box payment connector can be used.</span></span> <span data-ttu-id="66af3-161">Az Adyen fizetési összekötő online áruházak számára történő konfigurálásával kapcsolatos további információkért lásd: [Adyen fizetési összekötő](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span><span class="sxs-lookup"><span data-stu-id="66af3-161">For information about how to configure the Adyen payment connector for online stores, see [Adyen payment connector](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3#e-commerce).</span></span> <span data-ttu-id="66af3-162">Az ebben a témakörben ismertetett e-kereskedelem beállítási lépésein kívül az Adyen összekötő beállításaiban a **Fizetési információ mentésének engedélyezése az e-kereskedelemben** paramétert **Igaz** értékre kell állítani.</span><span class="sxs-lookup"><span data-stu-id="66af3-162">In addition to the eCommerce setup steps that are described in that topic, the **Allow saving payment information in e-commerce** parameter must be set to **True** in the settings for the Adyen connector.</span></span> 
- <span data-ttu-id="66af3-163">**Többcsatornás fizetési konfiguráció:** A háttérirodában lépjen a **Retail és Commerce \> Központi beállítás \> Paraméterek \> Commerce megosztott paraméterei**.</span><span class="sxs-lookup"><span data-stu-id="66af3-163">**Omni-channel payments configuration:** In the back office, go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce shared parameters**.</span></span> <span data-ttu-id="66af3-164">Ezután a **Többcsatornás fizetések** lapon állítsa a **Többcsatornás fizetések használata** beállítást **Igen** értékre.</span><span class="sxs-lookup"><span data-stu-id="66af3-164">Then, on the **Omni-channel payments** tab, set the **Use omni-channel payments** option to **Yes**.</span></span> <span data-ttu-id="66af3-165">A Commerce 10.0.12 és újabb verzióiban ez a beállítás a **Funkciókezelés** munkaterületen szerepel.</span><span class="sxs-lookup"><span data-stu-id="66af3-165">In Commerce versions 10.0.12 and later, this setting is in the **Feature Management** workspace.</span></span> <span data-ttu-id="66af3-166">Válassza ki a **Többcsatornás kifizetések** funkciót, majd kattintson az **Engedélyezés most** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="66af3-166">Select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="66af3-167">**Fizetési szolgáltatások:** A hívásközpont a **Fizetési szolgáltatások** oldalon szereplő alapértelmezett fizetési összekötőt használja a fizetések feldolgozásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-167">**Payment services:** The call center uses the default payment connector on the **Payment services** page to process payments.</span></span> <span data-ttu-id="66af3-168">A „Vásárlás a hívásközpontban, átvétel az üzletben” és ehhez hasonló forgatókönyvek támogatása érdekében az alapértelmezett fizetési összekötőnek az Adyen fizetési összekötőnek kell lennie, vagy egy olyan fizetési összekötőnek, amely megfelel a többcsatornás fizetések megvalósítási követelményeinek.</span><span class="sxs-lookup"><span data-stu-id="66af3-168">To support scenarios such as "Buy in call center, pick up in store," this default payment connector must be the Adyen payment connector or a payment connector that meets the implementation requirements for omni-channel payments.</span></span>
- <span data-ttu-id="66af3-169">**Elektronikus átutalási szolgáltatás** : A fizetési terminálon keresztül történő fizetéseket be kell állítani az **Elektronikus átutalási szolgáltatás** gyorslapon a hardverprofilban.</span><span class="sxs-lookup"><span data-stu-id="66af3-169">**EFT service:** Payments through a payment terminal must be set up on the **EFT service** FastTab of the hardware profile.</span></span> <span data-ttu-id="66af3-170">Az Adyen összekötő beépítetten támogatja a többcsatornás fizetési forgatókönyveket.</span><span class="sxs-lookup"><span data-stu-id="66af3-170">The Adyen connector supports omni-channel payments scenarios out of the box.</span></span> <span data-ttu-id="66af3-171">Azok a fizetési összekötők, amelyek támogatják az **iNamedRequestHandler** felületet, szintén használhatók, ha támogatják a többcsatornás fizetéseket.</span><span class="sxs-lookup"><span data-stu-id="66af3-171">Other payment connectors that support the **iNamedRequestHandler** interface can also be used if they support omni-channel payments.</span></span>
- <span data-ttu-id="66af3-172">**Fizetési összekötő elérhetősége** : Egy rendelés visszahívása során a rendeléssel együtt visszahívott fizetőeszközsorok tartalmazzák a rendeléshez társított jóváhagyások létrehozásához használt fizetési összekötő nevét.</span><span class="sxs-lookup"><span data-stu-id="66af3-172">**Payment connector availability:** When an order is recalled, the payment tender lines that are recalled together with the order include the name of the payment connector that was used to create the authorizations that are associated with that order.</span></span> <span data-ttu-id="66af3-173">A rendelés teljesítése során a Fizetések SDK megpróbálja ugyanazt az összekötőt használni, amelyet az eredeti jóváhagyás létrehozására használtak.</span><span class="sxs-lookup"><span data-stu-id="66af3-173">When the order is fulfilled, the Payments SDK tries to use the same connector that was used to create the original authorization.</span></span> <span data-ttu-id="66af3-174">Ezért az ugyanazokkal a kereskedői tulajdonságokkal rendelkező fizetési összekötőnek elérhetőnek kell lennie a rögzítésre.</span><span class="sxs-lookup"><span data-stu-id="66af3-174">Therefore, a payment connector that has the same merchant properties must be available for capture.</span></span> 
- <span data-ttu-id="66af3-175">**Kártyatípusok:** A többcsatornás forgatókönyvek megfelelő működéséhez minden csatornának ugyanazzal a beállított fizetőeszközzel kell rendelkeznie, amely használható többcsatornás esetekhez.</span><span class="sxs-lookup"><span data-stu-id="66af3-175">**Card types:** For omni-channel scenarios to work properly, each channel must have the same setup for tender types that can be used for omni-channel.</span></span> <span data-ttu-id="66af3-176">Ez a beállítás tartalmazza a fizetési mód azonosítóját és a kártyatípus azonosítóját.</span><span class="sxs-lookup"><span data-stu-id="66af3-176">This setup includes payment method IDs and card type IDs.</span></span> <span data-ttu-id="66af3-177">Ha például a **Kártyák** fizetőeszköztípus azonosítója **2** az online áruház beállításában, akkor a kiskereskedelmi üzlet beállításában is ugyanezzel az azonosítóval kell rendelkeznie.</span><span class="sxs-lookup"><span data-stu-id="66af3-177">For example, if the **Cards** tender type has an ID of **2** in the online store setup, it should have the same ID in the retail store setup.</span></span> <span data-ttu-id="66af3-178">Ugyanez a követelmény vonatkozik a kártyatípus azonosítójára.</span><span class="sxs-lookup"><span data-stu-id="66af3-178">The same requirement applies to card type IDs.</span></span> <span data-ttu-id="66af3-179">Ha a **12**-es kártyaszámot állítják be a **VISA** értékhez az online áruházban, akkor ugyanezt az azonosítót kell beállítani a kiskereskedelmi üzletben.</span><span class="sxs-lookup"><span data-stu-id="66af3-179">If card number **12** is set to **VISA** in the online store, the same ID should be set up for the retail store.</span></span> 
- <span data-ttu-id="66af3-180">A Retail Modern POS for Windows vagy Android beépített hardverállomással -vagy-</span><span class="sxs-lookup"><span data-stu-id="66af3-180">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="66af3-181">Modern POS for iOS vagy Cloud POS csatlakoztatott, megosztott hardverállomással.</span><span class="sxs-lookup"><span data-stu-id="66af3-181">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

### <a name="basic-principle-supporting-omni-channel-payments"></a><span data-ttu-id="66af3-182">A többcsatornás fizetéseket támogató alapelv</span><span class="sxs-lookup"><span data-stu-id="66af3-182">Basic principle supporting omni-channel payments</span></span>

<span data-ttu-id="66af3-183">A fizetési csatlakozók és a fizetési feldolgozók jogkivonatokat vagy referenciákat használnak, hogy hivatkozni tudjanak a kártyás fizetésekhez kapcsolódó interakciókra.</span><span class="sxs-lookup"><span data-stu-id="66af3-183">Payment connectors and payment processors use tokens, or references, to reference interactions that are related to card payments.</span></span> <span data-ttu-id="66af3-184">Például fizetési jóváhagyás kérése során a rendszer biztosítja a jóváhagyás referenciáját.</span><span class="sxs-lookup"><span data-stu-id="66af3-184">For example, when a payment authorization is requested, a reference to that authorization is provided.</span></span> <span data-ttu-id="66af3-185">Ezért a jóváhagyás referenciáját később is le lehet kérni, amikor a fizetőeszközöket a teljesítés pillanatában rögzítik.</span><span class="sxs-lookup"><span data-stu-id="66af3-185">Therefore, the authorization can be referenced later, when funds are captured at the time of fulfillment.</span></span> <span data-ttu-id="66af3-186">Ez a jóváhagyás a kereskedő, a fizetési összekötő és a feldolgozó szempontjából egyedi.</span><span class="sxs-lookup"><span data-stu-id="66af3-186">This authorization is unique to the merchant, payment connector, and processor.</span></span> 

<span data-ttu-id="66af3-187">Ha az online létrehozott rendelést az üzletben veszik át, a rendelés ugyanezen fizetési adatait kell lekérni és használni.</span><span class="sxs-lookup"><span data-stu-id="66af3-187">If an order that was created online is being picked up in the store, the same payment details for that order must be recalled and used.</span></span> <span data-ttu-id="66af3-188">Amikor a rendszer megadja az eredeti adatokat egy olyan kérés részeként, amely egy fizetés az eredeti jóváhagyás alapján történő rögzítésére vonatkozik, akkor a fizetési feldolgozó kezelheti a kérést és rögzítheti a fizetést.</span><span class="sxs-lookup"><span data-stu-id="66af3-188">When the original details are provided as part of the request to capture a payment against the original authorization, the payment processor will be able to handle the request and capture the payment.</span></span> 

<span data-ttu-id="66af3-189">Az online rendelés helyes referenciájának biztosítása érdekében elérhetőnek kell lennie ugyanannak a „kártya nincs jelen” fizetési összekötőnek, amely támogatja ugyanazt a feldolgozót.</span><span class="sxs-lookup"><span data-stu-id="66af3-189">To correctly reference the online order, a "card not present" payment connector that supports the same processor must also be available.</span></span> <span data-ttu-id="66af3-190">Ilyen módon a pénztárrendszer a „kártya jelen van” fizetésekhez egy feldolgozót használhat, ugyanakkor további fizetési összekötőkhöz is hozzáférhet, így olyan rendeléseket is teljesíthet, amelyeket más csatornákon, más fizetési feldolgozókkal hoztak létre.</span><span class="sxs-lookup"><span data-stu-id="66af3-190">In this way, the POS system can have one processor for "card present" payments, but it can also have access to other payment connectors so that it can fulfill orders that are created in other channels by using different payment processors.</span></span> 

## <a name="supported-scenarios"></a><span data-ttu-id="66af3-191">Támogatott esetek</span><span class="sxs-lookup"><span data-stu-id="66af3-191">Supported scenarios</span></span>

<span data-ttu-id="66af3-192">A következő többcsatornás kifizetési forgatókönyvek támogatottak:</span><span class="sxs-lookup"><span data-stu-id="66af3-192">The following omni-channel payment scenarios are supported:</span></span>

- <span data-ttu-id="66af3-193">Online vásárlás, felvétel az üzletben</span><span class="sxs-lookup"><span data-stu-id="66af3-193">Buy online, pick up in store</span></span>
- <span data-ttu-id="66af3-194">Vásárlás a hívásközpontban, felvétel az üzletben</span><span class="sxs-lookup"><span data-stu-id="66af3-194">Buy in call center, pick up in store</span></span>
- <span data-ttu-id="66af3-195">Vásárlás az „A” üzletben, felvétel a „B” üzletben</span><span class="sxs-lookup"><span data-stu-id="66af3-195">Buy in store A, pick up in store B</span></span>
- <span data-ttu-id="66af3-196">Vásárlás az „A” üzletben, kiszállítás a vevőnek</span><span class="sxs-lookup"><span data-stu-id="66af3-196">Buy in store A, ship to customer</span></span>

    > [!NOTE]
    > <span data-ttu-id="66af3-197">A hívásközpontban a „normál” fizetési funkcióhoz hozzárendelt kifizetéseket az **Előre fizetés** = **Igen** értékre kell állítani, hogy az tükröződjön az esedékes összegben, amikor előhívják a rendelést a pénztárban.</span><span class="sxs-lookup"><span data-stu-id="66af3-197">Payments made in the call center that map to the "Normal" payment function must be marked as **Prepay** = **Yes** to be reflected in the amount due when recalling the order in the POS.</span></span> <span data-ttu-id="66af3-198">A „Normál” típusú nem előre fizetett fizetéseket nem ismeri fel a program, ha a rendelést a pénztárban előhívják.</span><span class="sxs-lookup"><span data-stu-id="66af3-198">Non-prepay payments of type "Normal" are not recognized when the order is recalled in POS.</span></span> 

<span data-ttu-id="66af3-199">Az említett forgatókönyvek különböző változatai szintén támogatottak.</span><span class="sxs-lookup"><span data-stu-id="66af3-199">Variations of these scenarios are also supported.</span></span> <span data-ttu-id="66af3-200">Például egy online rendelés tartalmazhat olyan sorokat is, amelyeket kiszállítanak a vevőnek, és olyan sorokat is, amelyeket az üzletben vesznek fel.</span><span class="sxs-lookup"><span data-stu-id="66af3-200">For example, an online order might include both lines that will be shipped to the customer and lines that will be picked up in a store.</span></span> <span data-ttu-id="66af3-201">Minden rendelésteljesítési lehetőség támogatott a többcsatornás fizetéseken keresztül.</span><span class="sxs-lookup"><span data-stu-id="66af3-201">All order fulfillment options are supported via omni-channel payments.</span></span> 

<span data-ttu-id="66af3-202">Az alábbi szakaszok bemutatják az egyes forgatókönyvek lépései, valamint azt, hogy hogyan lehet lefuttatni a forgatókönyvet bemutató adatok segítségével.</span><span class="sxs-lookup"><span data-stu-id="66af3-202">The following sections describe the steps for each scenario and show how to run the scenario by using demo data.</span></span> 

### <a name="buy-online-pick-up-in-store"></a><span data-ttu-id="66af3-203">Online vásárlás, felvétel az üzletben</span><span class="sxs-lookup"><span data-stu-id="66af3-203">Buy online, pick up in store</span></span>

<span data-ttu-id="66af3-204">Az indítás előtt győződjön meg arról, hogy megtalálhatók a következő előfeltételek:</span><span class="sxs-lookup"><span data-stu-id="66af3-204">Before you start, make sure that the following prerequisites are in place:</span></span>

- <span data-ttu-id="66af3-205">Van egy referenciaüzlet, ahol konfigurált Adyen-összekötő található.</span><span class="sxs-lookup"><span data-stu-id="66af3-205">You have a reference storefront where the Adyen connector is configured.</span></span>
- <span data-ttu-id="66af3-206">A **Többcsatornás fizetések** beállítás értéke a **Commerce megosztott paraméterei** oldalon **Igaz**.</span><span class="sxs-lookup"><span data-stu-id="66af3-206">The **Omni-channel payments** option on the **Commerce shared parameters** page is set to **True**.</span></span> <span data-ttu-id="66af3-207">Az újabb verziókban ezt a beállítást áthelyezték a **Funkciókezelés** munkaterületre, ahol kiválaszthatja a **Többcsatornás fizetések** funkciót, majd kattintson az **Engedélyezés most** lehetőségre.</span><span class="sxs-lookup"><span data-stu-id="66af3-207">In later versions this settng is moved to the **Feature Management** workspace where you can select the **Omni-channel payments** feature and click **Enable now**.</span></span> 
- <span data-ttu-id="66af3-208">Az Adyen fizetési összekötő a houstoni pénztárgéphez van konfigurálva.</span><span class="sxs-lookup"><span data-stu-id="66af3-208">The Adyen payment connector is configured for the Houston POS register.</span></span>
- <span data-ttu-id="66af3-209">A Retail Modern POS for Windows vagy Android beépített hardverállomással -vagy-</span><span class="sxs-lookup"><span data-stu-id="66af3-209">The Retail Modern POS for Windows or Android with built-in hardware station   -or-</span></span>
- <span data-ttu-id="66af3-210">Modern POS for iOS vagy Cloud POS csatlakoztatott, megosztott hardverállomással.</span><span class="sxs-lookup"><span data-stu-id="66af3-210">Modern POS for iOS or Cloud POS with connected shared hardware station.</span></span> 

<span data-ttu-id="66af3-211">Kövesse az alábbi lépéseket a forgatókönyv futtatásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-211">Follow these steps to run the scenario.</span></span>

1. <span data-ttu-id="66af3-212">A referenciaüzletben hozzon létre egy rendelést üzletben történő átvétellel.</span><span class="sxs-lookup"><span data-stu-id="66af3-212">In the reference storefront, create an order for in-store pickup.</span></span> <span data-ttu-id="66af3-213">Ügyeljen arra, hogy a **Houston** üzletet válassza.</span><span class="sxs-lookup"><span data-stu-id="66af3-213">Be sure to select the **Houston** store.</span></span> 
2. <span data-ttu-id="66af3-214">Menjen végig a fizetési lépéseken, és fizessen egy tesztelésre használt hitelkártyaszám használatával.</span><span class="sxs-lookup"><span data-stu-id="66af3-214">Go through the checkout steps, and pay by using a test credit card number.</span></span> <span data-ttu-id="66af3-215">Tesztelésre használható hitelkártyaszámokat az [Adyen tesztkártyaszámok oldalon](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) találhat.</span><span class="sxs-lookup"><span data-stu-id="66af3-215">You can find test credit card numbers on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description).</span></span>
3. <span data-ttu-id="66af3-216">A Commerce alkalmazásban a rendelések létrehozására a háttérirodában használja a **Rendelések szinkronizálása** kötegelt feladatot és a **P-001** felosztási ütemezést.</span><span class="sxs-lookup"><span data-stu-id="66af3-216">In Commerce, use the **Synchronize orders** batch job and the **P-001** distribution schedule to create the orders in the back office.</span></span>
4. <span data-ttu-id="66af3-217">A pénztár üdvözlőoldalán válassza az **Átveendő rendelések** műveletet, hogy megtekintse az üzletben átveendő rendeléseket.</span><span class="sxs-lookup"><span data-stu-id="66af3-217">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
5. <span data-ttu-id="66af3-218">Jelöljön ki egy vagy több sort abból a rendelésből, amely a referenciaüzletben lett létrehozva, majd válassza a **Felvétel** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-218">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="66af3-219">A rendelést a rendszer lekéri a háttérirodából.</span><span class="sxs-lookup"><span data-stu-id="66af3-219">The order is retrieved from the back office.</span></span> 

6. <span data-ttu-id="66af3-220">Amikor a rendszer lekéri a rendelési sor részleteit a háttérirodából, és a többcsatornás fizetéshez használható kártyás fizetést észlel, akkor tájékoztatja Önt, hogy a fizetési mód elérhető.</span><span class="sxs-lookup"><span data-stu-id="66af3-220">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
7. <span data-ttu-id="66af3-221">Válassza a **Rendelkezésre álló fizetési mód** lehetőséget a tranzakció teljesítéséhez, és használja a referenciaüzletben megadott kártyaadatokat.</span><span class="sxs-lookup"><span data-stu-id="66af3-221">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="66af3-222">A rendelési sorok betöltődnek a tranzakciós oldalon, és a fizetendő egyenleg 0 (nulla).</span><span class="sxs-lookup"><span data-stu-id="66af3-222">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span> 

8. <span data-ttu-id="66af3-223">Válassza ki a **Fizetések** lapot, ahol megtekintheti a fizetőeszköz sorát, amelyet az online rendelésből húzott ki a rendszer.</span><span class="sxs-lookup"><span data-stu-id="66af3-223">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
9. <span data-ttu-id="66af3-224">A tranzakció befejezéséhez válassza ki a fizetési módot.</span><span class="sxs-lookup"><span data-stu-id="66af3-224">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-call-center-pick-up-in-store"></a><span data-ttu-id="66af3-225">Vásárlás a hívásközpontban, felvétel az üzletben</span><span class="sxs-lookup"><span data-stu-id="66af3-225">Buy in call center, pick up in store</span></span>

1. <span data-ttu-id="66af3-226">A Commerce alkalmazás **Ügyfélszolgálat** oldalán adja meg a **Karen Berg** nevet a keresési sávon, majd válassza a **Keresés** parancsot.</span><span class="sxs-lookup"><span data-stu-id="66af3-226">In Commerce, on the **Customer service** page, enter **Karen Berg** in the search bar, and then select **Search**.</span></span> 
3. <span data-ttu-id="66af3-227">Válassza a **Karen Berg** lehetőséget a keresési eredmények között.</span><span class="sxs-lookup"><span data-stu-id="66af3-227">Select **Karen Berg** in the search results.</span></span>
4. <span data-ttu-id="66af3-228">Miután Karen betöltődött az **Ügyfélszolgálat** oldalon, válassza az **Új értékesítési rendelés** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-228">After Karen is loaded onto the **Customer service** page, select **New sales order**.</span></span>
5. <span data-ttu-id="66af3-229">Az új értékesítési rendelés lapon válassza **Fejléc** elemet a rendelési fejléc megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="66af3-229">On the new sales order page, select **Header** to view the order header.</span></span> 
6. <span data-ttu-id="66af3-230">A **Rendelés fejléce** oldalon állítsa a webhelyet **Központi** értékre, a raktárat pedig **Houston** értékre.</span><span class="sxs-lookup"><span data-stu-id="66af3-230">On the **Order header** page, set the site to **Central** and the warehouse to **Houston**.</span></span>
7. <span data-ttu-id="66af3-231">A **Szállítás** lapon a **Szállítási mód** mezőben **60** szerepeljen a vevői átvételhez.</span><span class="sxs-lookup"><span data-stu-id="66af3-231">On the **Deliver** tab, set the **Mode of delivery** field to **60** for customer pickup.</span></span>
8. <span data-ttu-id="66af3-232">Válassza a **Sorok** elemet, majd adjon egy vagy több sort a rendeléshez.</span><span class="sxs-lookup"><span data-stu-id="66af3-232">Select **Lines**, and then add one or more lines to the order.</span></span> 
9. <span data-ttu-id="66af3-233">Válassza a **Befejezés** parancsot a rendelés befejezési folyamatának megnyitásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-233">Select **Complete** to enter the order completion flow.</span></span>
10. <span data-ttu-id="66af3-234">Görgessen a kifizetések szakaszhoz, válassza a **Hozzáadás** parancsot, majd válassza ki azt a sort, amelynél a fizetési mód típusa **Kártyák** értékre van állítva.</span><span class="sxs-lookup"><span data-stu-id="66af3-234">Scroll down to the payments section, select **Add**, and then select a line where the payment method type is set to **Cards**.</span></span> 
11. <span data-ttu-id="66af3-235">Válassza a pluszjelet (**+**) a kártyás fizetés hozzáadásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-235">Select the plus sign (**+**) to add a card payment.</span></span> 
12. <span data-ttu-id="66af3-236">Adja meg a tesztelésre használható hitelkártya számát, amelyet az [Adyen tesztkártyaszám oldalon](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description) talált, majd nyomja meg az **OK** gombot.</span><span class="sxs-lookup"><span data-stu-id="66af3-236">Enter the details for a test credit card number that you found on the [Adyen test card numbers page](https://docs.adyen.com/development-resources/test-cards/test-card-numbers/#description), and then select **OK**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="66af3-237">Ha a megadott kártyaszámhoz tartozó kártya márkája különbözik a márkától, amelyet a fizetés indításakor kiválasztott, a fizetés ettől függetlenül végrehajtható.</span><span class="sxs-lookup"><span data-stu-id="66af3-237">If the card brand for the card number that you entered differs from the brand that was selected when the payment was initiated, the payment will still go through.</span></span> <span data-ttu-id="66af3-238">Azonban azokhoz a számlákhoz adja fel majd, amelyek a 10. lépésben kiválasztott kártyamárkához vannak rendelve.</span><span class="sxs-lookup"><span data-stu-id="66af3-238">However, it will be posted to the accounts that are mapped to the card brand that you selected in step 10.</span></span>

12. <span data-ttu-id="66af3-239">Válassza ismét az **OK** gombot a **Rendelésteljesítési fizetések** párbeszédablak bezárásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-239">Select **OK** again to close the **Order completion payments** dialog box.</span></span>
13. <span data-ttu-id="66af3-240">Az **Értékesítési rendelés összegzése** lapon válassza a **Küldés** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-240">On the **Sales order summary** page, select **Submit**.</span></span>
14. <span data-ttu-id="66af3-241">A pénztár üdvözlőoldalán válassza az **Átveendő rendelések** műveletet, hogy megtekintse az üzletben átveendő rendeléseket.</span><span class="sxs-lookup"><span data-stu-id="66af3-241">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="66af3-242">Jelöljön ki egy vagy több sort abból a rendelésből, amely a referenciaüzletben lett létrehozva, majd válassza a **Felvétel** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-242">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="66af3-243">A rendelést a rendszer lekéri a háttérirodából.</span><span class="sxs-lookup"><span data-stu-id="66af3-243">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="66af3-244">Amikor a rendszer lekéri a rendelési sor részleteit a háttérirodából, és a többcsatornás fizetéshez használható kártyás fizetést észlel, akkor tájékoztatja Önt, hogy a fizetési mód elérhető.</span><span class="sxs-lookup"><span data-stu-id="66af3-244">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="66af3-245">Válassza a **Rendelkezésre álló fizetési mód** lehetőséget a tranzakció teljesítéséhez, és használja a referenciaüzletben megadott kártyaadatokat.</span><span class="sxs-lookup"><span data-stu-id="66af3-245">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="66af3-246">A rendelési sorok betöltődnek a tranzakciós oldalon, és a fizetendő egyenleg 0 (nulla).</span><span class="sxs-lookup"><span data-stu-id="66af3-246">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="66af3-247">Válassza ki a **Fizetések** lapot, ahol megtekintheti a fizetőeszköz sorát, amelyet az online rendelésből húzott ki a rendszer.</span><span class="sxs-lookup"><span data-stu-id="66af3-247">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="66af3-248">A tranzakció befejezéséhez válassza ki a fizetési módot.</span><span class="sxs-lookup"><span data-stu-id="66af3-248">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-pick-up-in-store-b"></a><span data-ttu-id="66af3-249">Vásárlás az „A” üzletben, felvétel a „B” üzletben</span><span class="sxs-lookup"><span data-stu-id="66af3-249">Buy in store A, pick up in store B</span></span>

1. <span data-ttu-id="66af3-250">Indítsa el a houstoni üzlethez tartozó pénztárat.</span><span class="sxs-lookup"><span data-stu-id="66af3-250">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="66af3-251">A **Tranzakció** oldalon adja a Karen Berg elemet a tranzakcióhoz a számbillentyűzeten a **2001** értéket megadva.</span><span class="sxs-lookup"><span data-stu-id="66af3-251">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="66af3-252">Adjon egy vagy több sort a tranzakcióhoz.</span><span class="sxs-lookup"><span data-stu-id="66af3-252">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="66af3-253">Válassza a **Rendelések** elemet a rendelési beállítások megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="66af3-253">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="66af3-254">Válassza az **Összes felvétele** elemet, majd amikor a rendszer felkéri, válassza a **Vevői rendelés** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-254">Select **Pick up all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="66af3-255">A keresési sávon adja meg a **Seattle** értéket, majd válassza átvételhez a **Seattle** üzletet.</span><span class="sxs-lookup"><span data-stu-id="66af3-255">In the search bar, enter **Seattle**, and then select the **Seattle** store for pickup.</span></span> 
7. <span data-ttu-id="66af3-256">Az **OK** gombra kattintva elfogadja az aktuális dátumot a felvételi dátumként.</span><span class="sxs-lookup"><span data-stu-id="66af3-256">Select **OK** to accept the current date as the date of pickup.</span></span>
9. <span data-ttu-id="66af3-257">Válassza a **Fizetési kártya** elemet a fizetés indításához.</span><span class="sxs-lookup"><span data-stu-id="66af3-257">Select **Pay card** to initiate the payment.</span></span>
10. <span data-ttu-id="66af3-258">Terhelje a kártyás fizetést a letéthez esedékes összegre.</span><span class="sxs-lookup"><span data-stu-id="66af3-258">Tender the card payment for the amount that is due for the deposit.</span></span> 
11. <span data-ttu-id="66af3-259">Teljesítse a letét fizetését a fizetési terminálon.</span><span class="sxs-lookup"><span data-stu-id="66af3-259">Complete the deposit payment on the payment terminal.</span></span> 
12. <span data-ttu-id="66af3-260">A letét kifizetését követően válassza ki azt a lehetőséget, hogy a teljesítéshez ugyanaz a kártya legyen használatban, és várja meg, amíg a rendelés teljesül.</span><span class="sxs-lookup"><span data-stu-id="66af3-260">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span> 
13. <span data-ttu-id="66af3-261">Indítsa el a seattle-i üzlethez tartozó pénztárat.</span><span class="sxs-lookup"><span data-stu-id="66af3-261">Start the POS for the Seattle store.</span></span>
14. <span data-ttu-id="66af3-262">A pénztár üdvözlőoldalán válassza az **Átveendő rendelések** műveletet, hogy megtekintse az üzletben átveendő rendeléseket.</span><span class="sxs-lookup"><span data-stu-id="66af3-262">In the POS, on the welcome page, select the **Orders to pickup** operation to see the orders for in-store pickup.</span></span> 
15. <span data-ttu-id="66af3-263">Jelöljön ki egy vagy több sort abból a rendelésből, amely a referenciaüzletben lett létrehozva, majd válassza a **Felvétel** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-263">Select one or more lines from the order that was created in the reference storefront, and then select **Pick up**.</span></span>

    <span data-ttu-id="66af3-264">A rendelést a rendszer lekéri a háttérirodából.</span><span class="sxs-lookup"><span data-stu-id="66af3-264">The order is retrieved from the back office.</span></span> 

16. <span data-ttu-id="66af3-265">Amikor a rendszer lekéri a rendelési sor részleteit a háttérirodából, és a többcsatornás fizetéshez használható kártyás fizetést észlel, akkor tájékoztatja Önt, hogy a fizetési mód elérhető.</span><span class="sxs-lookup"><span data-stu-id="66af3-265">When the order line details are retrieved from the back office, and a card payment that can be used for omni-channel is detected, you're informed that a payment method is available.</span></span>
17. <span data-ttu-id="66af3-266">Válassza a **Rendelkezésre álló fizetési mód** lehetőséget a tranzakció teljesítéséhez, és használja a referenciaüzletben megadott kártyaadatokat.</span><span class="sxs-lookup"><span data-stu-id="66af3-266">Select **Use available payment method** to complete the transaction by using the card details that were entered in the reference storefront.</span></span>

    <span data-ttu-id="66af3-267">A rendelési sorok betöltődnek a tranzakciós oldalon, és a fizetendő egyenleg 0 (nulla).</span><span class="sxs-lookup"><span data-stu-id="66af3-267">The order lines are loaded on the transaction page, and the balance due is 0 (zero).</span></span>

18. <span data-ttu-id="66af3-268">Válassza ki a **Fizetések** lapot, ahol megtekintheti a fizetőeszköz sorát, amelyet az online rendelésből húzott ki a rendszer.</span><span class="sxs-lookup"><span data-stu-id="66af3-268">Select the **Payments** tab to view the tender line that was pulled from the online order.</span></span> 
19. <span data-ttu-id="66af3-269">A tranzakció befejezéséhez válassza ki a fizetési módot.</span><span class="sxs-lookup"><span data-stu-id="66af3-269">Select any payment method to complete the transaction.</span></span> 

### <a name="buy-in-store-a-ship-to-customer"></a><span data-ttu-id="66af3-270">Vásárlás az „A” üzletben, kiszállítás a vevőnek</span><span class="sxs-lookup"><span data-stu-id="66af3-270">Buy in store A, ship to customer</span></span>

1. <span data-ttu-id="66af3-271">Indítsa el a houstoni üzlethez tartozó pénztárat.</span><span class="sxs-lookup"><span data-stu-id="66af3-271">Start the POS for the Houston store.</span></span>
2. <span data-ttu-id="66af3-272">A **Tranzakció** oldalon adja a Karen Berg elemet a tranzakcióhoz a számbillentyűzeten a **2001** értéket megadva.</span><span class="sxs-lookup"><span data-stu-id="66af3-272">On the **Transaction** page, add Karen Berg to the transaction by using the number pad to enter **2001**.</span></span>
3. <span data-ttu-id="66af3-273">Adjon egy vagy több sort a tranzakcióhoz.</span><span class="sxs-lookup"><span data-stu-id="66af3-273">Add one or more lines to the transaction.</span></span>
4. <span data-ttu-id="66af3-274">Válassza a **Rendelések** elemet a rendelési beállítások megtekintéséhez.</span><span class="sxs-lookup"><span data-stu-id="66af3-274">Select **Orders** to see the order options.</span></span>
5. <span data-ttu-id="66af3-275">Válassza az **Összes szállítása** elemet, majd amikor a rendszer felkéri, válassza a **Vevői rendelés** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-275">Select **Ship all**, and then, when you're prompted, select **Customer order**.</span></span>
6. <span data-ttu-id="66af3-276">A szállítási mód lapon válassza ki a **Standard egynapos** beállítást, majd az **OK** gombra kattintva fogadja el a mai dátumot a szállítási dátumként.</span><span class="sxs-lookup"><span data-stu-id="66af3-276">In the shipping method page, select **Standard overnight**, and then select **OK** to accept today's date as the shipping date.</span></span> 
7. <span data-ttu-id="66af3-277">Az **OK** gombra kattintva elfogadja az aktuális dátumot a felvételi dátumként.</span><span class="sxs-lookup"><span data-stu-id="66af3-277">Select **OK** to accept the current date as the date of pickup.</span></span>
8. <span data-ttu-id="66af3-278">Válassza a **Fizetési kártya** elemet a fizetés indításához.</span><span class="sxs-lookup"><span data-stu-id="66af3-278">Select **Pay card** to initiate the payment.</span></span>
9. <span data-ttu-id="66af3-279">Terhelje a kártyás fizetést a letéthez esedékes összegre.</span><span class="sxs-lookup"><span data-stu-id="66af3-279">Tender the card payment for the amount that is due for the deposit.</span></span> 
10. <span data-ttu-id="66af3-280">Teljesítse a letét fizetését a fizetési terminálon.</span><span class="sxs-lookup"><span data-stu-id="66af3-280">Complete the deposit payment on the payment terminal.</span></span> 
11. <span data-ttu-id="66af3-281">A letét kifizetését követően válassza ki azt a lehetőséget, hogy a teljesítéshez ugyanaz a kártya legyen használatban, és várja meg, amíg a rendelés teljesül.</span><span class="sxs-lookup"><span data-stu-id="66af3-281">After the deposit is paid, select the option to use the same card for fulfillment, and wait for the order to be completed.</span></span>

<span data-ttu-id="66af3-282">Amikor a rendelés kitárolása, csomagolása és számlázása megtörtént a háttérirodában, a pénztárnál megadott fizetési adatok segítségével rögzíti a rendszer a pénzeszközöket a vevőnek szállított árukért cserébe.</span><span class="sxs-lookup"><span data-stu-id="66af3-282">When the order is picked, packed, and invoiced in the back office, the payment details that are provided at the POS will be used to capture the funds for the goods that are being shipped to the customer.</span></span> 

## <a name="scenario-details"></a><span data-ttu-id="66af3-283">Forgatókönyv részletei</span><span class="sxs-lookup"><span data-stu-id="66af3-283">Scenario details</span></span>

<span data-ttu-id="66af3-284">A most ismertetett alapvető forgatókönyvek mellett számos fejlesztést végeztek a Fizetések SDK-n a többcsatornás fizetések támogatásához.</span><span class="sxs-lookup"><span data-stu-id="66af3-284">In addition to the basic scenarios that were just described, several enhancements have been made to the Payments SDK to support omni-channel payments.</span></span> 

### <a name="pos"></a><span data-ttu-id="66af3-285">Pénztár</span><span class="sxs-lookup"><span data-stu-id="66af3-285">POS</span></span>

#### <a name="single-swipedip-for-customer-orders"></a><span data-ttu-id="66af3-286">Egyetlen lehúzás/beillesztés a vevői rendelésekhez</span><span class="sxs-lookup"><span data-stu-id="66af3-286">Single swipe/dip for customer orders</span></span>

<span data-ttu-id="66af3-287">Az többcsatornás fizetések funkció bevezetése előtt, amikor a letétet tartalmazó vevői rendeléseket a pénztárnál hozták létre, a vevőknek kétszer kellett lehúzniuk (vagy beilleszteniük) a kártyájukat: egyszer a letét fizetéséhez, egyszer pedig a kártya tokenné alakítása során az ezt követő rendelés teljesítéséhez.</span><span class="sxs-lookup"><span data-stu-id="66af3-287">Before the omni-channel payments feature was implemented, when customer orders that included deposits were created at the POS, customers were required to swipe (or dip) their card two times: one time to pay the deposit and one time to tokenize the card for subsequent order fulfillment.</span></span> <span data-ttu-id="66af3-288">Ha a többcsatornás tokenné alakítás funkció be van kapcsolva, a vevőnek csak egyszer kell lehúznia a kártyáját, amellyel kifizetheti a letétet, és engedélyezheti az árukért fizetendő összeget, amit később teljesítenek.</span><span class="sxs-lookup"><span data-stu-id="66af3-288">When the omni-channel tokenization feature is turned on, customers must swipe their card only one time to both pay the deposit and authorize the amount that is due for goods that will be fulfilled later.</span></span> <span data-ttu-id="66af3-289">A teljesítés során az engedélyezett pénzeszközöket rögzítik.</span><span class="sxs-lookup"><span data-stu-id="66af3-289">At the time of fulfillment, the authorized funds are captured.</span></span> <span data-ttu-id="66af3-290">A többcsatornás tokenizáció funkció megvalósítása előtt csak egy ismétlődő kártyatoken került létrehozására az ezt követő rendelésteljesítéshez.</span><span class="sxs-lookup"><span data-stu-id="66af3-290">Before the omni-channel tokenization feature was implemented, only a recurring card token was created for subsequent order fulfillment.</span></span> <span data-ttu-id="66af3-291">Ennélfogva a függőben lévő teljesítéshez nyújtott pénzeszközök nem voltak engedélyezve, és mivel ezeket az összegeket nem tartották meg az adott beszerzésre vonatkozóan, kisebb a valószínűsége annak, hogy a későbbiekben rögzíteni tudják őket.</span><span class="sxs-lookup"><span data-stu-id="66af3-291">Therefore, the funds for the pending fulfillment weren't authorized, and because those funds weren't being held for that specific purchase, it was less likely that they could be captured later.</span></span>

> [!NOTE]
> <span data-ttu-id="66af3-292">Az egy lehúzás nem támogatott a Retail 8.1.3-as verziójában.</span><span class="sxs-lookup"><span data-stu-id="66af3-292">Single swipe isn't supported in Retail version 8.1.3.</span></span> <span data-ttu-id="66af3-293">A 8.1.3-as verzió vevői rendelései ugyanazt a folyamatot használják, amelyet a többcsatornás tokenizációs funkció megvalósítása előtt.</span><span class="sxs-lookup"><span data-stu-id="66af3-293">Customer orders in version 8.1.3 use the same flow that was used before the omni-channel tokenization feature was implemented.</span></span> 

### <a name="cards-that-cant-issue-recurring-card-tokens"></a><span data-ttu-id="66af3-294">Kártyák, amelyek nem tudnak ismétlődő kártyatokeneket kibocsátani</span><span class="sxs-lookup"><span data-stu-id="66af3-294">Cards that can't issue recurring card tokens</span></span>

<span data-ttu-id="66af3-295">Néhány kártya nem használható többcsatornás fizetéshez, mert nem támogatják az ismétlődő kártyatokenek kiadását.</span><span class="sxs-lookup"><span data-stu-id="66af3-295">Some cards can't be used for omni-channel payments, because they don't support issuing recurring card tokens.</span></span> <span data-ttu-id="66af3-296">Ha egy rendelést a pénztárnál hoz létre, és a letétet olyan kártyával fizetik ki, amely nem támogatja az ismétlődő kártyatokeneket, akkor a program a korábbi kártya tokenizációs folyamatát használja.</span><span class="sxs-lookup"><span data-stu-id="66af3-296">When an order is created at the POS, if the deposit is paid by using a card that doesn't support recurring card tokens, the previous card tokenization flow is used.</span></span> <span data-ttu-id="66af3-297">Ebből következően egy olyan vevőnek, aki a kifizetést szeretné nyújtani a későbbi rendelés teljesítéséhez, be kell mutatnia egy második kártyát is.</span><span class="sxs-lookup"><span data-stu-id="66af3-297">Therefore, a customer who wants to provide a payment that will be used for subsequent order fulfillment must present a second card.</span></span> <span data-ttu-id="66af3-298">Ha a második kártya nem támogatja az ismétlődő kártyatokeneket, akkor a tokenizációs művelet elutasításra kerül, és a pénztárost a program kéri, hogy kérje meg a vevőt egy másik kártya biztosítására.</span><span class="sxs-lookup"><span data-stu-id="66af3-298">If the second card doesn't support recurring card tokens, the tokenization action will be declined, and the cashier will be prompted to ask the customer to provide a different card.</span></span> 

### <a name="using-a-different-card"></a><span data-ttu-id="66af3-299">Másik kártya használata</span><span class="sxs-lookup"><span data-stu-id="66af3-299">Using a different card</span></span>

<span data-ttu-id="66af3-300">Az a vevő, aki az üzletbe való rendelésfelvételhez jön, egy másik kártya használatára van lehetőség.</span><span class="sxs-lookup"><span data-stu-id="66af3-300">A customer who comes to the store for order pickup has the option to use a different card.</span></span> <span data-ttu-id="66af3-301">Amikor a pénztáros megkapja a **Rendelkezésre álló fizetési mód használata** kérést a rendelés felvételekor, megkérdezheti, hogy a vevő ugyanazt a kártyát kívánja-e használni.</span><span class="sxs-lookup"><span data-stu-id="66af3-301">When the cashier receives the **Use available payment method** prompt at the time of order pickup, he or she can ask whether the customer wants to use the same card.</span></span> <span data-ttu-id="66af3-302">Ha a vevő elvesztette a rendelés létrehozásához használt kártyát, és egy másik kártyával szeretné kifizetni a rendelést, akkor a pénztáros kiválaszthatja **Másik fizetési mód használata** lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="66af3-302">If the customer has lost the card that was used to create the order and wants to pay for the order by using a different card, the cashier can select **Use a different payment method**.</span></span> <span data-ttu-id="66af3-303">Ha a vevő később visszatér, hogy további cikkeket felvegyen ugyanabból a rendelésből, ha az eredeti kártyengedélyezés még érvényes, a pénztáros megkérdezheti, hogy a vevő ugyanazt a kártyát szeretné-e használni.</span><span class="sxs-lookup"><span data-stu-id="66af3-303">If the customer comes back later to pick up more items for the same order, if the original card authorization is still valid, the cashier can again ask whether the customer wants to use that card.</span></span>

### <a name="invalid-authorizations"></a><span data-ttu-id="66af3-304">Érvénytelen engedélyezések</span><span class="sxs-lookup"><span data-stu-id="66af3-304">Invalid authorizations</span></span>

<span data-ttu-id="66af3-305">Ha a rendelés létrehozásához használt kártya már nem érvényes, amikor a termékeket kiválasztják a felvételhez, akkor a kifizetés rögzítési kérelme sikertelen lesz.</span><span class="sxs-lookup"><span data-stu-id="66af3-305">If the card that was used to create an order is no longer valid, when products are selected for pickup, the payment capture request will fail.</span></span> <span data-ttu-id="66af3-306">A pénztár fizetési összekötő megpróbál új engedélyezést létrehozni, és ugyanazokkal a kártyaadatokkal rögzíteni.</span><span class="sxs-lookup"><span data-stu-id="66af3-306">The POS payment connector will then try to create a new authorization and capture by using the same card details.</span></span> <span data-ttu-id="66af3-307">Ha az új engedélyezés vagy a rögzítés meghiúsul, akkor a pénztárost tájékoztatja a rendszer, hogy a kifizetést nem sikerült feldolgozni.</span><span class="sxs-lookup"><span data-stu-id="66af3-307">If the new authorization or capture fails, the cashier will be informed that the payment could not be processed.</span></span> <span data-ttu-id="66af3-308">Ezután a pénztárosnak új kifizetést kell kérnie a vevőtől.</span><span class="sxs-lookup"><span data-stu-id="66af3-308">The cashier must then get a new payment from the customer.</span></span> 

### <a name="multiple-available-payments"></a><span data-ttu-id="66af3-309">Több elérhető fizetés</span><span class="sxs-lookup"><span data-stu-id="66af3-309">Multiple available payments</span></span>

<span data-ttu-id="66af3-310">Ha egy olyan rendelést, amelynél több fizetőeszköz és több sor van felvéve, akkor a pénztárosnak először a **Rendelkezésre álló fizetési mód használata** figyelmeztetés jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="66af3-310">When an order that has multiple tenders and multiple lines is picked up, the cashier first receives the **Use available payment method** prompt.</span></span> <span data-ttu-id="66af3-311">Ha több kártya van, amikor a pénztáros kiválasztja a **Rendelkezésre álló fizetési mód használata** pontot, akkor a program addig rögzíti a meglévő fizetőeszköz-sorokat, amíg az aktuálisan felvett cikkek egyenlege nem teljesül.</span><span class="sxs-lookup"><span data-stu-id="66af3-311">If there are multiple cards, when the cashier selects **Use available payment method**, existing card tender lines will be captured until the balance is met for the goods that are currently being picked up.</span></span> <span data-ttu-id="66af3-312">A pénztárosnak nem lesz lehetősége kijelölni azt a kártyát, amelyet a felvett áruknál használni kell.</span><span class="sxs-lookup"><span data-stu-id="66af3-312">The cashier won't have the option to select the card that should be used for the goods that are being picked up.</span></span> 

## <a name="related-topics"></a><span data-ttu-id="66af3-313">Kapcsolódó témakörök</span><span class="sxs-lookup"><span data-stu-id="66af3-313">Related topics</span></span>

- [<span data-ttu-id="66af3-314">Kifizetésekkel kapcsolatos GYIK</span><span class="sxs-lookup"><span data-stu-id="66af3-314">Payments FAQ</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/payments-retail)
- [<span data-ttu-id="66af3-315">Dynamics 365 fizetési összekötő az Adyen szolgáltatáshoz</span><span class="sxs-lookup"><span data-stu-id="66af3-315">Dynamics 365 Payment Connector for Adyen</span></span>](https://docs.microsoft.com/dynamics365/unified-operations/retail/dev-itpro/adyen-connector?tabs=8-1-3)
- [<span data-ttu-id="66af3-316">BOPIS konfigurálása Dynamics 365 Commerce értékelési környezetben</span><span class="sxs-lookup"><span data-stu-id="66af3-316">Configure BOPIS in a Dynamics 365 Commerce evaluation environment</span></span>](https://docs.microsoft.com/dynamics365/commerce/cpe-bopis)

