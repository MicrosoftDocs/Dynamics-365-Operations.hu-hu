---
title: Gépi tanulási modellek eredményei (előzetes verzió)
description: Ez a témakör a zavartság-mátrixokat, az osztályzási problémákat és a gépi tanulási (ML) modellek pontosságát tárgyalja. Az a cél, hogy jobban megértsék az ML előrejelzési eredményeinek pontosságát.
author: ShivamPandey-msft
ms.date: 06/03/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: roschlom
ms.custom: 14151
ms.assetid: 3d43ba40-780c-459a-a66f-9a01d556e674
ms.search.region: Global
ms.author: shpandey
ms.search.validFrom: 2020-07-14
ms.dyn365.ops.version: AX 10.0.12
ms.openlocfilehash: fe652c32df9417f0f716242a24a26eabd1a16f65
ms.sourcegitcommit: 74e47075eab2b0b28f82b0d57f439719847ecb01
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 06/07/2021
ms.locfileid: "6193540"
---
# <a name="results-of-machine-learning-models-preview"></a><span data-ttu-id="97a37-104">Gépi tanulási modellek eredményei (előzetes verzió)</span><span class="sxs-lookup"><span data-stu-id="97a37-104">Results of machine learning models (preview)</span></span>

[!include [banner](../includes/banner.md)]
[!include [preview banner](../includes/preview-banner.md)]

<span data-ttu-id="97a37-105">Ez a témakör a zavartság-mátrixokat, az osztályzási problémákat és a gépi tanulási (ML) modellek pontosságát tárgyalja.</span><span class="sxs-lookup"><span data-stu-id="97a37-105">This topic discusses confusion matrices, classification problems, and accuracy in machine learning (ML) models.</span></span> <span data-ttu-id="97a37-106">Az a cél, hogy jobban megértsék az ML előrejelzési eredményeinek pontosságát.</span><span class="sxs-lookup"><span data-stu-id="97a37-106">The purpose is to enhance your understanding of accuracy in ML prediction results.</span></span> <span data-ttu-id="97a37-107">A célközönség olyan mérnökök, elemzők és vezetők, akik szeretnék fejleszteni tudásukat és szakértelmüket az adattudomány terén.</span><span class="sxs-lookup"><span data-stu-id="97a37-107">The target audience includes engineers, analysts, and managers who want to build their knowledge and skills in data science.</span></span>

## <a name="confusion-matrix"></a><span data-ttu-id="97a37-108">Zavartság-mátrix</span><span class="sxs-lookup"><span data-stu-id="97a37-108">Confusion matrix</span></span>
<span data-ttu-id="97a37-109">Miután a felügyelt ML-es problémát az előzményadatok egy csoportján képezik, a teszt a képzési folyamatból visszatartott adatok alapján történik.</span><span class="sxs-lookup"><span data-stu-id="97a37-109">After a supervised ML problem is trained on a set of historical data, it's tested by using data that is withheld from the training process.</span></span> <span data-ttu-id="97a37-110">Így összevetheti a képzett modell előrejelzéseit a tényleges értékekkel.</span><span class="sxs-lookup"><span data-stu-id="97a37-110">In this way, you can compare the predictions from the trained model with the actual values.</span></span> <span data-ttu-id="97a37-111">A zavartság-mátrix meghatározza, hogy milyen sikeresek az osztályozási problémák, és hogy hol vét hibákat (azaz hol „zavaros”).</span><span class="sxs-lookup"><span data-stu-id="97a37-111">The confusion matrix provides a means of evaluating how successful a classification problem is and where it makes mistakes (that is, where it becomes "confused").</span></span>

<span data-ttu-id="97a37-112">Például az a cél, hogy valamilyen fizikai és viselkedési tulajdonság alapján megjósolja, hogy egy adott állat éppen kutya vagy macska.</span><span class="sxs-lookup"><span data-stu-id="97a37-112">For example, your objective is to predict whether a pet is a dog or a cat, based on some physical and behavioral attributes.</span></span> <span data-ttu-id="97a37-113">Ha van egy tesztadathalmaz, ami 30 kutyát és 20 macskát tartalmaz, akkor a zavartság-mátrix a következő illusztrációra hasonlíthat.</span><span class="sxs-lookup"><span data-stu-id="97a37-113">If you have a test dataset that contains 30 dogs and 20 cats, the confusion matrix might resemble the following illustration.</span></span>

![Példa a fajok előrejelzésére](media/species-prediction-matrix.png)

<span data-ttu-id="97a37-115">A zöld cellákban szereplő számok helyes előrejelzéseket jelentenek.</span><span class="sxs-lookup"><span data-stu-id="97a37-115">The numbers in the green cells represent correct predictions.</span></span> <span data-ttu-id="97a37-116">Amint látható, a modell a tényleges macskák számánál magasabb százalékban jósolt helyesen macskákat.</span><span class="sxs-lookup"><span data-stu-id="97a37-116">As you can see, the model predicted a higher percentage of the actual cats correctly.</span></span> <span data-ttu-id="97a37-117">A modell teljes pontossága könnyen kiszámítható.</span><span class="sxs-lookup"><span data-stu-id="97a37-117">The overall accuracy of the model is easy to calculate.</span></span> <span data-ttu-id="97a37-118">Ebben az esetben 42 ÷ 50 vagy 0,84.</span><span class="sxs-lookup"><span data-stu-id="97a37-118">In this case, it's 42 ÷ 50, or 0.84.</span></span>

### <a name="multi-class-classifiers-in-a-confusion-matrix"></a><span data-ttu-id="97a37-119">Többosztályos osztályozók a zavartság-mátrixban</span><span class="sxs-lookup"><span data-stu-id="97a37-119">Multi-class classifiers in a confusion matrix</span></span>

<span data-ttu-id="97a37-120">A zavartság-mátrixra vonatkozó legtöbb vitát a bináris osztályozók határozzák meg, mint az előző példában.</span><span class="sxs-lookup"><span data-stu-id="97a37-120">Most discussions about the confusion matrix are focused on binary classifiers, as in the preceding example.</span></span> <span data-ttu-id="97a37-121">Ez egy olyan speciális eset, amikor más metrikák is megtekinthetők, például az érzékenység és a visszahívás.</span><span class="sxs-lookup"><span data-stu-id="97a37-121">This case is a special case where other metrics can be considered, such as sensitivity and recall.</span></span>

<span data-ttu-id="97a37-122">Ezután fontolóra vesszük egy olyan finanszírozási eset osztályozási problémáját, amelynek három szakasza van.</span><span class="sxs-lookup"><span data-stu-id="97a37-122">Next, we will consider a classification problem for a finance scenario that has three states.</span></span> <span data-ttu-id="97a37-123">A modell azt jelzi, hogy a vevői számlát időben, késve vagy nagyon későn fizetik ki.</span><span class="sxs-lookup"><span data-stu-id="97a37-123">The model predicts whether a customer invoice will be paid on time, late, or very late.</span></span> <span data-ttu-id="97a37-124">Például a 100 tesztszámlából 50 kerül kifizetésre időben, 35 későn, 15 pedig nagyon későn.</span><span class="sxs-lookup"><span data-stu-id="97a37-124">For example, out of 100 test invoices, 50 are paid on time, 35 are paid late, and 15 are paid very late.</span></span> <span data-ttu-id="97a37-125">Ebben az esetben előfordulhat, hogy egy modell zavartság-mátrixot hoz létre, amely a következő illusztrációhoz hasonlít.</span><span class="sxs-lookup"><span data-stu-id="97a37-125">In this case, a model might produce a confusion matrix that resembles the following illustration.</span></span>

![1. modell](media/payment-prediction-matrix.png)<span data-ttu-id="97a37-127">]</span><span class="sxs-lookup"><span data-stu-id="97a37-127">]</span></span>

<span data-ttu-id="97a37-128">A zavartság-mátrix jóval több adatot tartalmaz, mint egy egyszerű pontossági metrika.</span><span class="sxs-lookup"><span data-stu-id="97a37-128">A confusion matrix provides significantly more information than a simple accuracy metric.</span></span> <span data-ttu-id="97a37-129">Ezt azonban aránylag könnyű megérteni.</span><span class="sxs-lookup"><span data-stu-id="97a37-129">However, it's still relatively easy to understand.</span></span> <span data-ttu-id="97a37-130">A zavartság-mátrix azt jelzi, hogy van-e olyan kiegyensúlyozott adathalmaz, amelyben a kimeneti osztályok hasonló számokkal rendelkeznek.</span><span class="sxs-lookup"><span data-stu-id="97a37-130">A confusion matrix tells you whether you have a balanced dataset where the output classes have similar counts.</span></span> <span data-ttu-id="97a37-131">A többosztályos forgatókönyv azt jelzi, hogy milyen messze van az előrejelzés, ha a kimeneti osztályok sorban vannak, mint a vevői kifizetésekkel kapcsolatos előző példában.</span><span class="sxs-lookup"><span data-stu-id="97a37-131">For the multi-class scenario, it tells you how far off a prediction might be when the output classes are ordinal, as in the preceding example about customer payments.</span></span>

## <a name="model-accuracy"></a><span data-ttu-id="97a37-132">Modell pontossága</span><span class="sxs-lookup"><span data-stu-id="97a37-132">Model accuracy</span></span> 
<span data-ttu-id="97a37-133">A különböző pontossági metrikák előnye, hogy számszerűsítik a modell minőségét.</span><span class="sxs-lookup"><span data-stu-id="97a37-133">Different accuracy metrics have the advantage of quantifying the model quality.</span></span> 

<span data-ttu-id="97a37-134">Mivel a pontosság egy könnyű metrika, így jó kiindulási pont, amellyel elmagyarázható a modell más személyek számára, különösen azoknak a modelleknek a felhasználói számára, akik nem adatszakértők.</span><span class="sxs-lookup"><span data-stu-id="97a37-134">Because accuracy is an easy metric to understand, it's a good starting point for explaining a model to other people, especially to users of the model who aren't data scientists.</span></span> <span data-ttu-id="97a37-135">A modell pontosságának megértéséhez nem szükséges a statisztikai adatok megértése.</span><span class="sxs-lookup"><span data-stu-id="97a37-135">No understanding of statistics is required to understand the model's accuracy.</span></span> <span data-ttu-id="97a37-136">Ha rendelkezésre áll egy zavartság-mátrix, további betekintést nyújt a modell teljesítményéhez.</span><span class="sxs-lookup"><span data-stu-id="97a37-136">When a confusion matrix is available, it provides further insight into the model's performance.</span></span>

<span data-ttu-id="97a37-137">Alaposabb megértés érdekében azonban több, a pontossághoz kapcsolódó kihívást kell megfigyelni.</span><span class="sxs-lookup"><span data-stu-id="97a37-137">However, for a more thorough understanding, several challenges that are associated with accuracy should be noted.</span></span> <span data-ttu-id="97a37-138">A metrika hasznossága a probléma környezetén múlik.</span><span class="sxs-lookup"><span data-stu-id="97a37-138">The usefulness of the metric depends on the context of the problem.</span></span> <span data-ttu-id="97a37-139">A modell teljesítményével kapcsolatban gyakran felmerülő kérdés: „Mennyire jó a modell?”</span><span class="sxs-lookup"><span data-stu-id="97a37-139">A question that often arises in relation to model performance is, "How good is the model?"</span></span> <span data-ttu-id="97a37-140">Erre a kérdésre azonban nem feltétlenül egyszerű a válasz.</span><span class="sxs-lookup"><span data-stu-id="97a37-140">However, the answer to this question isn't necessarily straightforward.</span></span> <span data-ttu-id="97a37-141">Vegye figyelembe a következő zavartság-mátrixot (2. modell).</span><span class="sxs-lookup"><span data-stu-id="97a37-141">Consider the following confusion matrix (model 2).</span></span>

![Fizetési előrejelzési példa nagyobb mintával](media/payment-prediction-matrix-2.png)

<span data-ttu-id="97a37-143">Egy gyors számítás azt jelzi, hogy a modell pontossága (70 + 10 + 3) ÷ 100 vagy 0,83.</span><span class="sxs-lookup"><span data-stu-id="97a37-143">A quick calculation shows that this model's accuracy is (70 + 10 + 3) ÷ 100, or 0.83.</span></span> <span data-ttu-id="97a37-144">A felszínen ez az eredmény jobbnak tűnik, mint az előző többosztályos modell (1. modell) eredménye, amelynek pontossága 0,73.</span><span class="sxs-lookup"><span data-stu-id="97a37-144">On the surface, this result seems better than result for the previous multi-class model (model 1), which has an accuracy of 0.73.</span></span> <span data-ttu-id="97a37-145">De jobb-e?</span><span class="sxs-lookup"><span data-stu-id="97a37-145">But is it better?</span></span>

<span data-ttu-id="97a37-146">A kérdés elkezdéséhez a naiv becslés pontosságát kell figyelembe venni.</span><span class="sxs-lookup"><span data-stu-id="97a37-146">To begin to address this question, consider the accuracy of a naïve guess.</span></span> <span data-ttu-id="97a37-147">Az osztályozási probléma esetében az egyszerű becslés mindig a legáltalánosabb osztályt fogja megjósolni.</span><span class="sxs-lookup"><span data-stu-id="97a37-147">For a classification problem, a simple guess will always predict the most common class.</span></span> <span data-ttu-id="97a37-148">Az 1. modell esetében a becslés „időben”, és 0,50 pontossággal fog elkészülni.</span><span class="sxs-lookup"><span data-stu-id="97a37-148">For model 1, that guess will be "on time," and it will produce an accuracy of 0.50.</span></span> <span data-ttu-id="97a37-149">A 2. modell esetében is „időben” lesz a becslés, és 0,80 pontossággal fog elkészülni.</span><span class="sxs-lookup"><span data-stu-id="97a37-149">The guess for model 2 will also be "on time," and it will produce an accuracy of 0.80.</span></span> <span data-ttu-id="97a37-150">Mivel az 1. modell tökéletesíti a naiv becslést 0,73 – 0,50 = 0,23-mal, míg a 2. modell tökéletesíti a naiv becslést a 0,83 – 0,80 = 0,03-mal, az 1. modell egy jobb modell, még akkor is, ha kisebb a pontossága.</span><span class="sxs-lookup"><span data-stu-id="97a37-150">Because model 1 improves on the naïve guess by 0.73 – 0.50 = 0.23, whereas model 2 improves on the naïve guess by 0.83 – 0.80 = 0.03, model 1 is a better model, even though it has lower accuracy.</span></span> <span data-ttu-id="97a37-151">A számítás azt mutatja, hogy a modell minőségi értékelésének a pontossági értéknél nagyobbnak kell lennie.</span><span class="sxs-lookup"><span data-stu-id="97a37-151">The calculation reveals that effective assessment of a model's quality requires more context than the accuracy value.</span></span>

<span data-ttu-id="97a37-152">Egy másik szempontot is érdemes megjegyezni.</span><span class="sxs-lookup"><span data-stu-id="97a37-152">Another aspect is worth noting.</span></span> <span data-ttu-id="97a37-153">Gondoljon egy olyan forgatókönyvre, amikor egy orvosi tesztet használnak egy páciens betegségének kimutatására.</span><span class="sxs-lookup"><span data-stu-id="97a37-153">Consider a scenario where a medical test is used to detect a disease in a patient.</span></span> <span data-ttu-id="97a37-154">Ez a probléma egy bináris besorolási probléma, ahol a pozitív eredmény azt jelzi, hogy a páciens beteg.</span><span class="sxs-lookup"><span data-stu-id="97a37-154">This problem is a binary classification problem where a positive result indicates that the patient has the disease.</span></span> <span data-ttu-id="97a37-155">Ebben a forgatókönyvben a következő hibák hatásait kell megfontolni:</span><span class="sxs-lookup"><span data-stu-id="97a37-155">In this scenario, you must think about the impact of the following errors:</span></span>

- <span data-ttu-id="97a37-156">Hamis pozitív, amikor a teszt azt mutatja, hogy a páciens beteg, de valójában nem is az.</span><span class="sxs-lookup"><span data-stu-id="97a37-156">False positives, where the test says that a patient has the disease, but the patient doesn't really have it.</span></span>
- <span data-ttu-id="97a37-157">Hamis negatív, amikor a teszt azt mutatja, hogy a páciens nem beteg, de valójában az.</span><span class="sxs-lookup"><span data-stu-id="97a37-157">False negatives, where the test says that a patient doesn't have the disease, but the patient really does have it.</span></span>

<span data-ttu-id="97a37-158">Nyilvánvalóan egy típusú hiba sem kívánatos, de melyik a rosszabb?</span><span class="sxs-lookup"><span data-stu-id="97a37-158">Obviously, both types of error are undesirable, but which is worse?</span></span> <span data-ttu-id="97a37-159">Ez ismét a helyzettől függ.</span><span class="sxs-lookup"><span data-stu-id="97a37-159">Again, it depends.</span></span> <span data-ttu-id="97a37-160">Abban az esetben, ha egy életveszélyes betegség gyors kezelést igényel, a hamis negatívok minimalizálása (remélhetőleg további teszteket is elvégeznek) élvez prioritást.</span><span class="sxs-lookup"><span data-stu-id="97a37-160">In the case of a life-threatening disease that requires fast treatment, minimization of false negatives (hopefully followed by additional tests) takes priority.</span></span> <span data-ttu-id="97a37-161">Más, kevésbé kritikus helyzetek esetén a modell létrehozói csökkenthetik a hamis pozitív értéket.</span><span class="sxs-lookup"><span data-stu-id="97a37-161">In other, less critical situations, the model creators might minimize false positives instead.</span></span> <span data-ttu-id="97a37-162">Egy észszerű következtetés szerint a modell minőségi meghatározásához több információra van szükség, mint a pontossági metrika.</span><span class="sxs-lookup"><span data-stu-id="97a37-162">At any rate, a reasonable conclusion is that to effectively determine a model's quality, you must have more information than an accuracy metric provides.</span></span>

### <a name="recommendations"></a><span data-ttu-id="97a37-163">Javaslatok</span><span class="sxs-lookup"><span data-stu-id="97a37-163">Recommendations</span></span>

<span data-ttu-id="97a37-164">A pontosság fontos eszköz a statisztikai adatokat nem ismerő tartományszakértőkkel történő kommunikációra.</span><span class="sxs-lookup"><span data-stu-id="97a37-164">Accuracy is an important tool for communicating with domain experts who aren't familiar with statistics.</span></span> <span data-ttu-id="97a37-165">Ahhoz azonban, hogy az adatok hasznosak legyenek, kritikus, hogy a pontossági értékkel együtt további kontextust biztosítsanak.</span><span class="sxs-lookup"><span data-stu-id="97a37-165">However, to make the information useful, it's critical that additional context be provided together with the accuracy value.</span></span>

<span data-ttu-id="97a37-166">A kifizetés előrejelzési esetéhez beállíthatja egy ML-modell célt, amely tényezőket tartalmaz a különböző fizetési módokban.</span><span class="sxs-lookup"><span data-stu-id="97a37-166">For the payment prediction scenario, you can set a target for the ML model that includes factors in different payment behaviors.</span></span> <span data-ttu-id="97a37-167">A cél az, hogy a modell tökéletesítse a naiv becslést a helytelen válaszok számának legalább 50 százalékos csökkentésével.</span><span class="sxs-lookup"><span data-stu-id="97a37-167">The target is that the model should improve upon a naïve guess by reducing the number of incorrect answers by at least 50 percent.</span></span> <span data-ttu-id="97a37-168">Más szóval azt szeretné, hogy a cél pontossága elossza a különböző pontosságot a naiv becslés és a 100 százalék között.</span><span class="sxs-lookup"><span data-stu-id="97a37-168">In other words, you want a target accuracy that splits the different between the accuracy of a naïve guess and 100 percent.</span></span>

<span data-ttu-id="97a37-169">A következő tábla összefoglalja ezt az elvet a zavartság-mátrixok számára ebben a témában.</span><span class="sxs-lookup"><span data-stu-id="97a37-169">The following table summarizes this principle for the confusion matrices in this topic.</span></span>

| <span data-ttu-id="97a37-170">Típus</span><span class="sxs-lookup"><span data-stu-id="97a37-170">Model</span></span>   | <span data-ttu-id="97a37-171">Naiv becslés</span><span class="sxs-lookup"><span data-stu-id="97a37-171">Naïve guess</span></span> | <span data-ttu-id="97a37-172">Cél</span><span class="sxs-lookup"><span data-stu-id="97a37-172">Target</span></span> | <span data-ttu-id="97a37-173">Modell pontossága</span><span class="sxs-lookup"><span data-stu-id="97a37-173">Model accuracy</span></span> | <span data-ttu-id="97a37-174">Megfelel a célnak?</span><span class="sxs-lookup"><span data-stu-id="97a37-174">Is the goal met?</span></span>                                          |
|---------|-------------|--------|----------------|-----------------------------------------------------------|
| <span data-ttu-id="97a37-175">1. modell</span><span class="sxs-lookup"><span data-stu-id="97a37-175">Model 1</span></span> | <span data-ttu-id="97a37-176">0.50</span><span class="sxs-lookup"><span data-stu-id="97a37-176">0.50</span></span>        | <span data-ttu-id="97a37-177">0.75</span><span class="sxs-lookup"><span data-stu-id="97a37-177">0.75</span></span>   | <span data-ttu-id="97a37-178">0.73</span><span class="sxs-lookup"><span data-stu-id="97a37-178">0.73</span></span>           | <span data-ttu-id="97a37-179">Majdnem.</span><span class="sxs-lookup"><span data-stu-id="97a37-179">Almost.</span></span> <span data-ttu-id="97a37-180">Ez a modell jelentősen javítja a becslést.</span><span class="sxs-lookup"><span data-stu-id="97a37-180">This model significantly improves upon the guess.</span></span> |
| <span data-ttu-id="97a37-181">2. modell</span><span class="sxs-lookup"><span data-stu-id="97a37-181">Model 2</span></span> | <span data-ttu-id="97a37-182">0.80</span><span class="sxs-lookup"><span data-stu-id="97a37-182">0.80</span></span>        | <span data-ttu-id="97a37-183">0.90</span><span class="sxs-lookup"><span data-stu-id="97a37-183">0.90</span></span>   | <span data-ttu-id="97a37-184">0.83</span><span class="sxs-lookup"><span data-stu-id="97a37-184">0.83</span></span>           | <span data-ttu-id="97a37-185">Szám</span><span class="sxs-lookup"><span data-stu-id="97a37-185">No.</span></span> <span data-ttu-id="97a37-186">Javításra van szükség.</span><span class="sxs-lookup"><span data-stu-id="97a37-186">Improvement is required.</span></span>                              |

## <a name="classification-f1-accuracy"></a><span data-ttu-id="97a37-187">F1-es osztályozás pontossága</span><span class="sxs-lookup"><span data-stu-id="97a37-187">Classification F1 accuracy</span></span>

<span data-ttu-id="97a37-188">Az ebben a témakörben megjelenő végleges megfontolás egy speciális mértékű ML-teljesítményosztályzás, F1-es pontosságként ismert teljesítmény.</span><span class="sxs-lookup"><span data-stu-id="97a37-188">The final consideration in this topic is a more advanced measure of classification ML performance that is known as F1 accuracy.</span></span>

<span data-ttu-id="97a37-189">Az F1 pontosság meghatározása előtt két további metrikát kell bevezetni: precizitás és visszahívás.</span><span class="sxs-lookup"><span data-stu-id="97a37-189">Before F1 accuracy can be defined, two additional metrics must be introduced: precision and recall.</span></span> <span data-ttu-id="97a37-190">A precizitás azt jelzi, hogy a pozitívként megadott előrejelzések számának hány százalékát rendeli hozzá helyesen a program.</span><span class="sxs-lookup"><span data-stu-id="97a37-190">Precision indicates how many of the total number of predictions that are specified as positive are correctly assigned.</span></span> <span data-ttu-id="97a37-191">Ez a metrika pozitív előrejelző-értékként is ismert.</span><span class="sxs-lookup"><span data-stu-id="97a37-191">This metric is also known as the positive predictive value.</span></span> <span data-ttu-id="97a37-192">A visszahívás azon tényleges pozitív esetek teljes száma, amelyeket helyesen jósoltak meg.</span><span class="sxs-lookup"><span data-stu-id="97a37-192">Recall is the total number of the actual positive cases that were predicted correctly.</span></span> <span data-ttu-id="97a37-193">Ez a metrika más néven érzékenység.</span><span class="sxs-lookup"><span data-stu-id="97a37-193">This metric is also known as sensitivity.</span></span>

<span data-ttu-id="97a37-194">[![Igaz eredmények és hamis eredmények](./media/tn-fn.png)](./media/tn-fn.png)</span><span class="sxs-lookup"><span data-stu-id="97a37-194">[![True results vs. false results](./media/tn-fn.png)](./media/tn-fn.png)</span></span>

<span data-ttu-id="97a37-195">Az előző ábrán látható zavartság-mátrixban a program a következő módon számította ki a metrikákat:</span><span class="sxs-lookup"><span data-stu-id="97a37-195">In the confusion matrix in the preceding illustration, these metrics are calculated in the following way:</span></span>

- <span data-ttu-id="97a37-196">Pontosság = TP ÷ (TP + FP)</span><span class="sxs-lookup"><span data-stu-id="97a37-196">Precision = TP ÷ (TP + FP)</span></span>
- <span data-ttu-id="97a37-197">Visszahívás = TP ÷ (TP + FN)</span><span class="sxs-lookup"><span data-stu-id="97a37-197">Recall = TP ÷ (TP + FN)</span></span>

<span data-ttu-id="97a37-198">Az F1-mérték ötvözi a precizitást és a visszahívást.</span><span class="sxs-lookup"><span data-stu-id="97a37-198">The F1 measure combines precision and recall.</span></span> <span data-ttu-id="97a37-199">Az eredmény a két érték harmonikus átlaga.</span><span class="sxs-lookup"><span data-stu-id="97a37-199">The result is the harmonic mean of the two values.</span></span> <span data-ttu-id="97a37-200">A számítás a következőképpen történik:</span><span class="sxs-lookup"><span data-stu-id="97a37-200">It's calculated in the following way:</span></span>

- <span data-ttu-id="97a37-201">F1 = 2 × (precízió × visszahívás) ÷ (precízió + visszahívás)</span><span class="sxs-lookup"><span data-stu-id="97a37-201">F1 = 2 × (Precision × Recall) ÷ (Precision + Recall)</span></span>

<span data-ttu-id="97a37-202">Nézzünk meg egy konkrét példát.</span><span class="sxs-lookup"><span data-stu-id="97a37-202">Let's look at a concrete example.</span></span> <span data-ttu-id="97a37-203">Ez a témakör korábban egy olyan modellt mutatott be, amely azt jelezte előre, hogy egy állat kutya vagy macska-e.</span><span class="sxs-lookup"><span data-stu-id="97a37-203">Earlier in this topic, there was an example of a model that predicted whether an animal was a dog or a cat.</span></span> <span data-ttu-id="97a37-204">A program itt ismétli meg az ábrát.</span><span class="sxs-lookup"><span data-stu-id="97a37-204">The illustration is repeated here.</span></span>

<span data-ttu-id="97a37-205">[![Példa a fajok előrejelzésére (ismétlés)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span><span class="sxs-lookup"><span data-stu-id="97a37-205">[![Species prediction example (repeated)](./media/species-prediction-matrix.png)](./media/species-prediction-matrix.png)</span></span>

<span data-ttu-id="97a37-206">Ezek az eredmények, ha a „kutya” a pozitív válasz.</span><span class="sxs-lookup"><span data-stu-id="97a37-206">Here are the results if "Dog" is used as the positive answer.</span></span>

- <span data-ttu-id="97a37-207">Pontosság = 24 ÷ (24 + 2) = 0,9231</span><span class="sxs-lookup"><span data-stu-id="97a37-207">Precision = 24 ÷ (24 + 2) = 0.9231</span></span>
- <span data-ttu-id="97a37-208">Visszahívás = 24 ÷ (24 + 6) = 0,8</span><span class="sxs-lookup"><span data-stu-id="97a37-208">Recall = 24 ÷ (24 + 6) = 0.8</span></span>
- <span data-ttu-id="97a37-209">F1 = 2 × (0,9231 × 0,8) ÷ (0,9231 + 0,8) = 0,8572</span><span class="sxs-lookup"><span data-stu-id="97a37-209">F1 = 2 × (0.9231 × 0.8) ÷ (0.9231 + 0.8) = 0.8572</span></span>

<span data-ttu-id="97a37-210">Amint látható, az F1 érték a pontosság és a visszahívás értékei között szerepel.</span><span class="sxs-lookup"><span data-stu-id="97a37-210">As you can see, the F1 value is between the values for precision and recall.</span></span>

<span data-ttu-id="97a37-211">Bár az F1 pontosságát nem könnyű megérteni, árnyaltságot ad az alapszintű pontossági számnak.</span><span class="sxs-lookup"><span data-stu-id="97a37-211">Although F1 accuracy isn't as easy to understand, it adds nuance to the basic accuracy number.</span></span> <span data-ttu-id="97a37-212">Ezenkívül segíthet a kiegyenlítetlen adathalmazok esetében is, ahogy azt a következő beszélgetés is mutatja.</span><span class="sxs-lookup"><span data-stu-id="97a37-212">It can also help with unbalanced datasets, as the following discussion will show.</span></span>

<span data-ttu-id="97a37-213">Ennek a témakörnek a [Modell pontossága](#model-accuracy) szakasza a következő két zavartság-mátrixhoz hasonlít.</span><span class="sxs-lookup"><span data-stu-id="97a37-213">The [Model accuracy](#model-accuracy) section of this topic compared the following two confusion matrices.</span></span> <span data-ttu-id="97a37-214">Annak ellenére, hogy az első modellnél alacsonyabb a pontosság, hasznosabb modellnek tekintették, mivel nagyobb javulást mutatott, mint a határidős fizetés alapértelmezett becslése.</span><span class="sxs-lookup"><span data-stu-id="97a37-214">Even though the first model had lower accuracy, it was deemed a more useful model because it showed more improvement than the default guess of an on-time payment.</span></span>

![Fizetés előrejelzése és a tényleges példa](media/payment-prediction-matrix.png)

![Fizetési előrejelzési példa nagyobb mintával (ismétlés)](media/payment-prediction-matrix-2.png)

<span data-ttu-id="97a37-217">Lássuk, hogyan lehet összehasonlítani ezt a két modellt az F1-es pontszám használatakor.</span><span class="sxs-lookup"><span data-stu-id="97a37-217">Let's see how these two models compare when the F1 score is used.</span></span> <span data-ttu-id="97a37-218">Az F1-es pontszám a pontosság és az egyes állapotok visszahívása, az F1-es makroszámítás pedig az F1-es pontszám átlagát határozza meg az egyes állapotokban az F1-es pontszám átfogó meghatározásához.</span><span class="sxs-lookup"><span data-stu-id="97a37-218">The F1 score factors in precision and recall for each state, and the F1 macro calculation then averages the F1 score across the states to determine an overall F1 score.</span></span> <span data-ttu-id="97a37-219">Más F1-es változatok is léteznek, de érdekesebb a makroverzió megfontolása, alapul véve mindhárom állapotban megadott egyenlő mértékű odafigyelést.</span><span class="sxs-lookup"><span data-stu-id="97a37-219">There are other F1 variants, but it's of greater interest to consider the macro version, given the equal consideration that is given to all three states.</span></span>

<span data-ttu-id="97a37-220">A számítások egyszerűsítése érdekében a mintatömböket úgy építették, hogy megfeleljenek a tényleges és az előrejelzett értékeknek.</span><span class="sxs-lookup"><span data-stu-id="97a37-220">To simplify the calculations, sample arrays were built to match the actual and predicted values.</span></span> <span data-ttu-id="97a37-221">Ezek a tömbök a Pythonban a sklearn metrikáját használják az értékek kiszámításához.</span><span class="sxs-lookup"><span data-stu-id="97a37-221">These arrays used sklearn's metrics library in Python to calculate the values.</span></span> <span data-ttu-id="97a37-222">Az eredmény a következő.</span><span class="sxs-lookup"><span data-stu-id="97a37-222">Here is the result.</span></span>

| <span data-ttu-id="97a37-223">Típus</span><span class="sxs-lookup"><span data-stu-id="97a37-223">Model</span></span>   | <span data-ttu-id="97a37-224">Naiv becslés</span><span class="sxs-lookup"><span data-stu-id="97a37-224">Naive guess</span></span> | <span data-ttu-id="97a37-225">Pontosság</span><span class="sxs-lookup"><span data-stu-id="97a37-225">Accuracy</span></span> | <span data-ttu-id="97a37-226">F1 makró</span><span class="sxs-lookup"><span data-stu-id="97a37-226">F1 macro</span></span> |
|---------|-------------|----------|----------|
| <span data-ttu-id="97a37-227">1. modell</span><span class="sxs-lookup"><span data-stu-id="97a37-227">Model 1</span></span> | <span data-ttu-id="97a37-228">0.5</span><span class="sxs-lookup"><span data-stu-id="97a37-228">0.5</span></span>         | <span data-ttu-id="97a37-229">0.73</span><span class="sxs-lookup"><span data-stu-id="97a37-229">0.73</span></span>     | <span data-ttu-id="97a37-230">0.67</span><span class="sxs-lookup"><span data-stu-id="97a37-230">0.67</span></span>     |
| <span data-ttu-id="97a37-231">2. modell</span><span class="sxs-lookup"><span data-stu-id="97a37-231">Model 2</span></span> | <span data-ttu-id="97a37-232">0.80</span><span class="sxs-lookup"><span data-stu-id="97a37-232">0.80</span></span>        | <span data-ttu-id="97a37-233">0.83</span><span class="sxs-lookup"><span data-stu-id="97a37-233">0.83</span></span>     | <span data-ttu-id="97a37-234">0.66</span><span class="sxs-lookup"><span data-stu-id="97a37-234">0.66</span></span>     |

<span data-ttu-id="97a37-235">A számítás működésével kapcsolatos további részleteket a sklearn.metrics osztályozási jelentés az 1. modellhez részben talál.</span><span class="sxs-lookup"><span data-stu-id="97a37-235">For more detail about how this calculation works, here is the sklearn.metrics classification report for model 1.</span></span> <span data-ttu-id="97a37-236">A három „Időben”, „Későn” és „Nagyon későn” állapotot az 1., 2. és 3. címkével ellátott sorok jelölik.</span><span class="sxs-lookup"><span data-stu-id="97a37-236">The three states, "On time," "Late," and "Very late," are represented by the rows that are labeled 1, 2, and 3, respectively.</span></span> <span data-ttu-id="97a37-237">A makró átlaga csak az „f1-pontszám” oszlop átlaga.</span><span class="sxs-lookup"><span data-stu-id="97a37-237">The macro average is just the average of the "f1-score" column.</span></span>

| &nbsp;    | <span data-ttu-id="97a37-238">pontosság</span><span class="sxs-lookup"><span data-stu-id="97a37-238">precision</span></span> | <span data-ttu-id="97a37-239">visszahívás</span><span class="sxs-lookup"><span data-stu-id="97a37-239">recall</span></span>   | <span data-ttu-id="97a37-240">f1-pontszám</span><span class="sxs-lookup"><span data-stu-id="97a37-240">f1-score</span></span> |
|-----------|-----------|----------|----------|
| <span data-ttu-id="97a37-241">**1**</span><span class="sxs-lookup"><span data-stu-id="97a37-241">**1**</span></span>     | <span data-ttu-id="97a37-242">0.83</span><span class="sxs-lookup"><span data-stu-id="97a37-242">0.83</span></span>      | <span data-ttu-id="97a37-243">0.80</span><span class="sxs-lookup"><span data-stu-id="97a37-243">0.80</span></span>     | <span data-ttu-id="97a37-244">0.82</span><span class="sxs-lookup"><span data-stu-id="97a37-244">0.82</span></span>     |
| <span data-ttu-id="97a37-245">**2**</span><span class="sxs-lookup"><span data-stu-id="97a37-245">**2**</span></span>     | <span data-ttu-id="97a37-246">0.68</span><span class="sxs-lookup"><span data-stu-id="97a37-246">0.68</span></span>      | <span data-ttu-id="97a37-247">0.71</span><span class="sxs-lookup"><span data-stu-id="97a37-247">0.71</span></span>     | <span data-ttu-id="97a37-248">0.69</span><span class="sxs-lookup"><span data-stu-id="97a37-248">0.69</span></span>     |
| <span data-ttu-id="97a37-249">**3**</span><span class="sxs-lookup"><span data-stu-id="97a37-249">**3**</span></span>     | <span data-ttu-id="97a37-250">0.50</span><span class="sxs-lookup"><span data-stu-id="97a37-250">0.50</span></span>      | <span data-ttu-id="97a37-251">0.50</span><span class="sxs-lookup"><span data-stu-id="97a37-251">0.50</span></span>     | <span data-ttu-id="97a37-252">0.50</span><span class="sxs-lookup"><span data-stu-id="97a37-252">0.50</span></span>     |

<span data-ttu-id="97a37-253">Ezek az eredmények azt mutatják, hogy a két modellhez közel azonos F1-es makrópontossági pontszám tartozik.</span><span class="sxs-lookup"><span data-stu-id="97a37-253">As these results show, the two models have nearly identical F1 macro accuracy scores.</span></span> <span data-ttu-id="97a37-254">Ebben és sok más esetben az F1 pontossága jobban jelzi a modell képességeit.</span><span class="sxs-lookup"><span data-stu-id="97a37-254">In this and many other cases, F1 accuracy provides a better indicator of a model's capability.</span></span> <span data-ttu-id="97a37-255">A pontosság érdekében az eredmények értelmezése megköveteli, hogy a modellben figyelembe vegyék a legfontosabb tényezőt.</span><span class="sxs-lookup"><span data-stu-id="97a37-255">As for accuracy, interpretation of the results requires that you understand what is most important to consider in the model.</span></span>

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
