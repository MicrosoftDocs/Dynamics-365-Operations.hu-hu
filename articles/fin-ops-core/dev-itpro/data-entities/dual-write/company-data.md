---
title: Vállalat fogalma a Dataverse szolgáltatásban
description: Ez a témakör a vállalati adatok integrációját ismerteti a Finance and Operations és a Dataverse között.
author: RamaKrishnamoorthy
manager: AnnBe
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 2f0e3950f2b35dd8b8dbf50601b7d6b6d624863e
ms.sourcegitcommit: 659375c4cc7f5524cbf91cf6160f6a410960ac16
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 12/05/2020
ms.locfileid: "4683675"
---
# <a name="company-concept-in-dataverse"></a><span data-ttu-id="aa5d3-103">Vállalat fogalma a Dataverse szolgáltatásban</span><span class="sxs-lookup"><span data-stu-id="aa5d3-103">Company concept in Dataverse</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


<span data-ttu-id="aa5d3-104">A Finance and Operations alkalmazásban a *vállalat* koncepciója egyszerre jogi fogalom és üzleti fogalom.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="aa5d3-105">Mindemellett adatok biztonsági és láthatósági határa is.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="aa5d3-106">A felhasználók mindig egyetlen vállalat kontextusában dolgoznak, és az adatok nagy részét vállalat szerint van kezelve.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="aa5d3-107">A Dataverse nem rendelkezik ezzel egyenértékű koncepcióval.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-107">Dataverse doesn't have an equivalent concept.</span></span> <span data-ttu-id="aa5d3-108">A legközelebbi koncepció a *részleg*, amely elsősorban biztonsági és láthatósági határ a felhasználói adatok számára.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="aa5d3-109">Ez a fogalom nem rendelkezik ugyanazokkal a jogi vagy üzleti vonatkozásokkal, mint a vállalat koncepciója.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="aa5d3-110">Mivel a részleg és a vállalat nem egyenértékű fogalmak, nem lehetséges egy-az-egyhez (1:1) leképzés kényszerítése hozzájuk a Dataverse integráció céljából.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Dataverse integration.</span></span> <span data-ttu-id="aa5d3-111">Mivel azonban a felhasználóknak alapértelmezés szerint meg kell tudniuk tekinteni ugyanazokat a sorokat az alkamazásban és a Dataverse magoldásokban, a Microsoft egy új entitást vezetett be a Dataverse megoldásban, amelynek neve cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-111">However, because users must, by default, be able to see the same rows in the application and Dataverse, Microsoft has introduced a new entity in Dataverse that is named cdm\_Company.</span></span> <span data-ttu-id="aa5d3-112">Ez az entitás egyenértékű a Vállalat entitással az alkalmazásban.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-112">This entity is equivalent to the Company entity in the application.</span></span> <span data-ttu-id="aa5d3-113">Annak garantálására, hogy a sorok láthatósága alapértelmezetten megegyezzen az alkalmazás és a Dataverse között, a következő beállításokat javasoljuk a Dataverse adatai számára:</span><span class="sxs-lookup"><span data-stu-id="aa5d3-113">To help guarantee that visibility of rows is equivalent between the application and Dataverse out of the box, we recommend the following setup for data in Dataverse:</span></span>

+ <span data-ttu-id="aa5d3-114">Minden egyes kettős írási lehetőséget engedélyező Finance and Operations Vállalati sorhoz legyen létrehozva egy társított cdm\_Company sor.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-114">For each Finance and Operations Company row that is enabled for dual-write, an associated cdm\_Company row is created.</span></span>
+ <span data-ttu-id="aa5d3-115">Egy cdm\_Company sor létrehozásakor és a kettős írás engedélyezésekor egy alapértelmezett részleg jön létre ugyanazzal a névvel.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-115">When a cdm\_Company row is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="aa5d3-116">Bár a részleghez automatikusan létrejön egy alapértelmezett csoport, a részleg nincs használatban.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="aa5d3-117">Olyan különálló tulajdonoscsapat jön létre, amelynek neve azonos.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="aa5d3-118">Ez is hozzá van rendelve a részleghez.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="aa5d3-119">Alapértelmezés szerint az alkalmazásban létrehozott, és a Dataverse szolgáltatásban duplán írt sorok tulajdonosa a hozzárendelt részleghez kapcsolódó „DW Owner” csoport.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-119">By default, the owner of any row that is created and dual-written to Dataverse is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="aa5d3-120">A következő ábrán egy példa látható az ilyen típusú adatbeállításra a Dataverse megoldásban.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-120">The following illustration shows an example of this data setup in Dataverse.</span></span>

![Adatok beállítása a Dataverse megoldásban](media/dual-write-company-1.png)

<span data-ttu-id="aa5d3-122">Ezen konfigurációnak az következtében az USMF vállalathoz kapcsolódó minden sor egy olyan csapat tulajdonában lesz, amely a be Dataverse USMF részlegéhez van csatolva.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-122">Because of this configuration, any row that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Dataverse.</span></span> <span data-ttu-id="aa5d3-123">Emiatt azok a felhasználók, akik a részleghez egy részlegszintű láthatóságra beállított biztonsági szerepkörön keresztül férnek hozzá, most már láthatják ezeket a sorokat.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those rows.</span></span> <span data-ttu-id="aa5d3-124">A következő példa bemutatja, hogyan használhatók a csapatok ezen sorok helyes elérésére.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-124">The following example shows how teams can be used to provide the correct access to those rows.</span></span>

+ <span data-ttu-id="aa5d3-125">Az „Értékesítési menedzser” szerepkört a "„USMF Sales” csoport tagjaihoz rendelték.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="aa5d3-126">Azok a felhasználók, akik rendelkeznek az „Értékesítési menedzser” szerepkörrel, hozzáférhetnek minden olyan partnersorhoz, amelyek ugyanannak a részlegnek a tagjai, amelynek ők is.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-126">Users who have the "Sales Manager" role can access any account rows that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="aa5d3-127">Az „USMF Sales” csapat s kapcsolva van az USMF üzleti egységhez, amely korábban említettünk.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="aa5d3-128">Ezért az „USMF Sales” csapat tagjai láthatnak a „USMF DW” felhasználói által birtokolt bármely olyan fiókot, amely a Finance and Operations USMF vállalati entitásából származik.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company entity in Finance and Operations.</span></span>

![Hogyan használhatók a csapatok](media/dual-write-company-2.png)

<span data-ttu-id="aa5d3-130">Ahogy az előző ábrán is látható, ez a 1:1 leképezés az üzleti egység, a vállalat és a csapat között csak egy kiindulási pont.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="aa5d3-131">Ebben a példában egy új „Európa” nevű részleg manuálisan lett létrehozva a Dataverse szolgáltatásban mint DEMF és ESMF szülője.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-131">In this example, a new "Europe" business unit is manually created in Dataverse as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="aa5d3-132">Ez az új gyökérszintű részleg nem kapcsolódik kettős íráshoz.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="aa5d3-133">Ugyanakkor használható arra, hogy az „EUR Sales” csapat hozzáférhessen a partneradatokhoz a DEMF és az ESMF rekordokban is, azáltal, hogy az adatok láthatóságát **Szülő/gyermek részleg** értékre állítják a társított biztosági szerepkörben.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="aa5d3-134">Egy utolsó témában ismertetjük, hogyan határozza meg a lettős írás, hogy melyik tulajdonoshoz rendelje hozzá a sorokat.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-134">A final topic to discuss is how dual-write determines which owner team it should assign rows to.</span></span> <span data-ttu-id="aa5d3-135">Ezt a viselkedés az **Alapértelmezett tulajdonoscsoport** mező szabályozza a cdm\_Vállalat sorban.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-135">This behavior is controlled by the **Default owning team** field on the cdm\_Company row.</span></span> <span data-ttu-id="aa5d3-136">Ha egy cdm\_Vállalat sorhoz a kettős írás engedélyezve van, egy beépülő modul automatikusan létrehozza a hozzárendelt üzleti egységet és a tulajdonos csoportot (ha még nem létezik), és beállítja az **Alapértelmezett tulajdonosi csapat** mezőt.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-136">When a cdm\_Company row is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** field.</span></span> <span data-ttu-id="aa5d3-137">Az adminisztrátor megváltoztathatja ezt a mezőt egy másik értékre.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-137">The admin can change this field to a different value.</span></span> <span data-ttu-id="aa5d3-138">Azonban az adminisztrátor nem törölheti ezt a mezőt, amíg az entitiás engedélyezve van kettős íráshoz.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-138">However, the admin can't clear the field as long as the entity is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="aa5d3-139">![Alapértelmezett tulajdonosi csoport mező](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="aa5d3-139">![Default owning team field](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="aa5d3-140">Cég adatcsíkozása és rendszerindítás</span><span class="sxs-lookup"><span data-stu-id="aa5d3-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="aa5d3-141">A Dataverse-integráció vállalati azonosító segítségével létre a vállalatok paritását az adatcsíkozáshoz.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-141">Dataverse integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="aa5d3-142">Amint az alábbi ábrán látható, minden vállalatspecifikus tábla ki lesz bővítve úgy, hogy egy több-az-egyhez (N:1) kapcsolata lesz a CDM\_Companí entitással.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-142">As the following illustration shows, all company-specific tables are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company entity.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="aa5d3-143">![N:1 kapcsolat a vállalatspecifikus entitás és a cdm_Company entitás között](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="aa5d3-143">![N:1 relationship between a company-specific entity and the cdm_Company entity](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="aa5d3-144">A sorok esetében a vállalat hozzáadása és mentése után az érték írásvédett lesz.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-144">For rows, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="aa5d3-145">Ezért a felhasználóknak meg kell győződniük arról, hogy a megfelelő vállalatot választják ki.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="aa5d3-146">Csak a vállalati adatokat tartalmazó sorok alkalmasak az alkalmazás és a Dataverse közötti kettős írásra.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-146">Only rows that have company data are eligible for dual-write between the application and Dataverse.</span></span>
+ <span data-ttu-id="aa5d3-147">Meglévő Dataverse adatokhoz egy adminisztrátor által kezelt bootstrapping-élmény is hamarosan elérhető lesz.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-147">For existing Dataverse data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="aa5d3-148">Vállalat nevének automatikusan történő kitöltése az ügyfélkapcsolati alkalmazásokban</span><span class="sxs-lookup"><span data-stu-id="aa5d3-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="aa5d3-149">Számos módja van annak, hogy a vállalat nevét az ügyfélkapcsolati alkalmazásokban automatikusan kitöltsék.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="aa5d3-150">Ha Ön rendszergazda, akkor az alapértelmezett vállalat beállítható úgy, hogy megnyitja a **Speciális beállítások > Rendszer > Biztonság > Felhasználók** menüpontot.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="aa5d3-151">Nyissa meg a **Felhasználó** űrlapot, és a **Szervezet adatai** szakaszban adja állíts be az **Alapértelmezett vállalat használata az űrlapokon** értékét.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Alapértelmezett vállalat beállítása a szervezet adatai szakaszhoz.":::

+ <span data-ttu-id="aa5d3-153">Ha **Írás** jogosultsággal rendelkezik a **SystemUser** entitáshoz az **Üzleti egység** szintjén, akkor bármilyen űrlapon módosíthatja az alapértelmezett vállalatot, ha a **Vállalat** legördülő menüből kiválasztja a vállalatot.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-153">If you have **Write** access to the **SystemUser** entity for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="A vállalat nevének módosítása egy új partneren.":::

+ <span data-ttu-id="aa5d3-155">Ha egynél több vállalat adataihoz rendelkezik **Írás** hozzáféréssel, akkor egy másik vállalathoz tartozó sor kiválasztásával is módosíthatja az alapértelmezett vállalatot.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a row that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="A sor kiválasztása megváltoztatja az alapértelmezett vállalatot.":::

+ <span data-ttu-id="aa5d3-157">Ha Ön rendszerkonfiguráló vagy egy rendszergazda, és a vállalat adatait egy egyéni űrlapon szeretné automatikusan kitölteni, akkor használhatja az [űrlapesemények](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids) lehetőséget.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="aa5d3-158">Adjon hozzá JavaScript-hivatkozást az **msdyn_/DefaultCompany.js** elemhez, és használja a következő eseményeket.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="aa5d3-159">Használhatja az összes beépített űrlapot is, például a **Partner** űrlapot.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="aa5d3-160">**OnLoad** esemény az űrlaphoz: Állítsa be a **defaultCompany** mezőt.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-160">**OnLoad** event for the form: Set the **defaultCompany** field.</span></span>
    + <span data-ttu-id="aa5d3-161">**OnChange** esemény a **Vállalat** mezőhöz: Állítsa be az **updateDefaultCompany** mezőt.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-161">**OnChange** event for the **Company** field: Set the **updateDefaultCompany** field.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="aa5d3-162">Szűrés alkalmazása a vállalat kontextusa alapján</span><span class="sxs-lookup"><span data-stu-id="aa5d3-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="aa5d3-163">Ha azt szeretné, hogy az egyéni űrlapokon vagy egyéni keresési mezőkben megadott vállalati környezet alapján történjen a szűrés, nyissa meg az űrlapot, és használja a **Kapcsolódó rekordok szűrése** szakaszt a vállalati szűrő alkalmazásához.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-163">To apply filtering based on the company context on your custom forms or on custom lookup fields added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="aa5d3-164">Ezt minden olyan keresési mező esetében be kell állítania, amelyhez szűrés szükséges a mögöttes vállalat alapján egy adott sornál.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-164">You must set this for each lookup field that requires filtering based on the underlying company on a given row.</span></span> <span data-ttu-id="aa5d3-165">A beállítás a következő ábrán látható a **Partnerhez** jelenik meg.</span><span class="sxs-lookup"><span data-stu-id="aa5d3-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Vállalati környezet alkalmazása":::

