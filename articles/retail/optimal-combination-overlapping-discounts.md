---
title: "Átfedő kedvezmények optimális kombinációjának meghatározása"
description: "Átfedő kedvezmények esetén meg kell határozni az egymást átfedő kedvezmények azon kombinációját, amely a legalacsonyabb tranzakciós végösszeget vagy a legnagyobb összes engedményt eredményezi. Ha az engedmény összege a vásárolt termékek ára szerint változik, például a kiskereskedelmben gyakori „1 vásárlása esetén 1 X százalék engedmény” esetén ez a folyamat kombinatorikai optimalizálási problémává válik."
author: kfend
manager: AnnBe
ms.date: 06/20/2017
ms.topic: article
ms.prod: 
ms.service: dynamics-365-retail
ms.technology: 
ms.search.form: RetailParameters, RetailPeriodicDiscount,
audience: Application User, IT Pro
ms.reviewer: kfend
ms.search.scope: Core, Operations, Retail
ms.custom: 89643
ms.assetid: 09843c9a-3e19-4e4a-a8ce-80650f2095f9
ms.search.region: global
ms.search.industry: Retail
ms.author: kfend
ms.search.validFrom: 2016-05-31
ms.dyn365.ops.version: AX 7.0.1
ms.translationtype: HT
ms.sourcegitcommit: a8b5a5af5108744406a3d2fb84d7151baea2481b
ms.openlocfilehash: c094bfa07275c14ba63cae5404156ce72c52d0b5
ms.contentlocale: hu-hu
ms.lasthandoff: 04/13/2018

---

# <a name="determine-the-optimal-combination-of-overlapping-discounts"></a><span data-ttu-id="59538-104">Átfedő kedvezmények optimális kombinációjának meghatározása</span><span class="sxs-lookup"><span data-stu-id="59538-104">Determine the optimal combination of overlapping discounts</span></span>

[!INCLUDE [banner](includes/banner.md)]

<span data-ttu-id="59538-105">Átfedő kedvezmények esetén meg kell határozni az egymást átfedő kedvezmények azon kombinációját, amely a legalacsonyabb tranzakciós végösszeget vagy a legnagyobb összes engedményt eredményezi.</span><span class="sxs-lookup"><span data-stu-id="59538-105">When discounts overlap, you must determine the combination of overlapping discounts that will produce the lowest transaction total or the highest total discount.</span></span> <span data-ttu-id="59538-106">Ha az engedmény összege a vásárolt termékek ára szerint változik, például a kiskereskedelmben gyakori „1 vásárlása esetén 1 X százalék engedmény” esetén ez a folyamat kombinatorikai optimalizálási problémává válik.</span><span class="sxs-lookup"><span data-stu-id="59538-106">When the discount amount varies according to the price of the products that are purchased, such as in the common “Buy 1, get 1 X percent off” (BOGO) retail discount, this process becomes an issue of combinatorial optimization.</span></span>

<span data-ttu-id="59538-107">Ez a cikk a Microsoft Dynamics AX 2012 R3 (KB 3105973-mal, kiadva 2015. november 2-án) vagy későbbi verzióira és a Microsoft Dynamics 365 for Retail kiadására vonatkozik.</span><span class="sxs-lookup"><span data-stu-id="59538-107">This article applies to Microsoft Dynamics AX 2012 R3 with KB 3105973 (released November 2, 2015) or later, and to Microsoft Dynamics 365 for Retail.</span></span> <span data-ttu-id="59538-108">Az átfedő kedvezmények megfelelő kombinációjának időben történő meghatározásához bevezettünk egy, az átfedő kedvezmények alkalmazására szolgáló módszer.</span><span class="sxs-lookup"><span data-stu-id="59538-108">To determine the combination overlapping discounts to apply in a timely manner, we have introduced a method for applying overlapping discounts.</span></span> <span data-ttu-id="59538-109">Ezen új módszernek a **marginálisérték-rangsorolás** nevet adtuk.</span><span class="sxs-lookup"><span data-stu-id="59538-109">We call this new method **marginal value ranking**.</span></span> <span data-ttu-id="59538-110">A marginálisérték-rangsorolást használjuk, valahányszor az egymást átfedő kedvezmények lehetséges kombinációinak kiértékeléséhez szükséges idő átlépi azt a küszöbértéket, amely a **Kiskereskedelmi paraméterek** oldalán konfigurálható.</span><span class="sxs-lookup"><span data-stu-id="59538-110">Marginal value ranking is used when the time that is required in order to evaluate the possible combinations of overlapping discounts exceeds a threshold that is configurable on the **Retail parameters** page.</span></span> <span data-ttu-id="59538-111">A marginálisérték-rangsorolási módszerben minden átfedő engedménynél kiszámítunk egy értéket az engedmény a megosztott termékekre jutó értéke alapján.</span><span class="sxs-lookup"><span data-stu-id="59538-111">In the marginal value ranking method, a value is calculated for each overlapping discount by using the discount’s value on the shared products.</span></span> <span data-ttu-id="59538-112">Az átfedő kedvezményeket ezután a legmagasabb relatív értéktől a legalacsonyabb relatív értékig alkalmazzuk.</span><span class="sxs-lookup"><span data-stu-id="59538-112">The overlapped discounts are then applied from the highest relative value to the lowest relative value.</span></span> <span data-ttu-id="59538-113">Az új módszer részleteit a „Marginális érték” részben találja a cikk későbbi részében.</span><span class="sxs-lookup"><span data-stu-id="59538-113">For details about the new method, see the “Marginal value” section, later in this article.</span></span> <span data-ttu-id="59538-114">A marginálisérték-rangsorolást nem használjuk, egy termék engedményének összegét a tranzakció másik terméke nem befolyásolja.</span><span class="sxs-lookup"><span data-stu-id="59538-114">Marginal value ranking isn’t used when the discount amounts for a product aren’t affected by another product in the transaction.</span></span> <span data-ttu-id="59538-115">Például ezt a módszer nem használjuk két egyszerű engedmény esetén, sem egy egyszerű és egy termékalapú mennyiségi engedmény esetén.</span><span class="sxs-lookup"><span data-stu-id="59538-115">For example, this method isn’t used for two simple discounts, or for a simple discount and a single product quantity discount.</span></span>

## <a name="discount-examples"></a><span data-ttu-id="59538-116">Példák engedményre</span><span class="sxs-lookup"><span data-stu-id="59538-116">Discount examples</span></span>
<span data-ttu-id="59538-117">Korlátlan számban hozhat létre kiskereskedelmi engedményeket közös csoportba sorolt termékekre vonatkozóan.</span><span class="sxs-lookup"><span data-stu-id="59538-117">You can create an unlimited number of retail discounts on a common set of products.</span></span> <span data-ttu-id="59538-118">Azonban mivel korlátozás nincsen, teljesítményproblémák merülhetnek fel, amikor megkísérli kiszámítani a különböző termékekre alkalmazott kedvezményeket.</span><span class="sxs-lookup"><span data-stu-id="59538-118">However, because there is no limit, performance issues can occur when you try to calculate the discounts that should be used on the various products.</span></span> <span data-ttu-id="59538-119">A következő példák részletesen mutatják be ezt a problémát.</span><span class="sxs-lookup"><span data-stu-id="59538-119">The following examples illustrate this issue in more detail.</span></span> <span data-ttu-id="59538-120">Az 1. példában két termékkel és két egymást átfedő kedvezménnyel indítunk.</span><span class="sxs-lookup"><span data-stu-id="59538-120">In example 1, we start with two products and two overlapping discounts.</span></span> <span data-ttu-id="59538-121">Ezt követően a 2. a példában megmutatjuk, hogyan alakul a probléma további termékek hozzáadásával.</span><span class="sxs-lookup"><span data-stu-id="59538-121">Then, in example 2, we show how the issue evolves as more products are added.</span></span>

### <a name="example-1-two-products-and-two-discounts"></a><span data-ttu-id="59538-122">1. példa: Két termék és két engedmény</span><span class="sxs-lookup"><span data-stu-id="59538-122">Example 1: Two products and two discounts</span></span>

<span data-ttu-id="59538-123">Ebben a példában két termékre van szükség az egyes kedvezmények elnyerése érdekében, és a kedvezmények nem kombinálhatók.</span><span class="sxs-lookup"><span data-stu-id="59538-123">In this example, two products are required in order to qualify for each discount, and the discounts can’t be combined.</span></span> <span data-ttu-id="59538-124">A példában szereplő engedmények **Legjobb ár** típusú engedmények.</span><span class="sxs-lookup"><span data-stu-id="59538-124">The discounts in this example are **Best price** discounts.</span></span> <span data-ttu-id="59538-125">Mindkét termék mindkét engedményre jogosult.</span><span class="sxs-lookup"><span data-stu-id="59538-125">Both products qualify for both discounts.</span></span> <span data-ttu-id="59538-126">Az alábbiakban látható a két engedmény.</span><span class="sxs-lookup"><span data-stu-id="59538-126">Here are the two discounts.</span></span>
<span data-ttu-id="59538-127">![Átfedő engedménykombináció 01](./media/overlapping-discount-combo-01.jpg)</span><span class="sxs-lookup"><span data-stu-id="59538-127">![Overlapping discount combo 01](./media/overlapping-discount-combo-01.jpg)</span></span>

<span data-ttu-id="59538-128">Bármely két termékre e két engedmény közül a jobb a nagyobb termék árától függ.</span><span class="sxs-lookup"><span data-stu-id="59538-128">For any two products, the better of these two discounts depends on the prices of the two products.</span></span> <span data-ttu-id="59538-129">Ha mindkét termék ára azonos vagy közel azonos, az 1. engedmény a jobb.</span><span class="sxs-lookup"><span data-stu-id="59538-129">When the price of both products is equal or almost equal, discount 1 is better.</span></span> <span data-ttu-id="59538-130">Ha az egyik termék ára jelentősen kisebb, mint a másik termék ára, a 2. engedmény a jobb.</span><span class="sxs-lookup"><span data-stu-id="59538-130">When the price of one product is significantly less than the price of the other product, discount 2 is better.</span></span> <span data-ttu-id="59538-131">Íme a két engedmény egymással szembeni értékelésére szolgáló matematikai szabály: ![Átfedő engedménykombináció 02](./media/overlapping-discount-combo-02.jpg)</span><span class="sxs-lookup"><span data-stu-id="59538-131">Here is the mathematical rule for evaluating these two discounts against each other: ![Overlapping discount combo 02](./media/overlapping-discount-combo-02.jpg)</span></span>

<span data-ttu-id="59538-132">**Megjegyzés:** Ha az 1. termék ára megegyezik a 2. termék árának kétharmadval, a két engedmény egyenlő.</span><span class="sxs-lookup"><span data-stu-id="59538-132">**Note:** When the price of product 1 is equal to two-thirds of the price of product 2, the two discounts are equal.</span></span> <span data-ttu-id="59538-133">Ebben a példában az 1. engedménynél a tényleges engedmény százaléka változik a néhány százalék (amikor a két termék ára messze esik egymástól) és a legfeljebb 25% között (amikor a két termék ára azonos).</span><span class="sxs-lookup"><span data-stu-id="59538-133">In this example, the effective discount percentage for discount 1 varies from a few percent (when the prices of the two products are far apart) to a maximum of 25 percent (when the two products have the same price).</span></span> <span data-ttu-id="59538-134">A tényleges engedmény százaléka a 2. engedmény esetén fix.</span><span class="sxs-lookup"><span data-stu-id="59538-134">The effective discount percentage for discount 2 is fixed.</span></span> <span data-ttu-id="59538-135">Mindig 20 százalék.</span><span class="sxs-lookup"><span data-stu-id="59538-135">It’s always 20 percent.</span></span> <span data-ttu-id="59538-136">Mivel az 1. engedmény tényleges százaléka olyan tartományba esik, amely több vagy kevesebb is lehet, mint a 2. engedmény, az, hogy melyik a legjobb kedvezmény, a két diszkontálandó termék árától függ.</span><span class="sxs-lookup"><span data-stu-id="59538-136">Because the effective discount percentage for discount 1 has a range that can be more than or less than discount 2, the best discount depends on the prices of the two products that must be discounted.</span></span> <span data-ttu-id="59538-137">Ebben a példában a számítás gyorsan befejeződött, mert csak két engedményt alkalmaztunk mindössze két termékre.</span><span class="sxs-lookup"><span data-stu-id="59538-137">In this example, the calculation is completed quickly, because only two discounts are applied on only two products.</span></span> <span data-ttu-id="59538-138">Csak két lehetséges kombináció létezik: az 1. engedmény egy alkalmazása vagy a 2. engedmény egy alkalmazása.</span><span class="sxs-lookup"><span data-stu-id="59538-138">There are only two possible combinations: one application of discount 1 or one application of discount 2.</span></span> <span data-ttu-id="59538-139">Nincsenek kiszámítandó permutációk.</span><span class="sxs-lookup"><span data-stu-id="59538-139">There are no permutations to calculate.</span></span> <span data-ttu-id="59538-140">Minden engedmény értéke kiszámításra kerül mindkét termék használatával, és a rendszer a legjobb kedvezményt használja.</span><span class="sxs-lookup"><span data-stu-id="59538-140">The value of each discount is calculated by using both products, and the best discount is used.</span></span>

### <a name="example-2-four-products-and-two-discounts"></a><span data-ttu-id="59538-141">2. példa: Négy termék és két engedmény</span><span class="sxs-lookup"><span data-stu-id="59538-141">Example 2: Four products and two discounts</span></span>

<span data-ttu-id="59538-142">Ezután négy terméket fogunk használni és ugyanazon két engedményt.</span><span class="sxs-lookup"><span data-stu-id="59538-142">Next, we will use four products and the same two discounts.</span></span> <span data-ttu-id="59538-143">Mind a négy termék mindkét engedményre jogosult.</span><span class="sxs-lookup"><span data-stu-id="59538-143">All four products qualify for both discounts.</span></span> <span data-ttu-id="59538-144">Itt tizenkét lehetséges kombináció létezik.</span><span class="sxs-lookup"><span data-stu-id="59538-144">There are twelve possible combinations.</span></span> <span data-ttu-id="59538-145">Végezetül két engedményt alkalmazunk a tranzakcióra három kombináció valamelyikében: az 1. engedmény két alkalmazása, a 2. engedmény két alkalmazása vagy az 1. engedmény két alkalmazása és a 2. engedmény egy alkalmazása.</span><span class="sxs-lookup"><span data-stu-id="59538-145">In the end, two discounts will be applied to the transaction in one of three combinations: two applications of discount 1, two applications of discount 2, or one application of discount 1 and one application of discount 2.</span></span> <span data-ttu-id="59538-146">A lehetséges kombinációk bemutatására négy más-más árú termékből álló két termékcsomagra vetünk közelebbi pillantást:</span><span class="sxs-lookup"><span data-stu-id="59538-146">To illustrate the possible combinations, we will look at two different sets of four products that have different prices:</span></span>

-   <span data-ttu-id="59538-147">Mind a négy termék ára ugyanaz, 15,00 USD.</span><span class="sxs-lookup"><span data-stu-id="59538-147">All four products have the same price, $15.00.</span></span> <span data-ttu-id="59538-148">Ebben az esetben a legjobb engedménykombináció az 1. engedmény két alkalmazása.</span><span class="sxs-lookup"><span data-stu-id="59538-148">In this case, the best discount combination is two applications of discount 1.</span></span> <span data-ttu-id="59538-149">Két termék teljes áron kerül eladásra, kettő pedig 50 százalékon.</span><span class="sxs-lookup"><span data-stu-id="59538-149">Two products will be full price, and two will be 50 percent off.</span></span> <span data-ttu-id="59538-150">A tranzakció diszkontált összértéke 45 USD (15 + 15 + 7,50 + 7,50), amely 15 USD (25 százalék) kedvezményt jelent a teljes, nem diszkontált 60 USD-s összegből.</span><span class="sxs-lookup"><span data-stu-id="59538-150">The discounted total for the transaction is $45 (15 + 15 + 7.50 + 7.50), which is $15 (25 percent) off the undiscounted total of $60.</span></span> <span data-ttu-id="59538-151">A 2. kedvezmény csak 12 USD (20 százalék).</span><span class="sxs-lookup"><span data-stu-id="59538-151">Discount 2 is only $12 (20 percent).</span></span>
-   <span data-ttu-id="59538-152">Két termék egyenként 20 USD, egy termék 15 USD, egy termék pedig 5 USD.</span><span class="sxs-lookup"><span data-stu-id="59538-152">Two products are $20 each, one product is $15, and one product is $5.</span></span> <span data-ttu-id="59538-153">Ebben az esetben a legjobb engedménykombináció a 2. engedmény egy alkalmazása és az 1. engedmény egy alkalmazása.</span><span class="sxs-lookup"><span data-stu-id="59538-153">In this case, the best discount combination is one application of discount 2 and one application of discount 1.</span></span> <span data-ttu-id="59538-154">A következő táblázatok az engedményeket mutatják be.</span><span class="sxs-lookup"><span data-stu-id="59538-154">The following tables illustrates the discounts.</span></span>

<span data-ttu-id="59538-155">A táblák olvasásához vegyen egy terméket egy sorból és egy terméket egy oszlopból.</span><span class="sxs-lookup"><span data-stu-id="59538-155">To read the tables, use one product from a row and one product from a column.</span></span> <span data-ttu-id="59538-156">Például az 1. engedmény táblájában két 20 USD-s terméket kombinálva 10 USD kedvezményt kapunk.</span><span class="sxs-lookup"><span data-stu-id="59538-156">For example, in the table for discount 1, when you combine the two $20 products, you get $10 off.</span></span> <span data-ttu-id="59538-157">A 2. engedmény táblájában a 15 USD-s és az 5 USD-s terméket kombinálva 4 USD kedvezményt kapunk.</span><span class="sxs-lookup"><span data-stu-id="59538-157">In the table for discount 2, when you combine the $15 product and the $5 product, you get $4 off.</span></span>
<span data-ttu-id="59538-158">![Átfedő engedménykombináció 03](./media/overlapping-discount-combo-03.jpg)</span><span class="sxs-lookup"><span data-stu-id="59538-158">![Overlapping discount combo 03](./media/overlapping-discount-combo-03.jpg)</span></span>

<span data-ttu-id="59538-159">Először megkeressük a legnagyobb engedményt, amely valamelyik engedmény használatával két termékre csak elérhető.</span><span class="sxs-lookup"><span data-stu-id="59538-159">First, we find the largest discount that is available from any two products by using either discount.</span></span> <span data-ttu-id="59538-160">A két tábla a két termék összes kombinációjához mutatja az engedmény összegét.</span><span class="sxs-lookup"><span data-stu-id="59538-160">The two tables show the discount amount for all combinations of the two products.</span></span> <span data-ttu-id="59538-161">A táblák árnyékolt részekkel képviselik azokat az eseteket, amikor egy termék önmagával lenne párosítva, ami nem lehetséges, illetve a fordított párosításokat, amelyeknél ugyanazt az engedményösszeget kapjuk, tehát ezek figyelmen kívül hagyhatók.</span><span class="sxs-lookup"><span data-stu-id="59538-161">The shaded portions of the tables represent either cases where a product is paired with itself, which we can’t do, or a reverse pairing of two products that produces the same discount amount and can be ignored.</span></span> <span data-ttu-id="59538-162">A táblákat megnézve látható, hogy az 1. engedmény a két 20 USD-s tételre a legnagyobb kedvezmény, aminél egyik engedményt a négy termék bármelyikére alkalmazva sem kapunk nagyobbat.</span><span class="sxs-lookup"><span data-stu-id="59538-162">By looking at the tables, you can see that discount 1 for the two $20 items is the largest discount that is available for either discount on all four products.</span></span> <span data-ttu-id="59538-163">(Ezt az engedményt az első tábla zölddel emeli ki.) Így csak a 15 USD-s és az 5 USD-s termék marad.</span><span class="sxs-lookup"><span data-stu-id="59538-163">(This discount is highlighted in green in the first table.) That leaves only the $15 product and the $5 product.</span></span> <span data-ttu-id="59538-164">Ha ismét megnézzük a két táblát, láthatja, hogy e két termékre vonatkozóan az 1. engedmény 2,50 USD kedvezményt ad, a 2. engedmény pedig 4 USD kedvezményt.</span><span class="sxs-lookup"><span data-stu-id="59538-164">By looking at the two tables again, you can see that, for these two products, discount 1 gives a $2.50 discount, whereas discount 2 gives a $4 discount.</span></span> <span data-ttu-id="59538-165">Ezért a 2. engedményt választjuk.</span><span class="sxs-lookup"><span data-stu-id="59538-165">Therefore, we select discount 2.</span></span> <span data-ttu-id="59538-166">A teljes engedmény 14 USD.</span><span class="sxs-lookup"><span data-stu-id="59538-166">The total discount is $14.</span></span> <span data-ttu-id="59538-167">E gondolatmenet egyszerűbb megjelenítéséhez az alábbiakban két további táblát talál, amelyek minden lehetséges kéttermékes kombinációra megmutatják a tényleges engedmény százalékát mind az 1. engedménynél, mind a 2. engedménynél.</span><span class="sxs-lookup"><span data-stu-id="59538-167">To make this discussion easier to visualize, here are two additional tables that show the effective discount percentage for all possible two-product combinations for both discount 1 and discount 2.</span></span> <span data-ttu-id="59538-168">Csak a kombinációk listájának fele látható, mivel e két engedménynél nem számít a sorrend, amelyben a két terméket beleszámítjuk az engedménybe.</span><span class="sxs-lookup"><span data-stu-id="59538-168">Only half the list of combinations is included, because, for these two discounts, the order in which the two products are put into the discount doesn’t matter.</span></span> <span data-ttu-id="59538-169">A legmagasabb tényleges engedmény (25 százalék) ki van emelve zölddel, a legalacsonyabb tényleges engedmény (10 százalék) pedig pirossal.</span><span class="sxs-lookup"><span data-stu-id="59538-169">The highest effective discount (25 percent) is highlighted in green, and the lowest effective discount (10 percent) is highlighted in red.</span></span> 

![Átfedő engedménykombináció 04](./media/overlapping-discount-combo-04.jpg)

<span data-ttu-id="59538-171">**Megjegyzés:** amikor az árak változnak, és két vagy több engedmény verseng egymással, csak úgy lehet garantálni a kedvezmények optimális kombinációjának biztosítását, hogy mindkét engedményt kiértékeljük és összehasonlítjuk.</span><span class="sxs-lookup"><span data-stu-id="59538-171">**Note:** When prices vary, and two or more discount compete, the only way to guarantee the best combination of discounts is to evaluate both discounts and compare them.</span></span>

## <a name="total-possible-combinations"></a><span data-ttu-id="59538-172">Összes lehetséges kombináció</span><span class="sxs-lookup"><span data-stu-id="59538-172">Total possible combinations</span></span>
<span data-ttu-id="59538-173">Ez a szakasz az előzőekben látott példát folytatja.</span><span class="sxs-lookup"><span data-stu-id="59538-173">This section continues the example from the previous section.</span></span> <span data-ttu-id="59538-174">További termékeket és egy másik engedményt adunk hozzá, és megnézzük, hány kombinációt kell kiszámítani és összevetni.</span><span class="sxs-lookup"><span data-stu-id="59538-174">We will add more products and another discount, and see how many combinations must be calculated and compared.</span></span> <span data-ttu-id="59538-175">Az alábbi táblázat mutatja a lehetséges engedménykombinációk számát, ahogy a termékmennyiség növekszik.</span><span class="sxs-lookup"><span data-stu-id="59538-175">The following table shows the number of possible discount combinations as the product quantity increases.</span></span> <span data-ttu-id="59538-176">A tábla azt mutatja, mi történik, ha két egymást átfedő kedvezmény van jelen, miként az előző példában, illetve ha egymást átfedő kedvezmény van jelen.</span><span class="sxs-lookup"><span data-stu-id="59538-176">The table shows what happens both when there are two overlapping discounts, as in the previous example, and when there are three overlapping discounts.</span></span> <span data-ttu-id="59538-177">A lehetséges engedménykombinációk száma, amit értékelni kell, gyorsan meghaladja azt a mértéket, amit akár egy a gyors számítógép is képes elég gyorsan kiszámítani és összehasonlíthatani ahhoz, hogy az kiskereskedelmi tranzakcióknál elfogadható legyen.</span><span class="sxs-lookup"><span data-stu-id="59538-177">The number of possible discount combinations that must be evaluated soon exceeds what even a fast computer can calculate and compare quickly enough to be acceptable for retail transactions.</span></span>

![Átfedő engedménykombináció 05](./media/overlapping-discount-combo-05.jpg)

<span data-ttu-id="59538-179">Amikor még nagyobb mennyiségeket vagy több egymást átfedő engedményt alkalmazunk, a lehetséges engedménykombinációk száma hamarosan eléri a milliós nagyságrendet, és a kiértékelésükhöz és a legjobb kiválasztásához szükséges idő hamarosan észrevehetővé válik.</span><span class="sxs-lookup"><span data-stu-id="59538-179">When even larger quantities or more overlapping discounts are applied, the total number of possible discount combinations quickly goes into the millions, and the time that is required in order to evaluate and select the best possible combination quickly becomes noticeable.</span></span> <span data-ttu-id="59538-180">A kiskereskedelmi ármotorban optimalizálást végeztünk a kiértékelendő kombinációk teljes számának csökkentésére.</span><span class="sxs-lookup"><span data-stu-id="59538-180">Some optimizations have been done in the retail price engine to reduce the total number of combinations that must be evaluated.</span></span> <span data-ttu-id="59538-181">Azonban mivel az átfedő kedvezmények és a tranzakcióban részt vevő mennyiségek száma nem korlátozott, mindig sok kombinációt kell kiértékelni, valahányszor egymást átfedő kedvezményekkel számolunk.</span><span class="sxs-lookup"><span data-stu-id="59538-181">However, because the number overlapping discounts and the quantities in a transaction aren’t limited, a large number of combinations will always have to be evaluated whenever there are overlapping discounts.</span></span> <span data-ttu-id="59538-182">A marginálisérték-rangsorolás erre a problémára kínál megoldást.</span><span class="sxs-lookup"><span data-stu-id="59538-182">This issue is the issue that the marginal value ranking method addresses.</span></span>

## <a name="marginal-value-method"></a><span data-ttu-id="59538-183">Marginálisérték-módszer</span><span class="sxs-lookup"><span data-stu-id="59538-183">Marginal value method</span></span>
<span data-ttu-id="59538-184">Az exponenciálisan növekvő számú, kiértékelendő kombináció problémájának megoldása érdekében létezik egy optimalizálás, amely minden termékcsoportnál, amelyre két vagy több engedmény alkalmazható, az értéket minden engedménynél megosztott termékenként számítja ki.</span><span class="sxs-lookup"><span data-stu-id="59538-184">To resolve the issue of an exponentially increasing number of combinations that must be evaluated, an optimization exists that calculates the value per shared product of each discount on the set of products that two or more discounts can be applied to.</span></span> <span data-ttu-id="59538-185">Ezt az értéket a megosztott termékek kedvezménye **marginális értékének** hívjuk.</span><span class="sxs-lookup"><span data-stu-id="59538-185">We refer to this value as the **marginal value** of the discount for the shared products.</span></span> <span data-ttu-id="59538-186">A marginális érték a kedvezmény értékének azon termékenkénti átlagos növekedése, amelyet akkor kapunk, ha a megosztott termékeket minden engedménybe belefoglaljuk.</span><span class="sxs-lookup"><span data-stu-id="59538-186">The marginal value is the average per product increase in the total discount amount when the shared products are included in each discount.</span></span> <span data-ttu-id="59538-187">A marginális értéket úgy számítjuk ki, hogy vesszük az összengedmény összegét (DTotal), kivonjuk belőle a megosztott termékek nélküli engedmény összegét (DMinus\\ Megosztott), és ez a különbséget elosztjuk a megosztott termékek (ProductsShared) számával.</span><span class="sxs-lookup"><span data-stu-id="59538-187">The marginal value is calculated by taking the total discount amount (DTotal), subtracting the discount amount without the shared products (DMinus\\ Shared), and dividing that difference by the number of shared products (ProductsShared).</span></span> 
<span data-ttu-id="59538-188">![Átfedő engedménykombináció 06](./media/overlapping-discount-combo-06.jpg)</span><span class="sxs-lookup"><span data-stu-id="59538-188">![Overlapping discount combo 06](./media/overlapping-discount-combo-06.jpg)</span></span>

<span data-ttu-id="59538-189">Miután a megosztott termékcsoport minden egyes kedvezményének marginális értékét kiszámítottuk, az összes kedvezményt sorrendben alkalmazzuk a megosztott termékekre a legmagasabb marginális értéktől a legalacsonyabbig.</span><span class="sxs-lookup"><span data-stu-id="59538-189">After the marginal value of each discount on a shared set of products is calculated, the discounts are applied to the shared products in order, exhaustively, from highest marginal value to lowest marginal value.</span></span> <span data-ttu-id="59538-190">Ennél a módszernél nem hasonlítjuk össze az összes fennmaradó engedménylehetőséget, valahányszor alkalmaztuk egy kedvezmény egy példányát.</span><span class="sxs-lookup"><span data-stu-id="59538-190">For this method, all remaining discount possibilities aren’t compared every time after a single instance of a discount is applied.</span></span> <span data-ttu-id="59538-191">Ehelyett az egymást átfedő kedvezményeket egyszer összehasonlítjuk, majd pedig sorrendben alkalmazzuk.</span><span class="sxs-lookup"><span data-stu-id="59538-191">Instead, the overlapping discounts are compared one time and then applied in order.</span></span> <span data-ttu-id="59538-192">További összehasonlításokra nem kerül sor.</span><span class="sxs-lookup"><span data-stu-id="59538-192">No additional comparisons are done.</span></span> <span data-ttu-id="59538-193">A küszöbérték, amelynél a rendszer a marginálisérték-módszerre vált, a **Kiskereskedelmi paraméterek** oldal **Engedmény** lapján állítható be.</span><span class="sxs-lookup"><span data-stu-id="59538-193">You can configure the threshold to switch to the marginal value method on the **Discount** tab of the **Retail parameters** page.</span></span> <span data-ttu-id="59538-194">Az összengedmény kiszámítására felhasznált elfogadható idő hossza kiskereskedelmi iparáganként változik.</span><span class="sxs-lookup"><span data-stu-id="59538-194">The acceptable time to calculate the total discount varies across retail industries.</span></span> <span data-ttu-id="59538-195">Az idő általában viszont a tized ezredmásodpercek és az egy másodperc közti tartományba esik.</span><span class="sxs-lookup"><span data-stu-id="59538-195">However, this time generally falls in the range of tens of milliseconds to one second.</span></span>




