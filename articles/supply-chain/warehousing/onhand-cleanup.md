---
title: Raktárkezelés készleten lévő bejegyzéseinek karbantartási feladata
description: Ez a témakör bemutatja az aktuális készlet bejegyzések karbantartási feladatát, amely a kapcsolódó, de szükségtelen rekordok azonosításával és törlésével segít a rendszer teljesítményének növelésében.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: SysOperationTemplateForm
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: 9d01c577fc33564d3517d242e9b01f73cc8e079c
ms.sourcegitcommit: 827d77c638555396b32d36af5d22d1b61dafb0e8
ms.translationtype: HT
ms.contentlocale: hu-HU
ms.lasthandoff: 10/16/2020
ms.locfileid: "4429903"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="58978-103">Raktárkezelés készleten lévő bejegyzéseinek karbantartási feladata</span><span class="sxs-lookup"><span data-stu-id="58978-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="58978-104">Az aktuális készlet kiszámításához használt lekérdezések teljesítményére hatással van az érintett táblák rekordjainak száma.</span><span class="sxs-lookup"><span data-stu-id="58978-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="58978-105">A teljesítmény javítása érdekében az egyik mód az, hogy csökkentse azoknak a rekordoknak a számát, amelyeket az adatbázisnak figyelembe kell vennie.</span><span class="sxs-lookup"><span data-stu-id="58978-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="58978-106">Ez a témakör bemutatja az aktuális készlet bejegyzések karbantartási feladatát, amely törli a szükségtelen rekordokat az InventSum és a WHSInventReserve táblákban.</span><span class="sxs-lookup"><span data-stu-id="58978-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="58978-107">Ezek a táblák a raktárkezelési feldolgozására engedélyezett cikkek aktuális adatait tárolják.</span><span class="sxs-lookup"><span data-stu-id="58978-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="58978-108">(Ezeket a cikkeket WHS cikkeknek nevezzük.) A rekordok törlése jelentősen javíthatja az aktuáliskészlet-számítások teljesítményét.</span><span class="sxs-lookup"><span data-stu-id="58978-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="58978-109">A karbantartási feladat tartalma</span><span class="sxs-lookup"><span data-stu-id="58978-109">What the cleanup job does</span></span>

<span data-ttu-id="58978-110">Az aktuális készlet bejegyzések karbantartási feladata törli a WHSInventReserve és az InventSum táblák azon rekordjait, amelyeknél az összes mező értéke *0* (nulla).</span><span class="sxs-lookup"><span data-stu-id="58978-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="58978-111">Ezek a rekordok törölhetők, mivel nem járulnak hozzá az aktuális készlet adatokhoz.</span><span class="sxs-lookup"><span data-stu-id="58978-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="58978-112">A feladat csak a **Hely** szintje alatt lévő rekordokat törli.</span><span class="sxs-lookup"><span data-stu-id="58978-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="58978-113">Ha a negatív tényleges készlet engedélyezve van, előfordulhat, hogy a karbantartási feladat nem tudja törölni az összes szükséges bejegyzést.</span><span class="sxs-lookup"><span data-stu-id="58978-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="58978-114">Ennek a korlátozásnak az az oka, hogy a feladatnak lehetővé kell tennie egy speciális esetet, amikor az azonosítótábla több sorozatszámmal rendelkezik, és az egyik ilyen sorozatszám negatív lett.</span><span class="sxs-lookup"><span data-stu-id="58978-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="58978-115">Például a rendszernek az azonosítótábla szintjén nulla értékkel rendelkezik aktuális készletként, amikor az azonosítótábla +1 darabbal rendelkezik az 1. sorozatszámból és – 1 darabbal a 2. sorozatszámból.</span><span class="sxs-lookup"><span data-stu-id="58978-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="58978-116">Ennél a speciális esetnél a feladat ellőször egy szélességi törlést végez, ahol először az alsó szinteken próbál törölni.</span><span class="sxs-lookup"><span data-stu-id="58978-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="58978-117">A karbantartási feladat ütemezése és konfigurálása</span><span class="sxs-lookup"><span data-stu-id="58978-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="58978-118">Az aktuális készlet bejegyzések karbantartási feladata a **Készletkezelés \> Időszakos feladatok \> Karbantartás \> Raktárkezelés készleten lévő bejegyzéseinek karbantartása** alatt érhető el.</span><span class="sxs-lookup"><span data-stu-id="58978-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="58978-119">A szokásos feladatok beállításával szabályozhatja a feladat futtatásának a hatókörét és ütemezését.</span><span class="sxs-lookup"><span data-stu-id="58978-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="58978-120">Ezen túlmenően a következő beállítások állnak rendelkezésre:</span><span class="sxs-lookup"><span data-stu-id="58978-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="58978-121">**Törlés, ha ennyi napig nem frissült** – Adja meg azt a minimális számú napot, ameddig a feladatnak várnia kell, mielőtt törli a nulla mennyiségere eső aktuális készlet bejegyzést.</span><span class="sxs-lookup"><span data-stu-id="58978-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="58978-122">Ezzel a beállítással csökkentheti a még használatban lévő aktuális készlet bejegyzések törlésének kockázatát.</span><span class="sxs-lookup"><span data-stu-id="58978-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="58978-123">Ha azt szeretné, hogy a karbantartás mielőbb történjen meg, adja meg a *0* (nulla) értéket, vagy hagyja üresen a mezőt.</span><span class="sxs-lookup"><span data-stu-id="58978-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="58978-124">**Maximális végrehajtási idő (óra)** – Megadja a karbantartási feladat maximális végrehajtási idejét órában.</span><span class="sxs-lookup"><span data-stu-id="58978-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="58978-125">Ha a feladat a megadott idő elteltével még nem fejeződött be, akkor az addig elvégzett munkát menti, majd lezárja magát.</span><span class="sxs-lookup"><span data-stu-id="58978-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="58978-126">Ez a funkció különösen fontos a magas készlethasználatú megvalósításoknál.</span><span class="sxs-lookup"><span data-stu-id="58978-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="58978-127">Ezekben az esetekben ütemeznie kell a feladatot, hogy időnként fusson, amikor a rendszer terhelése a lehető legkönnyebb.</span><span class="sxs-lookup"><span data-stu-id="58978-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="58978-128">Ha azt szeretné, hogy a kötegelt feladat mindaddig fusson, amíg be nem fejeződik, írjon be *0* (nulla) értéket, vagy hagyja üresen a mezőt.</span><span class="sxs-lookup"><span data-stu-id="58978-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="58978-129">Ez a beállítás csak akkor érhető el, ha a kapcsolódó funkció [be van kapcsolva a rendszerben](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="58978-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="58978-130">Bár a feladat a szokásos munkaidő alatt is futtatható, javasoljuk, hogy a nyitvatartási időn kívül fusson.</span><span class="sxs-lookup"><span data-stu-id="58978-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="58978-131">Ily módon megakadályozhatja az olyan ütközéseket, amelyek akkor merülhetnek fel, ha a felhasználó egy olyan rekordon dolgozik, amelyet a program még tisztít.</span><span class="sxs-lookup"><span data-stu-id="58978-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="58978-132">Ha a feladat egy elem rekordját próbálja törölni, miközben a rekordot egy másik felhasználó használja, akkor egy holtpont-hibát kap a karbantartási feladat vagy a felhasználó.</span><span class="sxs-lookup"><span data-stu-id="58978-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="58978-133">A feladat a futtatása esetén 100-as véglegesítési mérettel rendelkezik.</span><span class="sxs-lookup"><span data-stu-id="58978-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="58978-134">Más szóval a program megpróbálkozik egy véglegesítéssel minden 100 törlést követően.</span><span class="sxs-lookup"><span data-stu-id="58978-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="58978-135">Mivel azonban egyes törlések halmazalapúak, előfordulhatnak olyan helyzetek, hogy egy tranzakcióban több mint 100 rekordot lehet törölni.</span><span class="sxs-lookup"><span data-stu-id="58978-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="58978-136">Ennek megfelelően zárolási eszkalációk néha továbbra is előfordulhatnak.</span><span class="sxs-lookup"><span data-stu-id="58978-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="58978-137">Lehetséges felhasználói hatás</span><span class="sxs-lookup"><span data-stu-id="58978-137">Possible user impact</span></span>

<span data-ttu-id="58978-138">Előfordulhat, hogy a felhasználók akkor is érintettek lehenek, ha az aktuális készlet bejegyzések karbantartási feladata egy adott szint összes rekordját törli (például az azonosítótábla szintje).</span><span class="sxs-lookup"><span data-stu-id="58978-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="58978-139">Ebben az esetben előfordulhat, hogy a funkció, amely az azonosítótáblán korábban rendelkezésre álló készlet megtekintésére szolgál, nem az elvártaknak megfelelően működik, mivel a releváns aktuális készlet bejegyzések már nem állnak rendelkezésre.</span><span class="sxs-lookup"><span data-stu-id="58978-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="58978-140">(Ez a funkció ellenőrzi a **Mennyiség \<\> 0** feltételt a **Dimenzió megjelenítése** beállításban, amikor a felhasználók aktuális készletre vonatkozó adatokat tekintenek meg.) A karbantartási feladat által biztosított teljesítményjavulás azonban ellensúlyozza ezt a kis funkcióvesztést.</span><span class="sxs-lookup"><span data-stu-id="58978-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="58978-141">A Maximális végrehajtási idő beállítás elérhetővé tétele</span><span class="sxs-lookup"><span data-stu-id="58978-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="58978-142">Alapértelmezésben a **Maximális végrehajtási idő** beállítás nem érhető el.</span><span class="sxs-lookup"><span data-stu-id="58978-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="58978-143">Ha használni szeretné, akkor a [funkciókezelés](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) használatával be kell kapcsolnia a kapcsolódó funkciót a rendszerében.</span><span class="sxs-lookup"><span data-stu-id="58978-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="58978-144">A **Funkció kezelése** munkaterületen a funkció a következő módon van listázva:</span><span class="sxs-lookup"><span data-stu-id="58978-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="58978-145">**Modul:** *Raktárkezelés*</span><span class="sxs-lookup"><span data-stu-id="58978-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="58978-146">**Funkció neve:** *Raktárkezelés készleten lévő bejegyzései karbantartási feladatának maximális végrehajtási ideje*</span><span class="sxs-lookup"><span data-stu-id="58978-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
